var iO=Object.defineProperty,oO=Object.defineProperties;var sO=Object.getOwnPropertyDescriptors;var cb=Object.getOwnPropertySymbols,aO=Object.getPrototypeOf,cO=Object.prototype.hasOwnProperty,uO=Object.prototype.propertyIsEnumerable,lO=Reflect.get;var ub=(t,e,n)=>e in t?iO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})cO.call(e,n)&&ub(t,n,e[n]);if(cb)for(var n of cb(e))uO.call(e,n)&&ub(t,n,e[n]);return t},J=(t,e)=>oO(t,sO(e));var $r=(t,e,n)=>lO(aO(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var yg;function Pl(){return yg}function Nn(t){let e=yg;return yg=t,e}var lb=Symbol("NotFound");function Yo(t){return t===lb||t?.name==="\u0275NotFound"}function Ll(t,e){return Object.is(t,e)}var yt=null,xl=!1,vg=1,dO=null,vt=Symbol("SIGNAL");function se(t){let e=yt;return yt=t,e}function Vl(){return yt}var $i={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zo(t){if(xl)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(t);let e=yt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=yt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:yt.producers,n!==void 0&&n.producer===t)){yt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===yt&&(!r||fO(i,yt)))return;let o=Xo(yt),s={producer:t,consumer:yt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};yt.producersTail=s,e!==void 0?e.nextProducer=s:yt.producers=s,o&&hb(t,s)}function db(){vg++}function jl(t){if(!(Xo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===vg)){if(!t.producerMustRecompute(t)&&!Ka(t)){Fl(t);return}t.producerRecomputeValue(t),Fl(t)}}function _g(t){if(t.consumers===void 0)return;let e=xl;xl=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||hO(r)}}finally{xl=e}}function Eg(){return yt?.consumerAllowSignalWrites!==!1}function hO(t){t.dirty=!0,_g(t),t.consumerMarkedDirty?.(t)}function Fl(t){t.dirty=!1,t.lastCleanEpoch=vg}function Hi(t){return t&&(t.producersTail=void 0,t.recomputing=!0),se(t)}function Jo(t,e){if(se(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(Xo(t))do r=Ig(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function Ka(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(jl(n),r!==n.version))return!0}return!1}function Qa(t){if(Xo(t)){let e=t.producers;for(;e!==void 0;)e=Ig(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function hb(t,e){let n=t.consumersTail,r=Xo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)hb(i.producer,i)}function Ig(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Xo(e)){let o=e.producers;for(;o!==void 0;)o=Ig(o)}return n}function Xo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Ul(t){dO?.(t)}function fO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bl(t,e){let n=Object.create(pO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(jl(n),Zo(n),n.value===Wa)throw n.error;return n.value};return r[vt]=n,Ul(n),r}var Ol=Symbol("UNSET"),kl=Symbol("COMPUTING"),Wa=Symbol("ERRORED"),pO=J(O({},$i),{value:Ol,dirty:!0,error:null,equal:Ll,kind:"computed",producerMustRecompute(t){return t.value===Ol||t.value===kl},producerRecomputeValue(t){if(t.value===kl)throw new Error("");let e=t.value;t.value=kl;let n=Hi(t),r,i=!1;try{r=t.computation(),se(null),i=e!==Ol&&e!==Wa&&r!==Wa&&t.equal(e,r)}catch(o){r=Wa,t.error=o}finally{Jo(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function gO(){throw new Error}var fb=gO;function pb(t){fb(t)}function wg(t){fb=t}var mO=null;function Dg(t,e){let n=Object.create($l);n.value=t,e!==void 0&&(n.equal=e);let r=()=>gb(n);return r[vt]=n,Ul(n),[r,s=>es(n,s),s=>bg(n,s)]}function gb(t){return Zo(t),t.value}function es(t,e){Eg()||pb(t),t.equal(t.value,e)||(t.value=e,yO(t))}function bg(t,e){Eg()||pb(t),es(t,e(t.value))}var $l=J(O({},$i),{equal:Ll,value:void 0,kind:"signal"});function yO(t){t.version++,db(),_g(t),mO?.(t)}function te(t){return typeof t=="function"}function ts(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hl=ts(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Oe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof Hl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mb(o)}catch(s){e=e??[],s instanceof Hl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)mb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qi(n,e)}remove(e){let{_finalizers:n}=this;n&&qi(n,e),e instanceof t&&e._removeParent(this)}};Oe.EMPTY=(()=>{let t=new Oe;return t.closed=!0,t})();var Cg=Oe.EMPTY;function ql(t){return t instanceof Oe||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function mb(t){te(t)?t():t.unsubscribe()}var pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ns={setTimeout(t,e,...n){let{delegate:r}=ns;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ns;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function zl(t){ns.setTimeout(()=>{let{onUnhandledError:e}=pn;if(e)e(t);else throw t})}function Ya(){}var yb=Tg("C",void 0,void 0);function vb(t){return Tg("E",void 0,t)}function _b(t){return Tg("N",t,void 0)}function Tg(t,e,n){return{kind:t,value:e,error:n}}var zi=null;function rs(t){if(pn.useDeprecatedSynchronousErrorHandling){let e=!zi;if(e&&(zi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zi;if(zi=null,n)throw r}}else t()}function Eb(t){pn.useDeprecatedSynchronousErrorHandling&&zi&&(zi.errorThrown=!0,zi.error=t)}var Gi=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ql(e)&&e.add(this)):this.destination=EO}static create(e,n,r){return new is(e,n,r)}next(e){this.isStopped?Ag(_b(e),this):this._next(e)}error(e){this.isStopped?Ag(vb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ag(yb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vO=Function.prototype.bind;function Sg(t,e){return vO.call(t,e)}var Rg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Gl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Gl(r)}else Gl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Gl(n)}}},is=class extends Gi{constructor(e,n,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&pn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sg(e.next,o),error:e.error&&Sg(e.error,o),complete:e.complete&&Sg(e.complete,o)}):i=e}this.destination=new Rg(i)}};function Gl(t){pn.useDeprecatedSynchronousErrorHandling?Eb(t):zl(t)}function _O(t){throw t}function Ag(t,e){let{onStoppedNotification:n}=pn;n&&ns.setTimeout(()=>n(t,e))}var EO={closed:!0,next:Ya,error:_O,complete:Ya};var os=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gt(t){return t}function Ng(...t){return Mg(t)}function Mg(t){return t.length===0?Gt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=wO(n)?n:new is(n,r,i);return rs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ib(r),new r((i,o)=>{let s=new is({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[os](){return this}pipe(...n){return Mg(n)(this)}toPromise(n){return n=Ib(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ib(t){var e;return(e=t??pn.Promise)!==null&&e!==void 0?e:Promise}function IO(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}function wO(t){return t&&t instanceof Gi||IO(t)&&ql(t)}function Pg(t){return te(t?.lift)}function pe(t){return e=>{if(Pg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new xg(t,e,n,r,i)}var xg=class extends Gi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ss(){return pe((t,e)=>{let n=null;t._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var as=class extends re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return ss()(this)}};var wb=ts(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Wl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new wb}next(n){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Cg:(this.currentObservers=null,o.push(n),new Oe(()=>{this.currentObservers=null,qi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return t.create=(e,n)=>new Wl(e,n),t})(),Wl=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Cg}};var Ke=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Og={now(){return(Og.delegate||Date).now()},delegate:void 0};var Kl=class extends Oe{constructor(e,n){super()}schedule(e,n=0){return this}};var Za={setInterval(t,e,...n){let{delegate:r}=Za;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Za;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var cs=class extends Kl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Za.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Za.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var us=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};us.now=Og.now;var ls=class extends us{constructor(e,n=us.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var kg=new ls(cs);var Ql=class extends cs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Yl=class extends ls{};var Fg=new Yl(Ql);var Lt=new re(t=>t.complete());function Db(t){return t&&te(t.schedule)}function bb(t){return t[t.length-1]}function Zl(t){return te(bb(t))?t.pop():void 0}function Hr(t){return Db(bb(t))?t.pop():void 0}function Lg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Tb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Cb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wi(t){return this instanceof Wi?(this.v=t,this):new Wi(t)}function Sb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(R){return new Promise(function(M,F){o.push([y,R,M,F])>1||u(y,R)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Wi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ab(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cb=="function"?Cb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Jl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Xl(t){return te(t?.then)}function ed(t){return te(t[os])}function td(t){return Symbol.asyncIterator&&te(t?.[Symbol.asyncIterator])}function nd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function DO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rd=DO();function id(t){return te(t?.[rd])}function od(t){return Sb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Wi(n.read());if(i)return yield Wi(void 0);yield yield Wi(r)}}finally{n.releaseLock()}})}function sd(t){return te(t?.getReader)}function Ue(t){if(t instanceof re)return t;if(t!=null){if(ed(t))return bO(t);if(Jl(t))return CO(t);if(Xl(t))return TO(t);if(td(t))return Rb(t);if(id(t))return SO(t);if(sd(t))return AO(t)}throw nd(t)}function bO(t){return new re(e=>{let n=t[os]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CO(t){return new re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function TO(t){return new re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zl)})}function SO(t){return new re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Rb(t){return new re(e=>{RO(t,e).catch(n=>e.error(n))})}function AO(t){return Rb(od(t))}function RO(t,e){var n,r,i,o;return Tb(this,void 0,void 0,function*(){try{for(n=Ab(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Vt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function qr(t,e=0){return pe((n,r)=>{n.subscribe(de(r,i=>Vt(r,t,()=>r.next(i),e),()=>Vt(r,t,()=>r.complete(),e),i=>Vt(r,t,()=>r.error(i),e)))})}function zr(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Nb(t,e){return Ue(t).pipe(zr(e),qr(e))}function Mb(t,e){return Ue(t).pipe(zr(e),qr(e))}function Pb(t,e){return new re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function xb(t,e){return new re(n=>{let r;return Vt(n,e,()=>{r=t[rd](),Vt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function ad(t,e){if(!t)throw new Error("Iterable cannot be null");return new re(n=>{Vt(n,e,()=>{let r=t[Symbol.asyncIterator]();Vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ob(t,e){return ad(od(t),e)}function kb(t,e){if(t!=null){if(ed(t))return Nb(t,e);if(Jl(t))return Pb(t,e);if(Xl(t))return Mb(t,e);if(td(t))return ad(t,e);if(id(t))return xb(t,e);if(sd(t))return Ob(t,e)}throw nd(t)}function Ae(t,e){return e?kb(t,e):Ue(t)}function K(...t){let e=Hr(t);return Ae(t,e)}function ds(t,e){let n=te(t)?t:()=>t,r=i=>i.error(n());return new re(e?i=>e.schedule(r,0,i):r)}function Vg(t){return!!t&&(t instanceof re||te(t.lift)&&te(t.subscribe))}var ir=ts(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(t,e){return pe((n,r)=>{let i=0;n.subscribe(de(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:NO}=Array;function MO(t,e){return NO(e)?t(...e):t(e)}function cd(t){return ae(e=>MO(t,e))}var{isArray:PO}=Array,{getPrototypeOf:xO,prototype:OO,keys:kO}=Object;function ud(t){if(t.length===1){let e=t[0];if(PO(e))return{args:e,keys:null};if(FO(e)){let n=kO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function FO(t){return t&&typeof t=="object"&&xO(t)===OO}function ld(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function dd(...t){let e=Hr(t),n=Zl(t),{args:r,keys:i}=ud(t);if(r.length===0)return Ae([],e);let o=new re(LO(r,e,i?s=>ld(i,s):Gt));return n?o.pipe(cd(n)):o}function LO(t,e,n=Gt){return r=>{Fb(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Fb(e,()=>{let l=Ae(t[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Fb(t,e,n){t?Vt(n,t,e):e()}function Lb(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?T(R):u.push(R),T=R=>{o&&e.next(R),l++;let M=!1;Ue(n(R,h++)).subscribe(de(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let F=u.shift();s?Vt(e,s,()=>T(F)):T(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Qe(t,e,n=1/0){return te(e)?Qe((r,i)=>ae((o,s)=>e(r,o,i,s))(Ue(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>Lb(r,i,t,n)))}function Vb(t=1/0){return Qe(Gt,t)}function jb(){return Vb(1)}function hs(...t){return jb()(Ae(t,Hr(t)))}function Ja(t){return new re(e=>{Ue(t()).subscribe(e)})}function jg(...t){let e=Zl(t),{args:n,keys:r}=ud(t),i=new re(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(n[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ld(r,a):a),o.complete())}))}});return e?i.pipe(cd(e)):i}function nn(t,e){return pe((n,r)=>{let i=0;n.subscribe(de(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Gr(t){return pe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(de(n,void 0,void 0,s=>{o=Ue(t(s,Gr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ub(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function fs(t,e){return te(e)?Qe(t,e,1):Qe(t,1)}function Wr(t){return pe((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function or(t){return t<=0?()=>Lt:pe((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function hd(t=VO){return pe((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function VO(){return new ir}function Xa(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function sr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nn((i,o)=>t(i,o,r)):Gt,or(1),n?Wr(e):hd(()=>new ir))}function ps(t){return t<=0?()=>Lt:pe((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ug(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nn((i,o)=>t(i,o,r)):Gt,ps(1),n?Wr(e):hd(()=>new ir))}function Bg(t,e){return pe(Ub(t,e,arguments.length>=2,!0))}function $g(...t){let e=Hr(t);return pe((n,r)=>{(e?hs(t,n,e):hs(t,n)).subscribe(r)})}function jt(t,e){return pe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Ue(t(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function fd(t){return pe((e,n)=>{Ue(t).subscribe(de(n,()=>n.complete(),Ya)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Gt}function Bb(t){let e=se(null);try{return t()}finally{se(e)}}var tm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,n){super(ic(e,n)),this.code=e}};function jO(t){return`NG0${Math.abs(t)}`}function ic(t,e){return`${jO(t)}${e?": "+e:""}`}var Ji=globalThis;function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("")}function qb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function cr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(cr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function nm(t,e){return t?e?`${t} ${e}`:t:e||""}var UO=_e({__forward_ref__:_e});function gn(t){return t.__forward_ref__=gn,t.toString=function(){return cr(this())},t}function ut(t){return rm(t)?t():t}function rm(t){return typeof t=="function"&&t.hasOwnProperty(UO)&&t.__forward_ref__===gn}function zb(t,e){t==null&&im(e,t,null,"!=")}function im(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ur(t){return{providers:t.providers||[],imports:t.imports||[]}}function oc(t){return BO(t,vd)}function om(t){return oc(t)!==null}function BO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function $O(t){let e=t?.[vd]??null;return e||null}function qg(t){return t&&t.hasOwnProperty(gd)?t[gd]:null}var vd=_e({\u0275prov:_e}),gd=_e({\u0275inj:_e}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sm(t){return t&&!!t.\u0275providers}var am=_e({\u0275cmp:_e}),cm=_e({\u0275dir:_e}),um=_e({\u0275pipe:_e}),lm=_e({\u0275mod:_e}),nc=_e({\u0275fac:_e}),Xi=_e({__NG_ELEMENT_ID__:_e}),$b=_e({__NG_ENV_ID__:_e});function _d(t){return typeof t=="string"?t:t==null?"":String(t)}function md(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_d(t)}var dm=_e({ngErrorCode:_e}),Gb=_e({ngErrorMessage:_e}),tc=_e({ngTokenPath:_e});function hm(t,e){return Wb("",-200,e)}function Ed(t,e){throw new V(-201,!1)}function HO(t,e){t[tc]??=[];let n=t[tc],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(zb(e.provide,"Token with multi: true should have a provide property"),r=md(e.provide)):r=md(e),n[0]!==r&&t[tc].unshift(r)}function qO(t,e){let n=t[tc],r=t[dm],i=t[Gb]||t.message;return t.message=GO(i,r,n,e),t}function Wb(t,e,n){let r=new V(e,t);return r[dm]=e,r[Gb]=t,n&&(r[tc]=n),r}function zO(t){return t[dm]}function GO(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return ic(e,`${t}${o}${i}`)}var zg;function Kb(){return zg}function Rt(t){let e=zg;return zg=t,e}function fm(t,e,n){let r=oc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Ed(t,"Injector")}var WO={},Ki=WO,Gg="__NG_DI_FLAG__",Wg=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Qi(n)||0;try{return this.injector.get(e,r&8?null:Ki,r)}catch(i){if(Yo(i))return i;throw i}}};function KO(t,e=0){let n=Pl();if(n===void 0)throw new V(-203,!1);if(n===null)return fm(t,void 0,e);{let r=QO(e),i=n.retrieve(t,r);if(Yo(i)){if(r.optional)return null;throw i}return i}}function G(t,e=0){return(Kb()||KO)(ut(t),e)}function x(t,e){return G(t,Qi(e))}function Qi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function QO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Kg(t){let e=[];for(let n=0;n<t.length;n++){let r=ut(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=YO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(G(i,o))}else e.push(G(r))}return e}function pm(t,e){return t[Gg]=e,t.prototype[Gg]=e,t}function YO(t){return t[Gg]}function Kr(t,e){let n=t.hasOwnProperty(nc);return n?t[nc]:null}function Qb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Yb(t){return t.flat(Number.POSITIVE_INFINITY)}function Id(t,e){t.forEach(n=>Array.isArray(n)?Id(n,e):e(n))}function gm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Zb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Jb(t,e,n){let r=ms(t,e);return r>=0?t[r|1]=n:(r=~r,Zb(t,r,e,n)),r}function wd(t,e){let n=ms(t,e);if(n>=0)return t[n|1]}function ms(t,e){return ZO(t,e,1)}function ZO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Zr={},Wt=[],lr=new U(""),mm=new U("",-1),ym=new U(""),rc=class{get(e,n=Ki){if(n===Ki){let i=Wb("",-201);throw i.name="\u0275NotFound",i}return n}};function vm(t){return t[lm]||null}function Jr(t){return t[am]||null}function _m(t){return t[cm]||null}function Xb(t){return t[um]||null}function Kt(t){return{\u0275providers:t}}function eC(t){return Kt([{provide:lr,multi:!0,useValue:t}])}function tC(...t){return{\u0275providers:Em(!0,t),\u0275fromNgModule:!0}}function Em(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Id(e,s=>{let a=s;yd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nC(i,o),n}function nC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Im(i,o=>{e(o,r)})}}function yd(t,e,n,r){if(t=ut(t),!t)return!1;let i=null,o=qg(t),s=!o&&Jr(t);if(!o&&!s){let u=t.ngModule;if(o=qg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)yd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Id(o.imports,h=>{yd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&nC(l,e)}if(!a){let l=Kr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wt},i),e({provide:ym,useValue:i,multi:!0},i),e({provide:lr,useValue:()=>G(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Im(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Im(t,e){for(let n of t)sm(n)&&(n=n.\u0275providers),Array.isArray(n)?Im(n,e):e(n)}var JO=_e({provide:String,useValue:_e});function rC(t){return t!==null&&typeof t=="object"&&JO in t}function XO(t){return!!(t&&t.useExisting)}function ek(t){return!!(t&&t.useFactory)}function Yi(t){return typeof t=="function"}function iC(t){return!!t.useClass}var ac=new U(""),pd={},Hb={},Hg;function cc(){return Hg===void 0&&(Hg=new rc),Hg}var Ye=class{},Zi=class extends Ye{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Yg(e,s=>this.processProvider(s)),this.records.set(mm,gs(void 0,this)),i.has("environment")&&this.records.set(Ye,gs(void 0,this));let o=this.records.get(ac);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ym,Wt,{self:!0}))}retrieve(e,n){let r=Qi(n)||0;try{return this.get(e,Ki,r)}catch(i){if(Yo(i))return i;throw i}}destroy(){ec(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return ec(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ec(this);let n=Nn(this),r=Rt(void 0),i;try{return e()}finally{Nn(n),Rt(r)}}get(e,n=Ki,r){if(ec(this),e.hasOwnProperty($b))return e[$b](this);let i=Qi(r),o,s=Nn(this),a=Rt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=ok(e)&&oc(e);h&&this.injectableDefInScope(h)?l=gs(Qg(e),pd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?cc():this.parent;return n=i&8&&n===Ki?null:n,u.get(e,n)}catch(u){let l=zO(u);throw l===-200||l===-201?new V(l,null):u}finally{Rt(a),Nn(s)}}resolveInjectorInitializers(){let e=se(null),n=Nn(this),r=Rt(void 0),i;try{let o=this.get(lr,Wt,{self:!0});for(let s of o)s()}finally{Nn(n),Rt(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(cr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ut(e);let n=Yi(e)?e:ut(e&&e.provide),r=nk(e);if(!Yi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=gs(void 0,pd,!0),i.factory=()=>Kg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=se(null);try{if(n.value===Hb)throw hm(cr(e));return n.value===pd&&(n.value=Hb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ik(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qg(t){let e=oc(t),n=e!==null?e.factory:Kr(t);if(n!==null)return n;if(t instanceof U)throw new V(204,!1);if(t instanceof Function)return tk(t);throw new V(204,!1)}function tk(t){if(t.length>0)throw new V(204,!1);let n=$O(t);return n!==null?()=>n.factory(t):()=>new t}function nk(t){if(rC(t))return gs(void 0,t.useValue);{let e=wm(t);return gs(e,pd)}}function wm(t,e,n){let r;if(Yi(t)){let i=ut(t);return Kr(i)||Qg(i)}else if(rC(t))r=()=>ut(t.useValue);else if(ek(t))r=()=>t.useFactory(...Kg(t.deps||[]));else if(XO(t))r=(i,o)=>G(ut(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ut(t&&(t.useClass||t.provide));if(rk(t))r=()=>new i(...Kg(t.deps));else return Kr(i)||Qg(i)}return r}function ec(t){if(t.destroyed)throw new V(205,!1)}function gs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function rk(t){return!!t.deps}function ik(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ok(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Yg(t,e){for(let n of t)Array.isArray(n)?Yg(n,e):n&&sm(n)?Yg(n.\u0275providers,e):e(n)}function Je(t,e){let n;t instanceof Zi?(ec(t),n=t):n=new Wg(t);let r,i=Nn(n),o=Rt(void 0);try{return e()}finally{Nn(i),Rt(o)}}function oC(){return Kb()!==void 0||Pl()!=null}var mn=0,Q=1,X=2,tt=3,rn=4,on=5,uc=6,ys=7,_t=8,eo=9,dr=10,ke=11,vs=12,Dm=13,to=14,sn=15,Xr=16,no=17,Pn=18,lc=19,bm=20,ar=21,Dd=22,dc=23,Qt=24,bd=25,Et=26,sC=1;var ei=7,hc=8,ro=9,Nt=10;function xn(t){return Array.isArray(t)&&typeof t[sC]=="object"}function yn(t){return Array.isArray(t)&&t[sC]===!0}function Cm(t){return(t.flags&4)!==0}function ti(t){return t.componentOffset>-1}function fc(t){return(t.flags&1)===1}function On(t){return!!t.template}function _s(t){return(t[X]&512)!==0}function io(t){return(t[X]&256)===256}var aC="svg",cC="math";function an(t){for(;Array.isArray(t);)t=t[mn];return t}function Tm(t,e){return an(e[t])}function vn(t,e){return an(e[t.index])}function Cd(t,e){return t.data[e]}function Sm(t,e){return t[e]}function Am(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function cn(t,e){let n=e[t];return xn(n)?n:n[mn]}function uC(t){return(t[X]&4)===4}function Td(t){return(t[X]&128)===128}function lC(t){return yn(t[tt])}function pc(t,e){return e==null?null:t[e]}function Rm(t){t[no]=0}function Nm(t){t[X]&1024||(t[X]|=1024,Td(t)&&mc(t))}function dC(t,e){for(;t>0;)e=e[to],t--;return e}function gc(t){return!!(t[X]&9216||t[Qt]?.dirty)}function Sd(t){t[dr].changeDetectionScheduler?.notify(8),t[X]&64&&(t[X]|=1024),gc(t)&&mc(t)}function mc(t){t[dr].changeDetectionScheduler?.notify(0);let e=Qr(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!Td(e)));)e=Qr(e)}function Mm(t,e){if(io(t))throw new V(911,!1);t[ar]===null&&(t[ar]=[]),t[ar].push(e)}function hC(t,e){if(t[ar]===null)return;let n=t[ar].indexOf(e);n!==-1&&t[ar].splice(n,1)}function Qr(t){let e=t[tt];return yn(e)?e[tt]:e}function Pm(t){return t[ys]??=[]}function xm(t){return t.cleanup??=[]}function fC(t,e,n,r){let i=Pm(e);i.push(n),t.firstCreatePass&&xm(t).push(r,i.length-1)}var ce={lFrame:MC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},yc=(function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t})(yc||{}),sk=0,Zg=!1;function pC(){return ce.lFrame.elementDepthCount}function gC(){ce.lFrame.elementDepthCount++}function mC(){ce.lFrame.elementDepthCount--}function Om(){return ce.bindingsEnabled}function yC(){return ce.skipHydrationRootTNode!==null}function vC(t){return ce.skipHydrationRootTNode===t}function _C(){ce.skipHydrationRootTNode=null}function Ee(){return ce.lFrame.lView}function It(){return ce.lFrame.tView}function Mt(t){return ce.lFrame.contextLView=t,t[_t]}function Pt(t){return ce.lFrame.contextLView=null,t}function Ut(){let t=km();for(;t!==null&&t.type===64;)t=t.parent;return t}function km(){return ce.lFrame.currentTNode}function EC(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Es(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function Fm(){return ce.lFrame.isParent}function IC(){ce.lFrame.isParent=!1}function wC(){return ce.lFrame.contextLView}function Lm(t){im("Must never be called in production mode"),sk=t}function Vm(){return Zg}function jm(t){let e=Zg;return Zg=t,e}function DC(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bC(t){return ce.lFrame.bindingIndex=t}function vc(){return ce.lFrame.bindingIndex++}function CC(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function TC(){return ce.lFrame.inI18n}function SC(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ad(e)}function AC(){return ce.lFrame.currentDirectiveIndex}function Ad(t){ce.lFrame.currentDirectiveIndex=t}function RC(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Um(){return ce.lFrame.currentQueryIndex}function Rd(t){ce.lFrame.currentQueryIndex=t}function ak(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[on]:null}function Bm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=ak(o),i===null||(o=o[to],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ce.lFrame=NC();return r.currentTNode=e,r.lView=t,!0}function Nd(t){let e=NC(),n=t[Q];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function NC(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?MC(t):e}function MC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function PC(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var $m=PC;function Md(){let t=PC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xC(t){return(ce.lFrame.contextLView=dC(t,ce.lFrame.contextLView))[_t]}function oo(){return ce.lFrame.selectedIndex}function ni(t){ce.lFrame.selectedIndex=t}function Pd(){let t=ce.lFrame;return Cd(t.tView,t.selectedIndex)}function OC(){return ce.lFrame.currentNamespace}var kC=!0;function xd(){return kC}function Od(t){kC=t}var ck={elements:void 0};function kd(){return ck}function Jg(t,e=null,n=null,r){let i=Hm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Hm(t,e=null,n=null,r,i=new Set){let o=[n||Wt,tC(t)];return r=r||(typeof t=="object"?void 0:cr(t)),new Zi(o,e||cc(),r||null,i)}var Ze=class t{static THROW_IF_NOT_FOUND=Ki;static NULL=new rc;static create(e,n){if(Array.isArray(e))return Jg({name:""},n,e,"");{let r=e.name??"";return Jg({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>G(mm)});static __NG_ELEMENT_ID__=-1},nt=new U(""),hr=(()=>{class t{static __NG_ELEMENT_ID__=uk;static __NG_ENV_ID__=n=>n}return t})(),Xg=class extends hr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return io(this._lView)}onDestroy(e){let n=this._lView;return Mm(n,e),()=>hC(n,e)}};function uk(){return new Xg(Ee())}var Mn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Bt=new U("",{providedIn:"root",factory:()=>{let t=x(Ye),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Mn),e.handleError(n))}}}),FC={provide:lr,useValue:()=>void x(Mn),multi:!0},lk=new U("",{providedIn:"root",factory:()=>{let t=x(nt).defaultView;if(!t)return;let e=x(Bt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),x(hr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function qm(){return Kt([eC(()=>void x(lk))])}function zm(t){return typeof t=="function"&&t[vt]!==void 0}function _n(t,e){let[n,r,i]=Dg(t,e?.equal),o=n,s=o[vt];return o.set=r,o.update=i,o.asReadonly=LC.bind(o),o}function LC(){let t=this[vt];if(t.readonlyFn===void 0){let e=()=>this();e[vt]=t,t.readonlyFn=e}return t.readonlyFn}function Gm(t){return zm(t)&&typeof t.set=="function"}var Yr=class{},_c=new U("",{providedIn:"root",factory:()=>!1});var Wm=new U(""),Km=new U("");var kn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ke(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new re(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Is=(()=>{class t{internalPendingTasks=x(kn);scheduler=x(Yr);errorHandler=x(Bt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ec(...t){}var Qm=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new em})}return t})(),em=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ss(t){return{toString:t}.toString()}var Fd="__parameters__";function _k(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function pT(t,e,n){return Ss(()=>{let r=_k(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Fd)?u[Fd]:Object.defineProperty(u,Fd,{value:[]})[Fd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var $t=pm(pT("Optional"),8);var gT=pm(pT("SkipSelf"),4);function Ek(t){return typeof t=="function"}var $d=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function mT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var po=(()=>{let t=()=>yT;return t.ngInherit=!0,t})();function yT(t){return t.type.prototype.ngOnChanges&&(t.setInput=wk),Ik}function Ik(){let t=_T(this),e=t?.current;if(e){let n=t.previous;if(n===Zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function wk(t,e,n,r,i){let o=this.declaredInputs[r],s=_T(t)||Dk(t,{previous:Zr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new $d(l&&l.currentValue,n,u===Zr),mT(t,e,i,n)}var vT="__ngSimpleChanges__";function _T(t){return t[vT]||null}function Dk(t,e){return t[vT]=e}var VC=[];var Se=function(t,e=null,n){for(let r=0;r<VC.length;r++){let i=VC[r];i(t,e,n)}};function bk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=yT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ET(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Vd(t,e,n){IT(t,e,3,n)}function jd(t,e,n,r){(t[X]&3)===n&&IT(t,e,n,r)}function Ym(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function IT(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[no]+=65536),(a<o||o==-1)&&(Ck(t,n,e,u),t[no]=(t[no]&4294901760)+u+2),u++}function jC(t,e){Se(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Se(5,t,e)}}function Ck(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[X]>>14<t[no]>>16&&(t[X]&3)===e&&(t[X]+=16384,jC(a,o)):jC(a,o)}var Ds=-1,co=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Tk(t){return(t.flags&8)!==0}function Sk(t){return(t.flags&16)!==0}function Ak(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Nk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Rk(t){return t===3||t===4||t===6}function Nk(t){return t.charCodeAt(0)===64}function Dc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?UC(t,n,i,null,e[++r]):UC(t,n,i,null,null))}}return t}function UC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function wT(t){return t!==Ds}function Hd(t){return t&32767}function Mk(t){return t>>16}function qd(t,e){let n=Mk(t),r=e;for(;n>0;)r=r[to],n--;return r}var ay=!0;function zd(t){let e=ay;return ay=t,e}var Pk=256,DT=Pk-1,bT=5,xk=0,Fn={};function Ok(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xi)&&(r=n[Xi]),r==null&&(r=n[Xi]=xk++);let i=r&DT,o=1<<i;e.data[t+(i>>bT)]|=o}function Gd(t,e){let n=CT(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,Zm(r.data,t),Zm(e,null),Zm(r.blueprint,null));let i=xy(t,e),o=t.injectorIndex;if(wT(i)){let s=Hd(i),a=qd(i,e),u=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Zm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function CT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function xy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=NT(i),r===null)return Ds;if(n++,i=i[to],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ds}function cy(t,e,n){Ok(t,e,n)}function TT(t,e,n){if(n&8||t!==void 0)return t;Ed(e,"NodeInjector")}function ST(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[eo],o=Rt(void 0);try{return i?i.get(e,r,n&8):fm(e,r,n&8)}finally{Rt(o)}}return TT(r,e,n)}function AT(t,e,n,r=0,i){if(t!==null){if(e[X]&2048&&!(r&2)){let s=Vk(t,e,n,r,Fn);if(s!==Fn)return s}let o=RT(t,e,n,r,Fn);if(o!==Fn)return o}return ST(e,n,r,i)}function RT(t,e,n,r,i){let o=Fk(n);if(typeof o=="function"){if(!Bm(e,t,r))return r&1?TT(i,n,r):ST(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ed(n);else return s}finally{$m()}}else if(typeof o=="number"){let s=null,a=CT(t,e),u=Ds,l=r&1?e[sn][on]:null;for((a===-1||r&4)&&(u=a===-1?xy(t,e):e[a+8],u===Ds||!$C(r,!1)?a=-1:(s=e[Q],a=Hd(u),e=qd(u,e)));a!==-1;){let h=e[Q];if(BC(o,a,h.data)){let p=kk(a,e,n,s,r,l);if(p!==Fn)return p}u=e[a+8],u!==Ds&&$C(r,e[Q].data[a+8]===l)&&BC(o,a,e)?(s=h,a=Hd(u),e=qd(u,e)):a=-1}}return i}function kk(t,e,n,r,i,o){let s=e[Q],a=s.data[t+8],u=r==null?ti(a)&&ay:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Ud(a,s,n,u,l);return h!==null?bc(e,s,h,a,i):Fn}function Ud(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){let y=s[u];if(y&&On(y)&&y.type===n)return u}return null}function bc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof co){let a=o;if(a.resolving){let y=md(s[n]);throw hm(y)}let u=zd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Rt(a.injectImpl):null,m=Bm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&bk(n,s[n],e)}finally{p!==null&&Rt(p),zd(u),a.resolving=!1,$m()}}return o}function Fk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xi)?t[Xi]:void 0;return typeof e=="number"?e>=0?e&DT:Lk:e}function BC(t,e,n){let r=1<<t;return!!(n[e+(t>>bT)]&r)}function $C(t,e){return!(t&2)&&!(t&1&&e)}var ao=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return AT(this._tNode,this._lView,e,Qi(r),n)}};function Lk(){return new ao(Ut(),Ee())}function pr(t){return Ss(()=>{let e=t.prototype.constructor,n=e[nc]||uy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[nc]||uy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function uy(t){return rm(t)?()=>{let e=uy(ut(t));return e&&e()}:Kr(t)}function Vk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!_s(s);){let a=RT(o,s,n,r|2,Fn);if(a!==Fn)return a;let u=o.parent;if(!u){let l=s[bm];if(l){let h=l.get(n,Fn,r);if(h!==Fn)return h}u=NT(s),s=s[to]}o=u}return i}function NT(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[on]:null}function jk(){return As(Ut(),Ee())}function As(t,e){return new gr(vn(t,e))}var gr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=jk}return t})();function Uk(t){return t instanceof gr?t.nativeElement:t}function Bk(){return this._results[Symbol.iterator]()}var Wd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new je}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Yb(e);(this._changesDetected=!Qb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Bk};function MT(t){return(t.flags&128)===128}var Oy=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Oy||{}),PT=new Map,$k=0;function Hk(){return $k++}function qk(t){PT.set(t[lc],t)}function ly(t){PT.delete(t[lc])}var HC="__ngContext__";function bs(t,e){xn(e)?(t[HC]=e[lc],qk(e)):t[HC]=e}function xT(t){return kT(t[vs])}function OT(t){return kT(t[rn])}function kT(t){for(;t!==null&&!yn(t);)t=t[rn];return t}var dy;function ky(t){dy=t}function FT(){if(dy!==void 0)return dy;if(typeof document<"u")return document;throw new V(210,!1)}var rh=new U("",{providedIn:"root",factory:()=>zk}),zk="ng",ih=new U(""),oi=new U("",{providedIn:"platform",factory:()=>"unknown"});var oh=new U("",{providedIn:"root",factory:()=>FT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gk="h",Wk="b";var LT=!1,VT=new U("",{providedIn:"root",factory:()=>LT});var Kk=(t,e,n,r)=>{};function Qk(t,e,n,r){Kk(t,e,n,r)}function Fy(t){return(t.flags&32)===32}var Yk=()=>null;function jT(t,e,n=!1){return Yk(t,e,n)}function UT(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Rd(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function hy(t,e,n){Rd(0);let r=se(null);try{e(t,n)}finally{se(r)}}function BT(t,e,n){if(Cm(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var fr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(fr||{});var fy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tm})`}};function $T(t){return t instanceof fy?t.changingThisBreaksApplicationSecurity:t}function HT(t){return t instanceof Function?t():t}function Zk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var qT="ng-template";function Jk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Zk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ly(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ly(t){return t.type===4&&t.value!==qT}function Xk(t,e,n){let r=t.type===4&&!n?qT:t.value;return e===r}function e1(t,e,n){let r=4,i=t.attrs,o=i!==null?r1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!En(r)&&!En(u))return!1;if(s&&En(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Xk(t,u,n)||u===""&&e.length===1){if(En(r))return!1;s=!0}}else if(r&8){if(i===null||!Jk(t,i,u,n)){if(En(r))return!1;s=!0}}else{let l=e[++a],h=t1(u,i,Ly(t),n);if(h===-1){if(En(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(En(r))return!1;s=!0}}}}return En(r)||s}function En(t){return(t&1)===0}function t1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return i1(e,t)}function n1(t,e,n=!1){for(let r=0;r<e.length;r++)if(e1(t,e[r],n))return!0;return!1}function r1(t){for(let e=0;e<t.length;e++){let n=t[e];if(Rk(n))return e}return t.length}function i1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function qC(t,e){return t?":not("+e.trim()+")":e}function o1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!En(s)&&(e+=qC(o,i),i=""),r=s,o=o||!En(r);n++}return i!==""&&(e+=qC(o,i)),e}function s1(t){return t.map(o1).join(",")}function a1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!En(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var mr={};function c1(t,e){return t.createText(e)}function u1(t,e,n){t.setValue(e,n)}function zT(t,e,n){return t.createElement(e,n)}function Kd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function GT(t,e,n){t.appendChild(e,n)}function zC(t,e,n,r,i){r!==null?Kd(t,e,n,r,i):GT(t,e,n)}function l1(t,e,n){t.removeChild(null,e,n)}function d1(t,e,n){t.setAttribute(e,"style",n)}function h1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function WT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ak(t,e,r),i!==null&&h1(t,e,i),o!==null&&d1(t,e,o)}function Vy(t,e,n,r,i,o,s,a,u,l,h){let p=Et+r,m=p+i,y=f1(p,m),T=typeof l=="function"?l():l;return y[Q]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function f1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:mr);return n}function p1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Vy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function jy(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[mn]=i,p[X]=r|4|128|8|64|1024,(l!==null||t&&t[X]&2048)&&(p[X]|=2048),Rm(p),p[tt]=p[to]=t,p[_t]=n,p[dr]=s||t&&t[dr],p[ke]=a||t&&t[ke],p[eo]=u||t&&t[eo]||null,p[on]=o,p[lc]=Hk(),p[uc]=h,p[bm]=l,p[sn]=e.type==2?t[sn]:p,p}function g1(t,e,n){let r=vn(e,t),i=p1(n),o=t[dr].rendererFactory,s=Uy(t,jy(t,i,null,KT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function KT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function QT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Uy(t,e){return t[vs]?t[Dm][rn]=e:t[vs]=e,t[Dm]=e,e}function ge(t=1){YT(It(),Ee(),oo()+t,!1)}function YT(t,e,n,r){if(!r)if((e[X]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Vd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&jd(e,o,0,n)}ni(n)}var sh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(sh||{});function py(t,e,n,r){let i=se(null);try{let[o,s,a]=t.inputs[n],u=null;(s&sh.SignalBased)!==0&&(u=e[o][vt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):mT(e,u,o,r)}finally{se(i)}}var Ln=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Ln||{}),m1;function By(t,e){return m1(t,e)}function ws(t,e,n,r,i){if(r!=null){let o,s=!1;yn(r)?o=r:xn(r)&&(s=!0,r=r[mn]);let a=an(r);t===0&&n!==null?i==null?GT(e,n,a):Kd(e,n,a,i||null,!0):t===1&&n!==null?Kd(e,n,a,i||null,!0):t===2?l1(e,a,s):t===3&&e.destroyNode(a),o!=null&&A1(e,t,o,n,i)}}function y1(t,e){ZT(t,e),e[mn]=null,e[on]=null}function v1(t,e,n,r,i,o){r[mn]=i,r[on]=e,ah(t,r,n,1,i,o)}function ZT(t,e){e[dr].changeDetectionScheduler?.notify(9),ah(t,e,e[ke],2,null,null)}function _1(t){let e=t[vs];if(!e)return Jm(t[Q],t);for(;e;){let n=null;if(xn(e))n=e[vs];else{let r=e[Nt];r&&(n=r)}if(!n){for(;e&&!e[rn]&&e!==t;)xn(e)&&Jm(e[Q],e),e=e[tt];e===null&&(e=t),xn(e)&&Jm(e[Q],e),n=e&&e[rn]}e=n}}function $y(t,e){let n=t[ro],r=n.indexOf(e);n.splice(r,1)}function JT(t,e){if(io(e))return;let n=e[ke];n.destroyNode&&ah(t,e,n,3,null,null),_1(e)}function Jm(t,e){if(io(e))return;let n=se(null);try{e[X]&=-129,e[X]|=256,e[Qt]&&Qa(e[Qt]),I1(t,e),E1(t,e),e[Q].type===1&&e[ke].destroy();let r=e[Xr];if(r!==null&&yn(e[tt])){r!==e[tt]&&$y(r,e);let i=e[Pn];i!==null&&i.detachView(t)}ly(e)}finally{se(n)}}function E1(t,e){let n=t.cleanup,r=e[ys];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ys]=null);let i=e[ar];if(i!==null){e[ar]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[dc];if(o!==null){e[dc]=null;for(let s of o)s.destroy()}}function I1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof co)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Se(4,a,u);try{u.call(a)}finally{Se(5,a,u)}}else{Se(4,i,o);try{o.call(i)}finally{Se(5,i,o)}}}}}function w1(t,e,n){return D1(t,e.parent,n)}function D1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[mn];if(ti(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===fr.None||i===fr.Emulated)return null}return vn(r,n)}function b1(t,e,n){return T1(t,e,n)}function C1(t,e,n){return t.type&40?vn(t,n):null}var T1=C1,GC;function Hy(t,e,n,r){let i=w1(t,r,e),o=e[ke],s=r.parent||e[on],a=b1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)zC(o,i,n[u],a,!1);else zC(o,i,n,a,!1);GC!==void 0&&GC(o,r,e,n,i)}function Ic(t,e){if(e!==null){let n=e.type;if(n&3)return vn(e,t);if(n&4)return gy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ic(t,r);{let i=t[e.index];return yn(i)?gy(-1,i):an(i)}}else{if(n&128)return Ic(t,e.next);if(n&32)return By(e,t)()||an(t[e.index]);{let r=XT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Qr(t[sn]);return Ic(i,r)}else return Ic(t,e.next)}}}return null}function XT(t,e){if(e!==null){let r=t[sn][on],i=e.projection;return r.projection[i]}return null}function gy(t,e){let n=Nt+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return Ic(r,i)}return e[ei]}function qy(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&bs(an(a),r),n.flags|=2),!Fy(n))if(u&8)qy(t,e,n.child,r,i,o,!1),ws(e,t,i,a,o);else if(u&32){let l=By(n,r),h;for(;h=l();)ws(e,t,i,h,o);ws(e,t,i,a,o)}else u&16?S1(t,e,r,n,i,o):ws(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ah(t,e,n,r,i,o){qy(n,r,t.firstChild,e,i,o,!1)}function S1(t,e,n,r,i,o){let s=n[sn],u=s[on].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ws(e,t,i,h,o)}else{let l=u,h=s[tt];MT(r)&&(l.flags|=128),qy(t,e,l,h,i,o,!0)}}function A1(t,e,n,r,i){let o=n[ei],s=an(n);o!==s&&ws(e,t,r,o,i);for(let a=Nt;a<n.length;a++){let u=n[a];ah(u[Q],u,t,e,r,o)}}function R1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ln.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ln.Important),t.setStyle(n,r,i,o))}}function eS(t,e,n,r,i){let o=oo(),s=r&2;try{ni(-1),s&&e.length>Et&&YT(t,e,Et,!1),Se(s?2:0,i,n),n(r,i)}finally{ni(o),Se(s?3:1,i,n)}}function zy(t,e,n){F1(t,e,n),(n.flags&64)===64&&L1(t,e,n)}function tS(t,e,n=vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function N1(t,e,n,r){let o=r.get(VT,LT)||n===fr.ShadowDom,s=t.selectRootElement(e,o);return M1(s),s}function M1(t){P1(t)}var P1=()=>null;function x1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nS(t,e,n,r,i,o){let s=e[Q];if(Gy(t,s,e,n,r)){ti(t)&&k1(e,t.index);return}t.type&3&&(n=x1(n)),O1(t,e,n,r,i,o)}function O1(t,e,n,r,i,o){if(t.type&3){let s=vn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function k1(t,e){let n=cn(e,t);n[X]&16||(n[X]|=64)}function F1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ti(n)&&g1(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Gd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=bc(e,t,s,n);if(bs(u,e),o!==null&&B1(e,s-r,u,a,n,o),On(a)){let l=cn(n.index,e);l[_t]=bc(e,t,s,n)}}}function L1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=AC();try{ni(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Ad(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&V1(u,l)}}finally{ni(-1),Ad(s)}}function V1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function rS(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];n1(e,o.selectors,!1)&&(r??=[],On(o)?r.unshift(o):r.push(o))}return r}function j1(t,e,n,r,i,o){let s=vn(t,e);U1(e[ke],s,o,t.value,n,r,i)}function U1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?_d(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function B1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];py(r,n,u,l)}}function $1(t,e,n,r,i){let o=Et+n,s=e[Q],a=i(s,e,t,r,n);e[o]=a,Es(t,!0);let u=t.type===2;return u?(WT(e[ke],a,t),(pC()===0||fc(t))&&bs(a,e),gC()):bs(a,e),xd()&&(!u||!Fy(t))&&Hy(s,e,a,t),t}function H1(t){let e=t;return Fm()?IC():(e=e.parent,Es(e,!1)),e}function q1(t,e){let n=t[eo];if(!n)return;n.get(Bt,null)?.(e)}function Gy(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];py(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];py(h,l,r,i),a=!0}return a}function z1(t,e){let n=cn(e,t),r=n[Q];G1(r,n);let i=n[mn];i!==null&&n[uc]===null&&(n[uc]=jT(i,n[eo])),Se(18),Wy(r,n,n[_t]),Se(19,n[_t])}function G1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wy(t,e,n){Nd(e);try{let r=t.viewQuery;r!==null&&hy(1,r,n);let i=t.template;i!==null&&eS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Pn]?.finishViewCreation(t),t.staticContentQueries&&UT(t,e),t.staticViewQueries&&hy(2,t.viewQuery,n);let o=t.components;o!==null&&W1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,Md()}}function W1(t,e){for(let n=0;n<e.length;n++)z1(t,e[n])}function K1(t,e,n,r){let i=se(null);try{let o=e.tView,a=t[X]&4096?4096:16,u=jy(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Xr]=l;let h=t[Pn];return h!==null&&(u[Pn]=h.createEmbeddedView(o)),Wy(o,u,n),u}finally{se(i)}}function WC(t,e){return!e||e.firstChild===null||MT(t)}var KC=!1,Q1=new U("");function Cc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(an(o)),yn(o)&&iS(o,r);let s=n.type;if(s&8)Cc(t,e,n.child,r);else if(s&32){let a=By(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=XT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Qr(e[sn]);Cc(u[Q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function iS(t,e){for(let n=Nt;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&Cc(r[Q],r,i,e)}t[ei]!==t[mn]&&e.push(t[ei])}function oS(t){if(t[bd]!==null){for(let e of t[bd])e.impl.addSequence(e);t[bd].length=0}}var sS=[];function Y1(t){return t[Qt]??Z1(t)}function Z1(t){let e=sS.pop()??Object.create(X1);return e.lView=t,e}function J1(t){t.lView[Qt]!==t&&(t.lView=null,sS.push(t))}var X1=J(O({},$i),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{mc(t.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function eF(t){let e=t[Qt]??Object.create(tF);return e.lView=t,e}var tF=J(O({},$i),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Qr(t.lView);for(;e&&!aS(e[Q]);)e=Qr(e);e&&Nm(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function aS(t){return t.type!==2}function cS(t){if(t[dc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[dc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[X]&8192)}}var nF=100;function Ky(t,e=0){let r=t[dr].rendererFactory,i=!1;i||r.begin?.();try{rF(t,e)}finally{i||r.end?.()}}function rF(t,e){let n=Vm();try{jm(!0),my(t,e);let r=0;for(;gc(t);){if(r===nF)throw new V(103,!1);r++,my(t,1)}}finally{jm(n)}}function uS(t,e){Lm(e?yc.Exhaustive:yc.OnlyDirtyViews);try{Ky(t)}finally{Lm(yc.Off)}}function iF(t,e,n,r){if(io(e))return;let i=e[X],o=!1,s=!1;Nd(e);let a=!0,u=null,l=null;o||(aS(t)?(l=Y1(e),u=Hi(l)):Vl()===null?(a=!1,l=eF(e),u=Hi(l)):e[Qt]&&(Qa(e[Qt]),e[Qt]=null));try{Rm(e),bC(t.bindingStartIndex),n!==null&&eS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Vd(e,y,null)}else{let y=t.preOrderHooks;y!==null&&jd(e,y,0,null),Ym(e,0)}if(s||oF(e),cS(e),lS(e,0),t.contentQueries!==null&&UT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Vd(e,y)}else{let y=t.contentHooks;y!==null&&jd(e,y,1),Ym(e,1)}aF(t,e);let p=t.components;p!==null&&hS(e,p,0);let m=t.viewQuery;if(m!==null&&hy(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Vd(e,y)}else{let y=t.viewHooks;y!==null&&jd(e,y,2),Ym(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dd]){for(let y of e[Dd])y();e[Dd]=null}o||(oS(e),e[X]&=-73)}catch(h){throw o||mc(e),h}finally{l!==null&&(Jo(l,u),a&&J1(l)),Md()}}function lS(t,e){for(let n=xT(t);n!==null;n=OT(n))for(let r=Nt;r<n.length;r++){let i=n[r];dS(i,e)}}function oF(t){for(let e=xT(t);e!==null;e=OT(e)){if(!(e[X]&2))continue;let n=e[ro];for(let r=0;r<n.length;r++){let i=n[r];Nm(i)}}}function sF(t,e,n){Se(18);let r=cn(e,t);dS(r,n),Se(19,r[_t])}function dS(t,e){Td(t)&&my(t,e)}function my(t,e){let r=t[Q],i=t[X],o=t[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ka(o)),s||=!1,o&&(o.dirty=!1),t[X]&=-9217,s)iF(r,t,r.template,t[_t]);else if(i&8192){let a=se(null);try{cS(t),lS(t,1);let u=r.components;u!==null&&hS(t,u,1),oS(t)}finally{se(a)}}}function hS(t,e,n){for(let r=0;r<e.length;r++)sF(t,e[r],n)}function aF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ni(~i);else{let o=i,s=n[++r],a=n[++r];SC(s,o);let u=e[o];Se(24,u),a(2,u),Se(25,u)}}}finally{ni(-1)}}function Qy(t,e){let n=Vm()?64:1088;for(t[dr].changeDetectionScheduler?.notify(e);t;){t[X]|=n;let r=Qr(t);if(_s(t)&&!r)return t;t=r}return null}function fS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cF(t,e,n,r=!0){let i=e[Q];if(uF(i,e,t,n),r){let s=gy(n,t),a=e[ke],u=a.parentNode(t[ei]);u!==null&&v1(i,t[on],a,e,u,s)}let o=e[uc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function yy(t,e){if(t.length<=Nt)return;let n=Nt+e,r=t[n];if(r){let i=r[Xr];i!==null&&i!==t&&$y(i,r),e>0&&(t[n-1][rn]=r[rn]);let o=sc(t,Nt+e);y1(r[Q],r);let s=o[Pn];s!==null&&s.detachView(o[Q]),r[tt]=null,r[rn]=null,r[X]&=-129}return r}function uF(t,e,n,r){let i=Nt+r,o=n.length;r>0&&(n[i-1][rn]=e),r<o-Nt?(e[rn]=n[i],gm(n,Nt+r,e)):(n.push(e),e[rn]=null),e[tt]=n;let s=e[Xr];s!==null&&n!==s&&pS(s,e);let a=e[Pn];a!==null&&a.insertView(t),Sd(e),e[X]|=128}function pS(t,e){let n=t[ro],r=e[tt];if(xn(r))t[X]|=2;else{let i=r[tt][sn];e[sn]!==i&&(t[X]|=2)}n===null?t[ro]=[e]:n.push(e)}var ri=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Q];return Cc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[_t]}set context(e){this._lView[_t]=e}get destroyed(){return io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(yn(e)){let n=e[hc],r=n?n.indexOf(this):-1;r>-1&&(yy(e,r),sc(n,r))}this._attachedToViewContainer=!1}JT(this._lView[Q],this._lView)}onDestroy(e){Mm(this._lView,e)}markForCheck(){Qy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Sd(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,Ky(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_s(this._lView),n=this._lView[Xr];n!==null&&!e&&$y(n,this._lView),ZT(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let n=_s(this._lView),r=this._lView[Xr];r!==null&&!n&&pS(r,this._lView),Sd(this._lView)}};var ii=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=lF;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=K1(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new ri(o)}}return t})();function lF(){return Yy(Ut(),Ee())}function Yy(t,e){return t.type&4?new ii(e,t,As(t,e)):null}function Zy(t,e,n,r,i){let o=t.data[e];if(o===null)o=dF(t,e,n,r,i),TC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=EC();o.injectorIndex=s===null?-1:s.injectorIndex}return Es(o,!0),o}function dF(t,e,n,r,i){let o=km(),s=Fm(),a=s?o:o&&o.parent,u=t.data[e]=fF(t,a,n,e,r,i);return hF(t,u,o,s),u}function hF(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function fF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var pK=new RegExp(`^(\\d+)*(${Wk}|${Gk})*(.*)`);var pF=()=>null;function QC(t,e){return pF(t,e)}var gS=class{},ch=class{},vy=class{resolveComponentFactory(e){throw new V(917,!1)}},Ac=class{static NULL=new vy},uo=class{},Rc=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>gF()}return t})();function gF(){let t=Ee(),e=Ut(),n=cn(e.index,t);return(xn(n)?n:t)[ke]}var mS=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var Bd={},_y=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Bd,r);return i!==Bd||n===Bd?i:this.parentInjector.get(e,n,r)}};function YC(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=nm(i,a);else if(o==2){let u=a,l=e[++s];r=nm(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ie(t,e=0){let n=Ee();if(n===null)return G(t,e);let r=Ut();return AT(r,n,ut(t),e)}function yS(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}vF(t,e,n,a,o,u,l)}o!==null&&r!==null&&mF(n,r,o)}function mF(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function yF(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function vF(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&On(y)&&(u=!0,yF(t,n,m)),cy(Gd(n,e),t,y.type)}bF(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=QT(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=Dc(n.mergedAttrs,y.hostAttrs),EF(t,n,e,p,y),DF(p,y,i),s!==null&&s.has(y)){let[R,M]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,M+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}_F(t,n,o)}function _F(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))ZC(0,e,i,r),ZC(1,e,i,r),XC(e,r,!1);else{let o=n.get(i);JC(0,e,o,r),JC(1,e,o,r),XC(e,r,!0)}}}function ZC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),vS(e,o)}}function JC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),vS(e,s)}}function vS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function XC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Ly(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function EF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Kr(i.type,!0)),s=new co(o,On(i),ie,null);t.blueprint[r]=s,n[r]=s,IF(t,e,r,QT(t,n,i.hostVars,mr),i)}function IF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;wF(s)!=a&&s.push(a),s.push(n,r,o)}}function wF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function DF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;On(e)&&(n[""]=t)}}function bF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function _S(t,e,n,r,i,o,s,a){let u=e[Q],l=u.consts,h=pc(l,s),p=Zy(u,t,n,r,h);return o&&yS(u,e,p,pc(l,a),i),p.mergedAttrs=Dc(p.mergedAttrs,p.attrs),p.attrs!==null&&YC(p,p.attrs,!1),p.mergedAttrs!==null&&YC(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function ES(t,e){ET(t,e),Cm(e)&&t.queries.elementEnd(e)}function Jy(t){return wS(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function IS(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function wS(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function CF(t,e,n){return t[e]=n}function lo(t,e,n){if(n===mr)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function TF(t,e,n,r){let i=lo(t,e,n);return lo(t,e+1,r)||i}function Xm(t,e,n){return function r(i){let o=ti(t)?cn(t.index,e):e;Qy(o,5);let s=e[_t],a=eT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=eT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function eT(t,e,n,r){let i=se(null);try{return Se(6,e,n),n(r)!==!1}catch(o){return q1(t,o),!1}finally{Se(7,e,n),se(i)}}function SF(t,e,n,r,i,o,s,a){let u=fc(t),l=!1,h=null;if(!r&&u&&(h=AF(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=vn(t,n),m=r?r(p):p;Qk(n,m,o,a);let y=i.listen(m,o,a),T=r?R=>r(an(R[t.index])):t.index;DS(T,e,n,o,a,y,!1)}return l}function AF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ys],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function DS(t,e,n,r,i,o,s){let a=e.firstCreatePass?xm(e):null,u=Pm(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function tT(t,e,n,r,i,o){let s=e[n],a=e[Q],l=a.data[n].outputs[r],p=s[l].subscribe(o);DS(t.index,a,e,i,o,p,!0)}var Ey=Symbol("BINDING");var Qd=class extends Ac{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Jr(e);return new Cs(n,this.ngModule)}};function RF(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&sh.SignalBased)!==0};return i&&(o.transform=i),o})}function NF(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function MF(t,e,n){let r=e instanceof Ye?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new _y(n,r):n}function PF(t){let e=t.get(uo,null);if(e===null)throw new V(407,!1);let n=t.get(mS,null),r=t.get(Yr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function xF(t,e){let n=bS(t);return zT(e,n,n==="svg"?aC:n==="math"?cC:null)}function bS(t){return(t.selectors[0][0]||"div").toLowerCase()}var Cs=class extends ch{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=RF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=NF(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=s1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Se(22);let a=se(null);try{let u=this.componentDef,l=OF(r,u,s,o),h=MF(u,i||this.ngModule,e),p=PF(h),m=p.rendererFactory.createRenderer(null,u),y=r?N1(m,r,u.encapsulation,h):xF(u,m),T=s?.some(nT)||o?.some(F=>typeof F!="function"&&F.bindings.some(nT)),R=jy(null,l,null,512|KT(u),null,null,p,m,h,null,jT(y,h,!0));R[Et]=y,Nd(R);let M=null;try{let F=_S(Et,R,2,"#host",()=>l.directiveRegistry,!0,0);y&&(WT(m,y,F),bs(y,R)),zy(l,R,F),BT(l,F,R),ES(l,F),n!==void 0&&FF(F,this.ngContentSelectors,n),M=cn(F.index,R),R[_t]=M[_t],Wy(l,R,null)}catch(F){throw M!==null&&ly(M),ly(R),F}finally{Se(23),Md()}return new Yd(this.componentType,R,!!T)}finally{se(a)}}};function OF(t,e,n,r){let i=t?["ng-version","20.2.1"]:a1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Ey].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Ey].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=_m(p);u.push(m)}return Vy(0,null,kF(o,s),1,a,u,null,null,null,[i],null)}function kF(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function nT(t){let e=t[Ey].kind;return e==="input"||e==="twoWay"}var Yd=class extends gS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Cd(n[Q],Et),this.location=As(this._tNode,n),this.instance=cn(this._tNode.index,n)[_t],this.hostView=this.changeDetectorRef=new ri(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Gy(r,i[Q],i,e,n);this.previousInputValues.set(e,n);let s=cn(r.index,i);Qy(s,1)}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var yr=(()=>{class t{static __NG_ELEMENT_ID__=LF}return t})();function LF(){let t=Ut();return TS(t,Ee())}var VF=yr,CS=class extends VF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return As(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=xy(this._hostTNode,this._hostLView);if(wT(e)){let n=qd(e,this._hostLView),r=Hd(e),i=n[Q].data[r+8];return new ao(i,n)}else return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=rT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Nt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=QC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,WC(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Ek(e),l;if(u)l=n;else{let M=n||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let h=u?e:new Cs(Jr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(u?p:this.parentInjector).get(Ye,null);F&&(o=F)}let m=Jr(h.componentType??{}),y=QC(this._lContainer,m?.id??null),T=y?.firstChild??null,R=h.create(p,i,T,o,s,a);return this.insertImpl(R.hostView,l,WC(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(lC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[tt],l=new CS(u,u[on],u[tt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return cF(s,i,o,r),e.attachToViewContainerRef(),gm(ey(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=rT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=yy(this._lContainer,n);r&&(sc(ey(this._lContainer),n),JT(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=yy(this._lContainer,n);return r&&sc(ey(this._lContainer),n)!=null?new ri(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function rT(t){return t[hc]}function ey(t){return t[hc]||(t[hc]=[])}function TS(t,e){let n,r=e[t.index];return yn(r)?n=r:(n=fS(r,e,null,t),e[t.index]=n,Uy(e,n)),UF(n,e,t,r),new CS(n,t,e)}function jF(t,e){let n=t[ke],r=n.createComment(""),i=vn(e,t),o=n.parentNode(i);return Kd(n,o,r,n.nextSibling(i),!1),r}var UF=HF,BF=()=>!1;function $F(t,e,n){return BF(t,e,n)}function HF(t,e,n,r){if(t[ei])return;let i;n.type&8?i=an(r):i=jF(e,n),t[ei]=i}var Iy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},wy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Xy(e,n).matches!==null&&this.queries[n].setDirty()}},Dy=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=ZF(e):this.predicate=e}},by=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Cy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,qF(n,o)),this.matchTNodeWithReadOption(e,n,Ud(n,e,o,!1,!1))}else r===ii?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ud(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===gr||i===yr||i===ii&&n.type&4)this.addMatch(n.index,-2);else{let o=Ud(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function qF(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function zF(t,e){return t.type&11?As(t,e):t.type&4?Yy(t,e):null}function GF(t,e,n,r){return n===-1?zF(e,t):n===-2?WF(t,e,r):bc(t,t[Q],n,e)}function WF(t,e,n){if(n===gr)return As(e,t);if(n===ii)return Yy(e,t);if(n===yr)return TS(e,t)}function SS(t,e,n,r){let i=e[Pn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(GF(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Ty(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=SS(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Nt;p<h.length;p++){let m=h[p];m[Xr]===m[tt]&&Ty(m[Q],m,l,r)}if(h[ro]!==null){let p=h[ro];for(let m=0;m<p.length;m++){let y=p[m];Ty(y[Q],y,l,r)}}}}}return r}function KF(t,e){return t[Pn].queries[e].queryList}function QF(t,e,n){let r=new Wd((n&4)===4);return fC(t,e,r,r.destroy),(e[Pn]??=new wy).queries.push(new Iy(r))-1}function YF(t,e,n){let r=It();return r.firstCreatePass&&(JF(r,new Dy(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),QF(r,Ee(),e)}function ZF(t){return t.split(",").map(e=>e.trim())}function JF(t,e,n){t.queries===null&&(t.queries=new by),t.queries.track(new Cy(e,n))}function Xy(t,e){return t.queries.getByIndex(e)}function XF(t,e){let n=t[Q],r=Xy(n,e);return r.crossesNgTemplate?Ty(n,t,e,[]):SS(n,t,r,e)}var iT=new Set;function uh(t){iT.has(t)||(iT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ho=class{},lh=class{};var Zd=class extends ho{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Qd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=vm(e);this._bootstrapComponents=HT(o.bootstrap),this._r3Injector=Hm(e,n,[{provide:ho,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver},...r],cr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jd=class extends lh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Zd(this.moduleType,e,[])}};var Tc=class extends ho{injector;componentFactoryResolver=new Qd(this);instance=null;constructor(e){super();let n=new Zi([...e.providers,{provide:ho,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver}],e.parent||cc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nc(t,e,n=null){return new Tc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var eL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Em(!1,n.type),i=r.length>0?Nc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(G(Ye))})}return t})();function In(t){return Ss(()=>{let e=AS(t),n=J(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Oy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(eL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fr.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&uh("NgStandalone"),RS(n);let r=t.dependencies;return n.directiveDefs=oT(r,tL),n.pipeDefs=oT(r,Xb),n.id=iL(n),n})}function tL(t){return Jr(t)||_m(t)}function si(t){return Ss(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nL(t,e){if(t==null)return Zr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=sh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function rL(t){if(t==null)return Zr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Xe(t){return Ss(()=>{let e=AS(t);return RS(e),e})}function ev(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function AS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Zr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:nL(t.inputs,e),outputs:rL(t.outputs),debugInfo:null}}function RS(t){t.features?.forEach(e=>e(t))}function oT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function iL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function oL(t){return Object.getPrototypeOf(t.prototype).constructor}function un(t){let e=oL(t.type),n=!0,r=[t];for(;e;){let i;if(On(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ty(t.inputs),s.declaredInputs=ty(t.declaredInputs),s.outputs=ty(t.outputs);let a=i.hostBindings;a&&lL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&cL(t,u),l&&uL(t,l),sL(t,i),qb(t.outputs,i.outputs),On(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===un&&(n=!1)}}e=Object.getPrototypeOf(e)}aL(r)}function sL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function aL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Dc(i.hostAttrs,n=Dc(n,i.hostAttrs))}}function ty(t){return t===Zr?{}:t===Wt?[]:t}function cL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function uL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function lL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function dL(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Dc(t.mergedAttrs,t.attrs);let h=t.tView=Vy(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Es(t,!1);let u=fL(n,e,t,r);xd()&&Hy(n,e,u,t),bs(u,e);let l=fS(u,e,u,t);e[r+Et]=l,Uy(e,l),$F(l,t,e)}function hL(t,e,n,r,i,o,s,a,u,l,h){let p=n+Et,m;return e.firstCreatePass?(m=Zy(e,p,4,s||null,a||null),Om()&&yS(e,t,m,pc(e.consts,l),rS),ET(e,m)):m=e.data[p],dL(m,t,e,n,r,i,o,u),fc(m)&&zy(e,t,m),l!=null&&tS(t,m,h),m}function Vn(t,e,n,r,i,o,s,a){let u=Ee(),l=It(),h=pc(l.consts,o);return hL(u,l,t,e,n,r,i,h,void 0,s,a),Vn}var fL=pL;function pL(t,e,n,r){return Od(!0),e[ke].createComment("")}var tv=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(tv||{}),Mc=new U(""),NS=!1,Sy=class extends je{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,oC()&&(this.destroyRef=x(hr,{optional:!0})??void 0,this.pendingTasks=x(kn,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Oe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Be=Sy;function MS(t){let e,n;function r(){t=Ec;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function sT(t){return queueMicrotask(()=>t()),()=>{t=Ec}}var nv="isAngularZone",Xd=nv+"_ID",gL=0,De=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Be(!1);onMicrotaskEmpty=new Be(!1);onStable=new Be(!1);onError=new Be(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=NS}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(nv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,mL,Ec,Ec);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},mL={};function rv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){MS(()=>{t.callbackScheduled=!1,Ay(t),t.isCheckStableRunning=!0,rv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Ay(t)}function vL(t){let e=()=>{yL(t)},n=gL++;t._inner=t._inner.fork({name:"angular",properties:{[nv]:!0,[Xd]:n,[Xd+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_L(u))return r.invokeTask(o,s,a,u);try{return aT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),cT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return aT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!EL(u)&&e(),cT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ay(t),rv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ay(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function aT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cT(t){t._nesting--,rv(t)}var eh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Be;onMicrotaskEmpty=new Be;onStable=new Be;onError=new Be;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function _L(t){return PS(t,"__ignore_ng_zone__")}function EL(t){return PS(t,"__scheduler_tick__")}function PS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var xS=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var iv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var ov=new U("");function ai(t){return!!t&&typeof t.then=="function"}function sv(t){return!!t&&typeof t.subscribe=="function"}var OS=new U("");var av=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(OS,{optional:!0})??[];injector=x(Ze);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Je(this.injector,i);if(ai(o))n.push(o);else if(sv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dh=new U("");function kS(){wg(()=>{let t="";throw new V(600,t)})}function FS(t){return t.isBoundToModule}var IL=10;var ci=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(Bt);afterRenderManager=x(xS);zonelessEnabled=x(_c);rootEffectScheduler=x(Qm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new je;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(kn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(n=>!n))}constructor(){x(Mc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(Ye);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ze.NULL){return this._injector.get(De).run(()=>{Se(10);let s=n instanceof ch;if(!this._injector.get(av).done){let T="";throw new V(405,T)}let u;s?u=n:u=this._injector.get(Ac).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=FS(u)?void 0:this._injector.get(ho),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(ov,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),wc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Se(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Se(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(tv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Se(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(uo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<IL;)Se(14),this.synchronizeOnce(),Se(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!gc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Ky(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>gc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;wc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(dh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Pc(t,e,n,r){let i=Ee(),o=vc();if(lo(i,o,e)){let s=It(),a=Pd();j1(a,i,t,e,n,r)}return Pc}var cv=new U("",{providedIn:"root",factory:()=>!1}),uv=new U("",{providedIn:"root",factory:()=>wL}),wL=4e3;var IK=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function lt(t,e,n){let r=Ee(),i=vc();if(lo(r,i,e)){let o=It(),s=Pd();nS(s,r,t,e,r[ke],n)}return lt}function uT(t,e,n,r,i){Gy(e,t,n,i?"class":"style",r)}function q(t,e,n,r){let i=Ee(),o=i[Q],s=t+Et,a=o.firstCreatePass?_S(s,i,2,e,rS,Om(),n,r):o.data[s];if($1(a,i,t,e,DL),fc(a)){let u=i[Q];zy(u,i,a),BT(u,a,i)}return r!=null&&tS(i,a),q}function Y(){let t=It(),e=Ut(),n=H1(e);return t.firstCreatePass&&ES(t,n),vC(n)&&_C(),mC(),n.classesWithoutHost!=null&&Tk(n)&&uT(t,n,Ee(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Sk(n)&&uT(t,n,Ee(),n.stylesWithoutHost,!1),Y}function ui(t,e,n,r){return q(t,e,n,r),Y(),ui}var DL=(t,e,n,r,i)=>(Od(!0),zT(e[ke],r,OC()));function go(){return Ee()}var so=void 0;function bL(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var CL=["en",[["a","p"],["AM","PM"],so],[["AM","PM"],so,so],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],so,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],so,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",so,"{1} 'at' {0}",so],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bL],ny={};function Yt(t){let e=TL(t),n=lT(e);if(n)return n;let r=e.split("-")[0];if(n=lT(r),n)return n;if(r==="en")return CL;throw new V(701,!1)}function lT(t){return t in ny||(ny[t]=Ji.ng&&Ji.ng.common&&Ji.ng.common.locales&&Ji.ng.common.locales[t]),ny[t]}var Ve=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(Ve||{});function TL(t){return t.toLowerCase().replace(/_/g,"-")}var xc="en-US";var SL=xc;function LS(t){typeof t=="string"&&(SL=t.toLowerCase().replace(/_/g,"-"))}function Zt(t,e,n){let r=Ee(),i=It(),o=Ut();return VS(i,r,r[ke],o,t,e,n),Zt}function VS(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Xm(r,e,o),SF(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Xm(r,e,o),tT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Xm(r,e,o),tT(r,e,p,i,i,u)}}function mo(t=1){return xC(t)}function lv(t,e,n){YF(t,e,n)}function dv(t){let e=Ee(),n=It(),r=Um();Rd(r+1);let i=Xy(n,r);if(t.dirty&&uC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=XF(e,r);t.reset(o,Uk),t.notifyOnChanges()}return!0}return!1}function hv(){return KF(Ee(),Um())}function Oc(t){let e=wC();return Sm(e,Et+t)}function Ld(t,e){return t<<17|e<<2}function fo(t){return t>>17&32767}function AL(t){return(t&2)==2}function RL(t,e){return t&131071|e<<17}function Ry(t){return t|2}function Ts(t){return(t&131068)>>2}function ry(t,e){return t&-131069|e<<2}function NL(t){return(t&1)===1}function Ny(t){return t|1}function ML(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=fo(s),u=Ts(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ms(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=fo(t[a+1]);t[r+1]=Ld(m,a),m!==0&&(t[m+1]=ry(t[m+1],r)),t[a+1]=RL(t[a+1],r)}else t[r+1]=Ld(a,0),a!==0&&(t[a+1]=ry(t[a+1],r)),a=r;else t[r+1]=Ld(u,0),a===0?a=r:t[u+1]=ry(t[u+1],r),u=r;l&&(t[r+1]=Ry(t[r+1])),dT(t,h,r,!0),dT(t,h,r,!1),PL(e,h,t,r,o),s=Ld(a,u),o?e.classBindings=s:e.styleBindings=s}function PL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ms(o,e)>=0&&(n[r+1]=Ny(n[r+1]))}function dT(t,e,n,r){let i=t[n+1],o=e===null,s=r?fo(i):Ts(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];xL(u,e)&&(a=!0,t[s+1]=r?Ny(l):Ry(l)),s=r?fo(l):Ts(l)}a&&(t[n+1]=r?Ry(i):Ny(i))}function xL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ms(t,e)>=0:!1}function kc(t,e){return OL(t,e,null,!0),kc}function OL(t,e,n,r){let i=Ee(),o=It(),s=CC(2);if(o.firstUpdatePass&&FL(o,t,s,r),e!==mr&&lo(i,s,e)){let a=o.data[oo()];BL(o,a,i,i[ke],t,i[s+1]=$L(e,n),r,s)}}function kL(t,e){return e>=t.expandoStartIndex}function FL(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[oo()],s=kL(t,n);HL(o,r)&&e===null&&!s&&(e=!1),e=LL(i,o,e,r),ML(i,o,e,n,s,r)}}function LL(t,e,n,r){let i=RC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=iy(null,t,e,n,r),n=Sc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=iy(i,t,e,n,r),o===null){let u=VL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=iy(null,t,e,u[1],r),u=Sc(u,e.attrs,r),jL(t,e,r,u))}else o=UL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function VL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ts(r)!==0)return t[fo(r)]}function jL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[fo(i)]=r}function UL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Sc(r,s,n)}return Sc(r,e.attrs,n)}function iy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Sc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Sc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Jb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function BL(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=NL(l)?hT(u,e,n,i,Ts(l),s):void 0;if(!th(h)){th(o)||AL(l)&&(o=hT(u,null,n,i,a,s));let p=Tm(oo(),n);R1(r,s,p,i,o)}}function hT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===mr&&(m=p?Wt:void 0);let y=p?wd(m,r):h===r?m:void 0;if(l&&!th(y)&&(y=wd(u,r)),th(y)&&(a=y,s))return a;let T=t[i+1];i=s?fo(T):Ts(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=wd(u,r))}return a}function th(t){return t!==void 0}function $L(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=cr($T(t)))),t}function HL(t,e){return(t.flags&(e?8:16))!==0}function he(t,e=""){let n=Ee(),r=It(),i=t+Et,o=r.firstCreatePass?Zy(r,i,1,e,null):r.data[i],s=qL(r,n,o,e,t);n[i]=s,xd()&&Hy(r,n,s,o),Es(o,!1)}var qL=(t,e,n,r,i)=>(Od(!0),c1(e[ke],r));function zL(t,e,n,r=""){return lo(t,vc(),n)?e+_d(n)+r:mr}function Rs(t){return wt("",t),Rs}function wt(t,e,n){let r=Ee(),i=zL(r,t,e,n);return i!==mr&&GL(r,oo(),i),wt}function GL(t,e,n){let r=Tm(e,t);u1(t[ke],r,n)}function vr(t,e,n){Gm(e)&&(e=e());let r=Ee(),i=vc();if(lo(r,i,e)){let o=It(),s=Pd();nS(s,r,t,e,r[ke],n)}return vr}function li(t,e){let n=Gm(t);return n&&t.set(e),n}function _r(t,e){let n=Ee(),r=It(),i=Ut();return VS(r,n,n[ke],i,t,e),_r}function WL(t,e,n){let r=It();if(r.firstCreatePass){let i=On(t);My(n,r.data,r.blueprint,i,!0),My(e,r.data,r.blueprint,i,!1)}}function My(t,e,n,r,i){if(t=ut(t),Array.isArray(t))for(let o=0;o<t.length;o++)My(t[o],e,n,r,i);else{let o=It(),s=Ee(),a=Ut(),u=Yi(t)?t:ut(t.provide),l=wm(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Yi(t)||!t.multi){let y=new co(l,i,ie,null),T=sy(u,e,i?h:h+m,p);T===-1?(cy(Gd(a,s),o,u),oy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=sy(u,e,h+m,p),T=sy(u,e,h,h+m),R=y>=0&&n[y],M=T>=0&&n[T];if(i&&!M||!i&&!R){cy(Gd(a,s),o,u);let F=YL(i?QL:KL,n.length,i,r,l,t);!i&&M&&(n[T].providerFactory=F),oy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),s.push(F)}else{let F=jS(n[i?T:y],l,!i&&r);oy(o,t,y>-1?y:T,F)}!i&&r&&M&&n[T].componentProviders++}}}function oy(t,e,n,r){let i=Yi(e),o=iC(e);if(i||o){let u=(o?ut(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function jS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function sy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function KL(t,e,n,r,i){return Py(this.multi,[])}function QL(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=bc(r,r[Q],this.providerFactory.index,i);s=u.slice(0,a),Py(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Py(o,s);return s}function Py(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function YL(t,e,n,r,i,o){let s=new co(t,n,ie,null);return s.multi=[],s.index=e,s.componentProviders=0,jS(s,i,r&&!n),s}function di(t,e=[]){return n=>{n.providersResolver=(r,i)=>WL(r,i?i(t):t,e)}}function ZL(t,e){let n=t[e];return n===mr?void 0:n}function JL(t,e,n,r,i,o,s){let a=e+n;return TF(t,a,i,o)?CF(t,a+2,s?r.call(s,i,o):r(i,o)):ZL(t,a+2)}function fv(t,e){let n=It(),r,i=t+Et;n.firstCreatePass?(r=XL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Kr(r.type,!0)),s,a=Rt(ie);try{let u=zd(!1),l=o();return zd(u),Am(n,Ee(),i,l),l}finally{Rt(a)}}function XL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function pv(t,e,n,r){let i=t+Et,o=Ee(),s=Sm(o,i);return eV(o,i)?JL(o,DC(),e,s.transform,n,r,s):s.transform(n,r)}function eV(t,e){return t[Q].data[e].pure}var nh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},gv=(()=>{class t{compileModuleSync(n){return new Jd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=vm(n),o=HT(i.declarations).reduce((s,a)=>{let u=Jr(a);return u&&s.push(new Cs(u)),s},[]);return new nh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var tV=(()=>{class t{zone=x(De);changeDetectionScheduler=x(Yr);applicationRef=x(ci);applicationErrorHandler=x(Bt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),US=new U("",{factory:()=>!1});function mv({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new De(J(O({},vv()),{scheduleInRootZone:n})),[{provide:De,useFactory:t},{provide:lr,multi:!0,useFactory:()=>{let r=x(tV,{optional:!0});return()=>r.initialize()}},{provide:lr,multi:!0,useFactory:()=>{let r=x(nV);return()=>{r.initialize()}}},e===!0?{provide:Wm,useValue:!0}:[],{provide:Km,useValue:n??NS},{provide:Bt,useFactory:()=>{let r=x(De),i=x(Ye),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Mn),o.handleError(s))})}}}]}function yv(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=mv({ngZoneFactory:()=>{let i=vv(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&uh("NgZone_CoalesceEvent"),new De(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Kt([{provide:US,useValue:!0},{provide:_c,useValue:!1},r])}function vv(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var nV=(()=>{class t{subscription=new Oe;initialized=!1;zone=x(De);pendingTasks=x(kn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var BS=(()=>{class t{applicationErrorHandler=x(Bt);appRef=x(ci);taskService=x(kn);ngZone=x(De);zonelessEnabled=x(_c);tracing=x(Mc,{optional:!0});disableScheduling=x(Wm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(Km,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof eh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?sT:MS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,sT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rV(){return typeof $localize<"u"&&$localize.locale||xc}var Fc=new U("",{providedIn:"root",factory:()=>x(Fc,{optional:!0,skipSelf:!0})||rV()});function dt(t){return Bb(t)}function Ns(t,e){return Bl(t,e?.equal)}var $S=class{[vt];constructor(e){this[vt]=e}destroy(){this[vt].destroy()}};var WS=Symbol("InputSignalNode#UNSET"),yV=J(O({},$l),{transformFn:void 0,applyValueToInputSignal(t,e){es(t,e)}});function KS(t,e){let n=Object.create(yV);n.value=t,n.transformFn=e?.transform;function r(){if(Zo(n),n.value===WS){let i=null;throw new V(-950,i)}return n.value}return r[vt]=n,r}var vV=new U("");vV.__NG_ELEMENT_ID__=t=>{let e=Ut();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new V(204,!1)};function HS(t,e){return KS(t,e)}function _V(t){return KS(WS,t)}var QS=(HS.required=_V,HS);var Ms=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},YS=new Ms("20.2.1");var _v=new U(""),EV=new U("");function Lc(t){return!t.moduleRef}function IV(t){let e=Lc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(De);return n.run(()=>{Lc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Bt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Lc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(_v);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(_v);s.add(o),t.moduleRef.onDestroy(()=>{wc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return DV(r,n,()=>{let o=e.get(kn),s=o.add(),a=e.get(av);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Fc,xc);if(LS(u||xc),!e.get(EV,!0))return Lc(t)?e.get(ci):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Lc(t)){let h=e.get(ci);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return wV?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var wV;function DV(t,e,n){try{let r=n();return ai(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var hh=null;function bV(t=[],e){return Ze.create({name:e,providers:[{provide:ac,useValue:"platform"},{provide:_v,useValue:new Set([()=>hh=null])},...t]})}function CV(t=[]){if(hh)return hh;let e=bV(t);return hh=e,kS(),TV(e),e}function TV(t){let e=t.get(ih,null);Je(t,()=>{e?.forEach(n=>n())})}function bv(){return!1}var Vc=(()=>{class t{static __NG_ELEMENT_ID__=SV}return t})();function SV(t){return AV(Ut(),Ee(),(t&16)===16)}function AV(t,e,n){if(ti(t)&&!n){let r=cn(t.index,e);return new ri(r,r)}else if(t.type&175){let r=e[sn];return new ri(r,e)}return null}var Ev=class{constructor(){}supports(e){return Jy(e)}create(e){return new Iv(e)}},RV=(t,e)=>e,Iv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||RV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<qS(r,i,o)?n:r,a=qS(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;h<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Jy(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,IS(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new wv(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new fh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},wv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Dv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},fh=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Dv,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qS(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function zS(){return new Cv([new Ev])}var Cv=(()=>{class t{factories;static \u0275prov=B({token:t,providedIn:"root",factory:zS});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||zS()),deps:[[t,new gT,new $t]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new V(901,!1)}}return t})();function ZS(t){Se(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=CV(r),o=[mv({}),{provide:Yr,useExisting:BS},FC,...n||[]],s=new Tc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return IV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Se(9)}}function jc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var e0=null;function ln(){return e0}function Tv(t){e0??=t}var Uc=class{},Sv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(t0),providedIn:"platform"})}return t})();var t0=(()=>{class t extends Sv{_location;_history;_doc=x(nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ln().getBaseHref(this._doc)}onPopState(n){let r=ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function n0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function JS(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function hi(t){return t&&t[0]!=="?"?`?${t}`:t}var gh=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(i0),providedIn:"root"})}return t})(),r0=new U(""),i0=(()=>{class t extends gh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return n0(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+hi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+hi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+hi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(G(Sv),G(r0,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ps=(()=>{class t{_subject=new je;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=PV(JS(XS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+hi(r))}normalize(n){return t.stripTrailingSlash(MV(this._basePath,XS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=hi;static joinWithSlash=n0;static stripTrailingSlash=JS;static \u0275fac=function(r){return new(r||t)(G(gh))};static \u0275prov=B({token:t,factory:()=>NV(),providedIn:"root"})}return t})();function NV(){return new Ps(G(gh))}function MV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function XS(t){return t.replace(/\/index.html$/,"")}function PV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Dt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Dt||{}),be=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(be||{}),Ht=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Ht||{}),Ir={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function c0(t){return Yt(t)[Ve.LocaleId]}function u0(t,e,n){let r=Yt(t),i=[r[Ve.DayPeriodsFormat],r[Ve.DayPeriodsStandalone]],o=dn(i,e);return dn(o,n)}function l0(t,e,n){let r=Yt(t),i=[r[Ve.DaysFormat],r[Ve.DaysStandalone]],o=dn(i,e);return dn(o,n)}function d0(t,e,n){let r=Yt(t),i=[r[Ve.MonthsFormat],r[Ve.MonthsStandalone]],o=dn(i,e);return dn(o,n)}function h0(t,e){let r=Yt(t)[Ve.Eras];return dn(r,e)}function Bc(t,e){let n=Yt(t);return dn(n[Ve.DateFormat],e)}function $c(t,e){let n=Yt(t);return dn(n[Ve.TimeFormat],e)}function Hc(t,e){let r=Yt(t)[Ve.DateTimeFormat];return dn(r,e)}function qc(t,e){let n=Yt(t),r=n[Ve.NumberSymbols][e];if(typeof r>"u"){if(e===Ir.CurrencyDecimal)return n[Ve.NumberSymbols][Ir.Decimal];if(e===Ir.CurrencyGroup)return n[Ve.NumberSymbols][Ir.Group]}return r}function f0(t){if(!t[Ve.ExtraData])throw new V(2303,!1)}function p0(t){let e=Yt(t);return f0(e),(e[Ve.ExtraData][2]||[]).map(r=>typeof r=="string"?Av(r):[Av(r[0]),Av(r[1])])}function g0(t,e,n){let r=Yt(t);f0(r);let i=[r[Ve.ExtraData][0],r[Ve.ExtraData][1]],o=dn(i,e)||[];return dn(o,n)||[]}function dn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new V(2304,!1)}function Av(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var xV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,mh={},OV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function m0(t,e,n,r){let i=HV(t);e=Er(n,e)||e;let s=[],a;for(;e;)if(a=OV.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=v0(r,u),i=$V(i,r));let l="";return s.forEach(h=>{let p=UV(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ih(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Er(t,e){let n=c0(t);if(mh[n]??={},mh[n][e])return mh[n][e];let r="";switch(e){case"shortDate":r=Bc(t,Ht.Short);break;case"mediumDate":r=Bc(t,Ht.Medium);break;case"longDate":r=Bc(t,Ht.Long);break;case"fullDate":r=Bc(t,Ht.Full);break;case"shortTime":r=$c(t,Ht.Short);break;case"mediumTime":r=$c(t,Ht.Medium);break;case"longTime":r=$c(t,Ht.Long);break;case"fullTime":r=$c(t,Ht.Full);break;case"short":let i=Er(t,"shortTime"),o=Er(t,"shortDate");r=yh(Hc(t,Ht.Short),[i,o]);break;case"medium":let s=Er(t,"mediumTime"),a=Er(t,"mediumDate");r=yh(Hc(t,Ht.Medium),[s,a]);break;case"long":let u=Er(t,"longTime"),l=Er(t,"longDate");r=yh(Hc(t,Ht.Long),[u,l]);break;case"full":let h=Er(t,"fullTime"),p=Er(t,"fullDate");r=yh(Hc(t,Ht.Full),[h,p]);break}return r&&(mh[n][e]=r),r}function yh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function wn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function kV(t,e){return wn(t,3).substring(0,e)}function $e(t,e,n=0,r=!1,i=!1){return function(o,s){let a=FV(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return kV(a,e);let u=qc(s,Ir.MinusSign);return wn(a,e,u,r,i)}}function FV(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new V(2301,!1)}}function Re(t,e,n=Dt.Format,r=!1){return function(i,o){return LV(i,o,t,e,n,r)}}function LV(t,e,n,r,i,o){switch(n){case 2:return d0(e,i,r)[t.getMonth()];case 1:return l0(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=p0(e),h=g0(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,T]=m,R=s>=y.hours&&a>=y.minutes,M=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(R&&M)return!0}else if(R||M)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return u0(e,i,r)[s<12?0:1];case 3:return h0(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new V(2302,!1)}}function vh(t){return function(e,n,r){let i=-1*r,o=qc(n,Ir.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+wn(s,2,o)+wn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+wn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+wn(s,2,o)+":"+wn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+wn(s,2,o)+":"+wn(Math.abs(i%60),2,o);default:throw new V(2302,!1)}}}var VV=0,Eh=4;function jV(t){let e=Ih(t,VV,1).getDay();return Ih(t,0,1+(e<=Eh?Eh:Eh+7)-e)}function y0(t){let e=t.getDay(),n=e===0?-3:Eh-e;return Ih(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Rv(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=y0(n),s=jV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return wn(i,t,qc(r,Ir.MinusSign))}}function _h(t,e=!1){return function(n,r){let o=y0(n).getFullYear();return wn(o,t,qc(r,Ir.MinusSign),e)}}var Nv={};function UV(t){if(Nv[t])return Nv[t];let e;switch(t){case"G":case"GG":case"GGG":e=Re(3,be.Abbreviated);break;case"GGGG":e=Re(3,be.Wide);break;case"GGGGG":e=Re(3,be.Narrow);break;case"y":e=$e(0,1,0,!1,!0);break;case"yy":e=$e(0,2,0,!0,!0);break;case"yyy":e=$e(0,3,0,!1,!0);break;case"yyyy":e=$e(0,4,0,!1,!0);break;case"Y":e=_h(1);break;case"YY":e=_h(2,!0);break;case"YYY":e=_h(3);break;case"YYYY":e=_h(4);break;case"M":case"L":e=$e(1,1,1);break;case"MM":case"LL":e=$e(1,2,1);break;case"MMM":e=Re(2,be.Abbreviated);break;case"MMMM":e=Re(2,be.Wide);break;case"MMMMM":e=Re(2,be.Narrow);break;case"LLL":e=Re(2,be.Abbreviated,Dt.Standalone);break;case"LLLL":e=Re(2,be.Wide,Dt.Standalone);break;case"LLLLL":e=Re(2,be.Narrow,Dt.Standalone);break;case"w":e=Rv(1);break;case"ww":e=Rv(2);break;case"W":e=Rv(1,!0);break;case"d":e=$e(2,1);break;case"dd":e=$e(2,2);break;case"c":case"cc":e=$e(7,1);break;case"ccc":e=Re(1,be.Abbreviated,Dt.Standalone);break;case"cccc":e=Re(1,be.Wide,Dt.Standalone);break;case"ccccc":e=Re(1,be.Narrow,Dt.Standalone);break;case"cccccc":e=Re(1,be.Short,Dt.Standalone);break;case"E":case"EE":case"EEE":e=Re(1,be.Abbreviated);break;case"EEEE":e=Re(1,be.Wide);break;case"EEEEE":e=Re(1,be.Narrow);break;case"EEEEEE":e=Re(1,be.Short);break;case"a":case"aa":case"aaa":e=Re(0,be.Abbreviated);break;case"aaaa":e=Re(0,be.Wide);break;case"aaaaa":e=Re(0,be.Narrow);break;case"b":case"bb":case"bbb":e=Re(0,be.Abbreviated,Dt.Standalone,!0);break;case"bbbb":e=Re(0,be.Wide,Dt.Standalone,!0);break;case"bbbbb":e=Re(0,be.Narrow,Dt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Re(0,be.Abbreviated,Dt.Format,!0);break;case"BBBB":e=Re(0,be.Wide,Dt.Format,!0);break;case"BBBBB":e=Re(0,be.Narrow,Dt.Format,!0);break;case"h":e=$e(3,1,-12);break;case"hh":e=$e(3,2,-12);break;case"H":e=$e(3,1);break;case"HH":e=$e(3,2);break;case"m":e=$e(4,1);break;case"mm":e=$e(4,2);break;case"s":e=$e(5,1);break;case"ss":e=$e(5,2);break;case"S":e=$e(6,1);break;case"SS":e=$e(6,2);break;case"SSS":e=$e(6,3);break;case"Z":case"ZZ":case"ZZZ":e=vh(0);break;case"ZZZZZ":e=vh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=vh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=vh(2);break;default:return null}return Nv[t]=e,e}function v0(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function BV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function $V(t,e,n){let i=t.getTimezoneOffset(),o=v0(e,i);return BV(t,-1*(o-i))}function HV(t){if(o0(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Ih(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(xV))return qV(r)}let e=new Date(t);if(!o0(e))throw new V(2302,!1);return e}function qV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function o0(t){return t instanceof Date&&!isNaN(t.valueOf())}var wh=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bh=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new wh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),s0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);s0(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ie(yr),ie(ii),ie(Cv))};static \u0275dir=Xe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function s0(t,e){t.context.$implicit=e.item}var yo=(()=>{class t{_viewContainer;_context=new Dh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){a0(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){a0(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ie(yr),ie(ii))};static \u0275dir=Xe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Dh=class{$implicit=null;ngIf=null};function a0(t,e){if(t&&!t.createEmbeddedView)throw new V(2020,!1)}function zV(t,e){return new V(2100,!1)}var GV="mediumDate",_0=new U(""),E0=new U(""),Mv=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??GV,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return m0(n,s,o||this.locale,a)}catch(s){throw zV(t,s.message)}}static \u0275fac=function(r){return new(r||t)(ie(Fc,16),ie(_0,24),ie(E0,24))};static \u0275pipe=ev({name:"date",type:t,pure:!0})}return t})();var jn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=si({type:t});static \u0275inj=ur({})}return t})();function Pv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var zc=class{};var I0="browser";var Th=new U(""),Vv=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(G(Th),G(De))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Gc=class{_doc;constructor(e){this._doc=e}manager},Ov="ng-app-id";function w0(t){for(let e of t)e.remove()}function D0(t,e){let n=e.createElement("style");return n.textContent=t,n}function WV(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ov}="${e}"],link[${Ov}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ov),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Fv(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var jv=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,WV(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,D0);r?.forEach(i=>this.addUsage(i,this.external,Fv))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(w0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])w0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,D0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Fv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(G(nt),G(rh),G(oh,8),G(oi))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),kv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Uv=/%COMP%/g;var C0="%COMP%",KV=`_nghost-${C0}`,QV=`_ngcontent-${C0}`,YV=!0,ZV=new U("",{providedIn:"root",factory:()=>YV});function JV(t){return QV.replace(Uv,t)}function XV(t){return KV.replace(Uv,t)}function T0(t,e){return e.map(n=>n.replace(Uv,t))}var Bv=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(n,r,i,o,s,a,u,l=null,h,p,m=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.animationDisabled=h,this.maxAnimationTimeout=p,this.tracingService=m,this.platformIsServer=!1,this.defaultRenderer=new Wc(n,s,u,this.platformIsServer,this.tracingService,this.registry=kd(),this.maxAnimationTimeout)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Ch?i.applyToHost(n):i instanceof Kc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case fr.Emulated:o=new Ch(u,l,r,this.appId,h,s,a,p,m,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case fr.ShadowDom:return new Lv(u,l,n,r,s,a,this.nonce,p,m,this.registry,this.maxAnimationTimeout);default:o=new Kc(u,l,r,h,s,a,p,m,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(G(Vv),G(jv),G(rh),G(ZV),G(nt),G(oi),G(De),G(oh),G(cv),G(uv),G(Mc,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Wc=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o,s,a){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o,this.registry=s,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(kv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(b0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(b0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){let{elements:r}=this.registry;if(r){r.animate(n,()=>n.remove(),this.maxAnimationTimeout);return}n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=kv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=kv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ln.DashCase|Ln.Important)?e.style.setProperty(n,r,i&Ln.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ln.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=ln().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function b0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Lv=class extends Wc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l,h,p){super(e,o,s,u,l,h,p),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=i.styles;m=T0(i.id,m);for(let T of m){let R=document.createElement("style");a&&R.setAttribute("nonce",a),R.textContent=T,this.shadowRoot.appendChild(R)}let y=i.getExternalStyles?.();if(y)for(let T of y){let R=Fv(T,o);a&&R.setAttribute("nonce",a),this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kc=class extends Wc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(e,n,r,i,o,s,a,u,l,h,p,m){super(e,o,s,a,u,l,p),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this._animationDisabled=h;let y=r.styles;this.styles=m?T0(m,y):y,this.styleUrls=r.getExternalStyles?.(m)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},Ch=class extends Kc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l,h,p,m){let y=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h,p,m,y),this.contentAttr=JV(y),this.hostAttr=XV(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Sh=class t extends Uc{supportsDOMEvents=!0;static makeCurrent(){Tv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=e2();return n==null?null:t2(n)}resetBaseElement(){Qc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pv(document.cookie,e)}},Qc=null;function e2(){return Qc=Qc||document.head.querySelector("base"),Qc?Qc.getAttribute("href"):null}function t2(t){return new URL(t,document.baseURI).pathname}var n2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),A0=(()=>{class t extends Gc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(G(nt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),S0=["alt","control","meta","shift"],r2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},R0=(()=>{class t extends Gc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ln().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),S0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=r2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),S0.forEach(s=>{if(s!==i){let a=i2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(G(nt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function $v(t,e){let n=O({rootComponent:t},o2(e));return ZS(n)}function o2(t){return{appProviders:[...l2,...t?.providers??[]],platformProviders:u2}}function s2(){Sh.makeCurrent()}function a2(){return new Mn}function c2(){return ky(document),document}var u2=[{provide:oi,useValue:I0},{provide:ih,useValue:s2,multi:!0},{provide:nt,useFactory:c2}];var l2=[{provide:ac,useValue:"root"},{provide:Mn,useFactory:a2},{provide:Th,useClass:A0,multi:!0,deps:[nt]},{provide:Th,useClass:R0,multi:!0,deps:[nt]},Bv,jv,Vv,{provide:uo,useExisting:Bv},{provide:zc,useClass:n2},[]];var N0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(G(nt))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oe="primary",lu=Symbol("RouteTitle"),Wv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Eo(t){return new Wv(t)}function V0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function h2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Un(t[n],e[n]))return!1;return!0}function Un(t,e){let n=t?Kv(t):void 0,r=e?Kv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!j0(t[i],e[i]))return!1;return!0}function Kv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function j0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function U0(t){return t.length>0?t[t.length-1]:null}function br(t){return Vg(t)?t:ai(t)?Ae(Promise.resolve(t)):K(t)}var f2={exact:$0,subset:H0},B0={exact:p2,subset:g2,ignored:()=>!0};function M0(t,e,n){return f2[n.paths](t.root,e.root,n.matrixParams)&&B0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function p2(t,e){return Un(t,e)}function $0(t,e,n){if(!vo(t.segments,e.segments)||!Nh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!$0(t.children[r],e.children[r],n))return!1;return!0}function g2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>j0(t[n],e[n]))}function H0(t,e,n){return q0(t,e,e.segments,n)}function q0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!vo(i,n)||e.hasChildren()||!Nh(i,n,r))}else if(t.segments.length===n.length){if(!vo(t.segments,n)||!Nh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!H0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!vo(t.segments,i)||!Nh(t.segments,i,r)||!t.children[oe]?!1:q0(t.children[oe],e,o,r)}}function Nh(t,e,n){return e.every((r,i)=>B0[n](t[i].parameters,r.parameters))}var $n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Eo(this.queryParams),this._queryParamMap}toString(){return v2.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mh(this)}},fi=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Eo(this.parameters),this._parameterMap}toString(){return G0(this)}};function m2(t,e){return vo(t,e)&&t.every((n,r)=>Un(n.parameters,e[r].parameters))}function vo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function y2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var du=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new Io,providedIn:"root"})}return t})(),Io=class{parse(e){let n=new Yv(e);return new $n(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yc(e.root,!0)}`,r=I2(e.queryParams),i=typeof e.fragment=="string"?`#${_2(e.fragment)}`:"";return`${n}${r}${i}`}},v2=new Io;function Mh(t){return t.segments.map(e=>G0(e)).join("/")}function Yc(t,e){if(!t.hasChildren())return Mh(t);if(e){let n=t.children[oe]?Yc(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Yc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=y2(t,(r,i)=>i===oe?[Yc(t.children[oe],!1)]:[`${i}:${Yc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${Mh(t)}/${n[0]}`:`${Mh(t)}/(${n.join("//")})`}}function z0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ah(t){return z0(t).replace(/%3B/gi,";")}function _2(t){return encodeURI(t)}function Qv(t){return z0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ph(t){return decodeURIComponent(t)}function P0(t){return Ph(t.replace(/\+/g,"%20"))}function G0(t){return`${Qv(t.path)}${E2(t.parameters)}`}function E2(t){return Object.entries(t).map(([e,n])=>`;${Qv(e)}=${Qv(n)}`).join("")}function I2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ah(n)}=${Ah(i)}`).join("&"):`${Ah(n)}=${Ah(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var w2=/^[^\/()?;#]+/;function Hv(t){let e=t.match(w2);return e?e[0]:""}var D2=/^[^\/()?;=#]+/;function b2(t){let e=t.match(D2);return e?e[0]:""}var C2=/^[^=?&#]+/;function T2(t){let e=t.match(C2);return e?e[0]:""}var S2=/^[^&#]+/;function A2(t){let e=t.match(S2);return e?e[0]:""}var Yv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new ve(e,n)),r}parseSegment(){let e=Hv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new fi(Ph(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=b2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Hv(this.remaining);i&&(r=i,this.capture(r))}e[Ph(n)]=Ph(r)}parseQueryParam(e){let n=T2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=A2(this.remaining);s&&(r=s,this.capture(r))}let i=P0(n),o=P0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[oe]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function W0(t){return t.segments.length>0?new ve([],{[oe]:t}):t}function K0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=K0(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return R2(n)}function R2(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new ve(t.segments.concat(e.segments),e.children)}return t}function Ls(t){return t instanceof $n}function Q0(t,e,n=null,r=null){let i=Y0(t);return Z0(i,e,n,r)}function Y0(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=W0(r);return e??i}function Z0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return qv(i,i,i,n,r);let o=N2(e);if(o.toRoot())return qv(i,i,new ve([],{}),n,r);let s=M2(o,i,t),a=s.processChildren?Jc(s.segmentGroup,s.index,o.commands):X0(s.segmentGroup,s.index,o.commands);return qv(i,s.segmentGroup,a,n,r)}function xh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function tu(t){return typeof t=="object"&&t!=null&&t.outlets}function qv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=J0(t,e,n);let a=W0(K0(s));return new $n(a,o,i)}function J0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=J0(o,e,n)}),new ve(t.segments,r)}var Oh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&xh(r[0]))throw new V(4003,!1);let i=r.find(tu);if(i&&i!==U0(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function N2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Oh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Oh(n,e,r)}var ks=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function M2(t,e,n){if(t.isAbsolute)return new ks(e,!0,0);if(!n)return new ks(e,!1,NaN);if(n.parent===null)return new ks(n,!0,0);let r=xh(t.commands[0])?0:1,i=n.segments.length-1+r;return P2(n,i,t.numberOfDoubleDots)}function P2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new ks(r,!1,i-o)}function x2(t){return tu(t[0])?t[0].outlets:{[oe]:t}}function X0(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return Jc(t,e,n);let r=O2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[oe]=new ve(t.segments.slice(r.pathIndex),t.children),Jc(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?Zv(t,e,n):r.match?Jc(t,0,i):Zv(t,e,n)}function Jc(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=x2(n),i={};if(Object.keys(r).some(o=>o!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let o=Jc(t.children[oe],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=X0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function O2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(tu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!O0(u,l,s))return o;r+=2}else{if(!O0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(tu(o)){let u=k2(o.outlets);return new ve(r,u)}if(i===0&&xh(n[0])){let u=t.segments[e];r.push(new fi(u.path,x0(n[0]))),i++;continue}let s=tu(o)?o.outlets[oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&xh(a)?(r.push(new fi(s,x0(a))),i+=2):(r.push(new fi(s,{})),i++)}return new ve(r,{})}function k2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Zv(new ve([],{}),0,r))}),e}function x0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function O0(t,e,n){return t==n.path&&Un(e,n.parameters)}var Xc="imperative",rt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(rt||{}),Xt=class{id;url;constructor(e,n){this.id=e,this.url=n}},wo=class extends Xt{type=rt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wr=class extends Xt{urlAfterRedirects;type=rt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ot||{}),nu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(nu||{}),Bn=class extends Xt{reason;code;type=rt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dr=class extends Xt{reason;code;type=rt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Vs=class extends Xt{error;target;type=rt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ru=class extends Xt{urlAfterRedirects;state;type=rt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kh=class extends Xt{urlAfterRedirects;state;type=rt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fh=class extends Xt{urlAfterRedirects;state;shouldActivate;type=rt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lh=class extends Xt{urlAfterRedirects;state;type=rt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vh=class extends Xt{urlAfterRedirects;state;type=rt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jh=class{route;type=rt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uh=class{route;type=rt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bh=class{snapshot;type=rt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$h=class{snapshot;type=rt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hh=class{snapshot;type=rt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qh=class{snapshot;type=rt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var iu=class{},js=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function F2(t){return!(t instanceof iu)&&!(t instanceof js)}function L2(t,e){return t.providers&&!t._injector&&(t._injector=Nc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Dn(t){return t.outlet||oe}function V2(t,e){let n=t.filter(r=>Dn(r)===e);return n.push(...t.filter(r=>Dn(r)!==e)),n}function $s(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var zh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return $s(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Hs(this.rootInjector)}},Hs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new zh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(G(Ye))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Jv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Jv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Xv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xv(e,this._root).map(n=>n.value)}};function Jv(t,e){if(t===e.value)return e;for(let n of e.children){let r=Jv(t,n);if(r)return r}return null}function Xv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Xv(t,n);if(r.length)return r.unshift(e),r}return[]}var Jt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Os(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ou=class extends Gh{snapshot;constructor(e,n){super(e),this.snapshot=n,a_(this,e)}toString(){return this.snapshot.toString()}};function eA(t){let e=j2(t),n=new Ke([new fi("",{})]),r=new Ke({}),i=new Ke({}),o=new Ke({}),s=new Ke(""),a=new pi(n,r,o,s,i,oe,t,e.root);return a.snapshot=e.root,new ou(new Jt(a,[]),e)}function j2(t){let e={},n={},r={},o=new _o([],e,r,"",n,oe,t,null,{});return new su("",new Jt(o,[]))}var pi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ae(l=>l[lu]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Eo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Eo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&nA(i)&&(r.resolve[lu]=i.title),r}var _o=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[lu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Eo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Eo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},su=class extends Gh{url;constructor(e,n){super(n),this.url=e,a_(this,n)}toString(){return tA(this._root)}};function a_(t,e){e.value._routerState=t,e.children.forEach(n=>a_(t,n))}function tA(t){let e=t.children.length>0?` { ${t.children.map(tA).join(", ")} } `:"";return`${t.value}${e}`}function zv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Un(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Un(e.params,n.params)||t.paramsSubject.next(n.params),h2(e.url,n.url)||t.urlSubject.next(n.url),Un(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function e_(t,e){let n=Un(t.params,e.params)&&m2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||e_(t.parent,e.parent))}function nA(t){return typeof t.title=="string"||t.title===null}var rA=new U(""),hu=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Be;deactivateEvents=new Be;attachEvents=new Be;detachEvents=new Be;routerOutletData=QS(void 0);parentContexts=x(Hs);location=x(yr);changeDetector=x(Vc);inputBinder=x(Zh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new t_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Xe({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[po]})}return t})(),t_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===pi?this.route:e===Hs?this.childContexts:e===rA?this.outletData:this.parent.get(e,n)}},Zh=new U("");var c_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=In({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ui(0,"router-outlet")},dependencies:[hu],encapsulation:2})}return t})();function u_(t){let e=t.children&&t.children.map(u_),n=e?J(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=c_),n}function U2(t,e,n){let r=au(t,e._root,n?n._root:void 0);return new ou(r,e)}function au(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=B2(t,e,n);return new Jt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>au(t,a)),s}}let r=$2(e.value),i=e.children.map(o=>au(t,o));return new Jt(r,i)}}function B2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return au(t,r,i);return au(t,r)})}function $2(t){return new pi(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var Us=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},iA="ngNavigationCancelingError";function Kh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oA(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function oA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[iA]=!0,n.cancellationCode=e,n}function H2(t){return sA(t)&&Ls(t.url)}function sA(t){return!!t&&t[iA]}var q2=(t,e,n,r)=>ae(i=>(new n_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),n_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),zv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Os(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Os(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $h(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(zv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Qh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function z2(t,e,n){let r=t._root,i=e?e._root:null;return Zc(r,i,n,[r.value])}function G2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!om(t)?t:e.get(t):r}function Zc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Os(e);return t.children.forEach(s=>{W2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>eu(a,n.getContext(s),i)),i}function W2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=K2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Qh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zc(t,e,a?a.children:null,r,i):Zc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fs(a.outlet.component,s))}else s&&eu(e,a,i),i.canActivateChecks.push(new Qh(r)),o.component?Zc(t,null,a?a.children:null,r,i):Zc(t,null,n,r,i);return i}function K2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!vo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vo(t.url,e.url)||!Un(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!e_(t,e)||!Un(t.queryParams,e.queryParams);case"paramsChange":default:return!e_(t,e)}}function eu(t,e,n){let r=Os(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?eu(s,e.children.getContext(o),n):eu(s,null,n):eu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Fs(e.outlet.component,i)):n.canDeactivateChecks.push(new Fs(null,i)):n.canDeactivateChecks.push(new Fs(null,i))}function fu(t){return typeof t=="function"}function Q2(t){return typeof t=="boolean"}function Y2(t){return t&&fu(t.canLoad)}function Z2(t){return t&&fu(t.canActivate)}function J2(t){return t&&fu(t.canActivateChild)}function X2(t){return t&&fu(t.canDeactivate)}function ej(t){return t&&fu(t.canMatch)}function aA(t){return t instanceof ir||t?.name==="EmptyError"}var Rh=Symbol("INITIAL_VALUE");function Bs(){return jt(t=>dd(t.map(e=>e.pipe(or(1),$g(Rh)))).pipe(ae(e=>{for(let n of e)if(n!==!0){if(n===Rh)return Rh;if(n===!1||tj(n))return n}return!0}),nn(e=>e!==Rh),or(1)))}function tj(t){return Ls(t)||t instanceof Us}function nj(t,e){return Qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?K(J(O({},n),{guardsResult:!0})):rj(s,r,i,t).pipe(Qe(a=>a&&Q2(a)?ij(r,o,t,e):K(a)),ae(a=>J(O({},n),{guardsResult:a})))})}function rj(t,e,n,r){return Ae(t).pipe(Qe(i=>uj(i.component,i.route,n,e,r)),sr(i=>i!==!0,!0))}function ij(t,e,n,r){return Ae(e).pipe(fs(i=>hs(sj(i.route.parent,r),oj(i.route,r),cj(t,i.path,n),aj(t,i.route,n))),sr(i=>i!==!0,!0))}function oj(t,e){return t!==null&&e&&e(new Hh(t)),K(!0)}function sj(t,e){return t!==null&&e&&e(new Bh(t)),K(!0)}function aj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>Ja(()=>{let s=$s(e)??n,a=qs(o,s),u=Z2(a)?a.canActivate(e,t):Je(s,()=>a(e,t));return br(u).pipe(sr())}));return K(i).pipe(Bs())}function cj(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>G2(s)).filter(s=>s!==null).map(s=>Ja(()=>{let a=s.guards.map(u=>{let l=$s(s.node)??n,h=qs(u,l),p=J2(h)?h.canActivateChild(r,t):Je(l,()=>h(r,t));return br(p).pipe(sr())});return K(a).pipe(Bs())}));return K(o).pipe(Bs())}function uj(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(a=>{let u=$s(e)??i,l=qs(a,u),h=X2(l)?l.canDeactivate(t,e,n,r):Je(u,()=>l(t,e,n,r));return br(h).pipe(sr())});return K(s).pipe(Bs())}function lj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let a=qs(s,t),u=Y2(a)?a.canLoad(e,n):Je(t,()=>a(e,n));return br(u)});return K(o).pipe(Bs(),cA(r))}function cA(t){return Ng(et(e=>{if(typeof e!="boolean")throw Kh(t,e)}),ae(e=>e===!0))}function dj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let a=qs(s,t),u=ej(a)?a.canMatch(e,n):Je(t,()=>a(e,n));return br(u)});return K(o).pipe(Bs(),cA(r))}var cu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},uu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function xs(t){return ds(new cu(t))}function hj(t){return ds(new V(4e3,!1))}function fj(t){return ds(oA(!1,Ot.GuardRejected))}var r_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[oe])return hj(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,o){return pj(n,i,o).pipe(ae(s=>{if(s instanceof $n)throw new uu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new uu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new $n(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function pj(t,e,n){if(typeof t=="string")return K(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return br(Je(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var i_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gj(t,e,n,r,i){let o=uA(t,e,n);return o.matched?(r=L2(e,r),dj(r,e,n,i).pipe(ae(s=>s===!0?o:O({},i_)))):K(o)}function uA(t,e,n){if(e.path==="**")return mj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},i_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||V0)(n,t,e);if(!i)return O({},i_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mj(t){return{matched:!0,parameters:t.length>0?U0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function k0(t,e,n,r){return n.length>0&&_j(t,n,r)?{segmentGroup:new ve(e,vj(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&Ej(t,n,r)?{segmentGroup:new ve(t.segments,yj(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function yj(t,e,n,r){let i={};for(let o of n)if(Jh(t,e,o)&&!r[Dn(o)]){let s=new ve([],{});i[Dn(o)]=s}return O(O({},r),i)}function vj(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&Dn(r)!==oe){let i=new ve([],{});n[Dn(r)]=i}return n}function _j(t,e,n){return n.some(r=>Jh(t,e,r)&&Dn(r)!==oe)}function Ej(t,e,n){return n.some(r=>Jh(t,e,r))}function Jh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Ij(t,e,n){return e.length===0&&!t.children[n]}var o_=class{};function wj(t,e,n,r,i,o,s="emptyOnly"){return new s_(t,e,n,r,i,s,o).recognize()}var Dj=31,s_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new r_(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=k0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:n,rootSnapshot:r})=>{let i=new Jt(r,n),o=new su("",i),s=Q0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new _o([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(ae(r=>({children:r,rootSnapshot:n})),Gr(r=>{if(r instanceof uu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof cu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ae(s=>s instanceof Jt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(fs(s=>{let a=r.children[s],u=V2(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Bg((s,a)=>(s.push(...a),s)),Wr(null),Ug(),Qe(s=>{if(s===null)return xs(r);let a=lA(s);return bj(a),K(a)}))}processSegment(e,n,r,i,o,s,a){return Ae(n).pipe(fs(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Gr(l=>{if(l instanceof cu)return K(null);throw l}))),sr(u=>!!u),Gr(u=>{if(aA(u))return Ij(r,i,o)?K(new o_):xs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Dn(r)!==s&&(s===oe||!Jh(i,o,r))?xs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):xs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=uA(n,i,o);if(!u)return xs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Dj&&(this.allowRedirects=!1));let y=new _o(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,F0(i),Dn(i),i.component??i._loadedComponent??null,i,L0(i)),T=Wh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(jt(M=>this.applyRedirects.lineralizeSegments(i,M)),Qe(M=>this.processSegment(e,r,n,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=gj(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(jt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(jt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,T=new _o(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,F0(r),Dn(r),r.component??r._loadedComponent??null,r,L0(r)),R=Wh(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(R.params),T.data=Object.freeze(R.data);let{segmentGroup:M,slicedSegments:F}=k0(n,m,y,l);if(F.length===0&&M.hasChildren())return this.processChildren(h,l,M,T).pipe(ae(Z=>new Jt(T,Z)));if(l.length===0&&F.length===0)return K(new Jt(T,[]));let W=Dn(r)===o;return this.processSegment(h,l,M,F,W?oe:o,!0,T).pipe(ae(Z=>new Jt(T,Z instanceof Jt?[Z]:[])))}))):xs(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):lj(e,n,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,n).pipe(et(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):fj(n))):K({routes:[],injector:e})}};function bj(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function Cj(t){let e=t.value.routeConfig;return e&&e.path===""}function lA(t){let e=[],n=new Set;for(let r of t){if(!Cj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=lA(r.children);e.push(new Jt(r.value,i))}return e.filter(r=>!n.has(r))}function F0(t){return t.data||{}}function L0(t){return t.resolve||{}}function Tj(t,e,n,r,i,o){return Qe(s=>wj(t,e,n,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:u})=>J(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Sj(t,e){return Qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of dA(u))s.add(l);let a=0;return Ae(s).pipe(fs(u=>o.has(u)?Aj(u,r,t,e):(u.data=Wh(u,u.parent,t).resolve,K(void 0))),et(()=>a++),ps(1),Qe(u=>a===s.size?K(n):Lt))})}function dA(t){let e=t.children.map(n=>dA(n)).flat();return[t,...e]}function Aj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!nA(i)&&(o[lu]=i.title),Ja(()=>(t.data=Wh(t,t.parent,n).resolve,Rj(o,t,e,r).pipe(ae(s=>(t._resolvedData=s,t.data=O(O({},t.data),s),null)))))}function Rj(t,e,n,r){let i=Kv(t);if(i.length===0)return K({});let o={};return Ae(i).pipe(Qe(s=>Nj(t[s],e,n,r).pipe(sr(),et(a=>{if(a instanceof Us)throw Kh(new Io,a);o[s]=a}))),ps(1),ae(()=>o),Gr(s=>aA(s)?Lt:ds(s)))}function Nj(t,e,n,r){let i=$s(e)??r,o=qs(t,i),s=o.resolve?o.resolve(e,n):Je(i,()=>o(e,n));return br(s)}function Gv(t){return jt(e=>{let n=t(e);return n?Ae(n).pipe(ae(()=>e)):K(e)})}var l_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[lu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(hA),providedIn:"root"})}return t})(),hA=(()=>{class t extends l_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(G(N0))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pu=new U("",{providedIn:"root",factory:()=>({})}),gu=new U(""),fA=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(gv);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=br(Je(n,()=>r.loadComponent())).pipe(ae(gA),jt(mA),et(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Xa(()=>{this.componentLoaders.delete(r)})),o=new as(i,()=>new je).pipe(ss());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=pA(r,this.compiler,n,this.onLoadEndListener).pipe(Xa(()=>{this.childrenLoaders.delete(r)})),s=new as(o,()=>new je).pipe(ss());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pA(t,e,n,r){return br(Je(n,()=>t.loadChildren())).pipe(ae(gA),jt(mA),Qe(i=>i instanceof lh||Array.isArray(i)?K(i):Ae(e.compileModuleAsync(i))),ae(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(gu,[],{optional:!0,self:!0}).flat()),{routes:s.map(u_),injector:o}}))}function Mj(t){return t&&typeof t=="object"&&"default"in t}function gA(t){return Mj(t)?t.default:t}function mA(t){return K(t)}var Xh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(Pj),providedIn:"root"})}return t})(),Pj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yA=new U("");var vA=new U(""),_A=(()=>{class t{currentNavigation=_n(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new je;transitionAbortWithErrorSubject=new je;configLoader=x(fA);environmentInjector=x(Ye);destroyRef=x(hr);urlSerializer=x(du);rootContexts=x(Hs);location=x(Ps);inputBindingEnabled=x(Zh,{optional:!0})!==null;titleStrategy=x(l_);options=x(pu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Xh);createViewTransition=x(yA,{optional:!0});navigationErrorHandler=x(vA,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new jh(i)),r=i=>this.events.next(new Uh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;dt(()=>{this.transitions?.next(J(O({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Ke(null),this.transitions.pipe(nn(r=>r!==null),jt(r=>{let i=!1;return K(r).pipe(jt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),Lt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?J(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.rawUrl),"",nu.IgnoredSameUrlNavigation)),o.resolve(!1),Lt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return K(o).pipe(jt(u=>(this.events.next(new wo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Lt:Promise.resolve(u))),Tj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),et(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new ru(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new wo(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let T=eA(this.rootComponentType).snapshot;return this.currentTransition=r=J(O({},o),{targetSnapshot:T,urlAfterRedirects:l,extras:J(O({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(R=>(R.finalUrl=l,R)),K(r)}else return this.events.next(new Dr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",nu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Lt}),et(o=>{let s=new kh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ae(o=>(this.currentTransition=r=J(O({},o),{guards:z2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),nj(this.environmentInjector,o=>this.events.next(o)),et(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Kh(this.urlSerializer,o.guardsResult);let s=new Fh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),nn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ot.GuardRejected),!1)),Gv(o=>{if(o.guards.canActivateChecks.length!==0)return K(o).pipe(et(s=>{let a=new Lh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),jt(s=>{let a=!1;return K(s).pipe(Sj(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Ot.NoDataFromResolver)}}))}),et(s=>{let a=new Vh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Gv(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=$s(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(et(h=>{a.component=h}),ae(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return dd(s(o.targetSnapshot.root)).pipe(Wr(null),or(1))}),Gv(()=>this.afterPreactivation()),jt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ae(a).pipe(ae(()=>r)):K(r)}),ae(o=>{let s=U2(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=J(O({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),et(()=>{this.events.next(new iu)}),q2(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),or(1),fd(new re(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(nn(()=>!i&&!r.targetRouterState),et(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Ot.Aborted)}))),et({next:o=>{i=!0,this.lastSuccessfulNavigation=dt(this.currentNavigation),this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),fd(this.transitionAbortWithErrorSubject.pipe(et(o=>{throw o}))),Xa(()=>{i||this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Gr(o=>{if(this.destroyed)return r.resolve(!1),Lt;if(i=!0,sA(o))this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),H2(o)?this.events.next(new js(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Vs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Je(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Us){let{message:u,cancellationCode:l}=Kh(this.urlSerializer,a);this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new js(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Lt}))}))}cancelNavigationTransition(n,r,i){let o=new Bn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=dt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xj(t){return t!==Xc}var EA=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(Oj),providedIn:"root"})}return t})(),Yh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Oj=(()=>{class t extends Yh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=pr(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IA=(()=>{class t{urlSerializer=x(du);options=x(pu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(Ps);urlHandlingStrategy=x(Xh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof $n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=eA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(kj),providedIn:"root"})}return t})(),kj=(()=>{class t extends IA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof wo?this.updateStateMemento():n instanceof Dr?this.commitTransition(r):n instanceof ru?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof iu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Bn&&n.code!==Ot.SupersededByNewNavigation&&n.code!==Ot.Redirect?this.restoreHistory(r):n instanceof Vs?this.restoreHistory(r,!0):n instanceof wr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=pr(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function d_(t,e){t.events.pipe(nn(n=>n instanceof wr||n instanceof Bn||n instanceof Vs||n instanceof Dr),ae(n=>n instanceof wr||n instanceof Dr?0:(n instanceof Bn?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?2:1),nn(n=>n!==2),or(1)).subscribe(()=>{e()})}var Fj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(iv);stateManager=x(IA);options=x(pu,{optional:!0})||{};pendingTasks=x(kn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(_A);urlSerializer=x(du);location=x(Ps);urlHandlingStrategy=x(Xh);injector=x(Ye);_events=new je;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(EA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(gu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Zh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=dt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bn&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wr)this.navigated=!0;else if(r instanceof js){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xj(i.source)},s);this.scheduleNavigation(a,Xc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}F2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Bt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return dt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(u_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Y0(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return Z0(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ls(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Xc,null,r)}navigate(n,r={skipLocationChange:!1}){return Vj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=O({},Fj):r===!1?i=O({},Lj):i=r,Ls(n))return M0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return M0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return d_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}var Uj=new U("");function h_(t,...e){return Kt([{provide:gu,multi:!0,useValue:t},[],{provide:pi,useFactory:Bj,deps:[Hn]},{provide:dh,multi:!0,useFactory:$j},e.map(n=>n.\u0275providers)])}function Bj(t){return t.routerState.root}function $j(){let t=x(Ze);return e=>{let n=t.get(ci);if(e!==n.components[0])return;let r=t.get(Hn),i=t.get(Hj);t.get(qj)===1&&r.initialNavigation(),t.get(zj,null,{optional:!0})?.setUpPreloading(),t.get(Uj,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Hj=new U("",{factory:()=>new je}),qj=new U("",{providedIn:"root",factory:()=>1});var zj=new U("");var wA=()=>{};var CA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Wj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ef={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new g_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},g_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Kj=function(t){let e=CA(t);return ef.encodeByteArray(e,!0)},yu=function(t){return Kj(t).replace(/\./g,"")},tf=function(t){try{return ef.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function y_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Qj=()=>y_().__FIREBASE_DEFAULTS__,Yj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&tf(t[1]);return e&&JSON.parse(e)},nf=()=>{try{return wA()||Qj()||Yj()||Zj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v_=t=>{var e,n;return(n=(e=nf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TA=t=>{let e=v_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},__=()=>{var t;return(t=nf())===null||t===void 0?void 0:t.config},E_=t=>{var e;return(e=nf())===null||e===void 0?void 0:e[`_${t}`]};var Do=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function gi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function rf(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function SA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yu(JSON.stringify(n)),yu(JSON.stringify(s)),""].join(".")}var mu={};function Jj(){let t={prod:[],emulator:[]};for(let e of Object.keys(mu))mu[e]?t.emulator.push(e):t.prod.push(e);return t}function Xj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var DA=!1;function of(t,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||mu[t]===e||mu[t]||DA)return;mu[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=Jj().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{DA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=Xj(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),M=document.getElementById(R)||document.createElement("a"),F=n("preprendIcon"),W=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(M,R);let Ce=l();u(W,F),Z.append(W,T,M,Ce),document.body.appendChild(Z)}o?(T.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function eU(){var t;let e=(t=nf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PA(){let t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xA(){return!eU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vu(){try{return typeof indexedDB=="object"}catch{return!1}}function OA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var tU="FirebaseError",en=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bn.prototype.create)}},bn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?nU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new en(i,a,r)}};function nU(t,e){return t.replace(rU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var rU=/\{\$([^}]+)}/g;function kA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(bA(o)&&bA(s)){if(!qn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function bA(t){return t!==null&&typeof t=="object"}function _u(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Gs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FA(t,e){let n=new m_(t,e);return n.subscribe.bind(n)}var m_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=p_),i.error===void 0&&(i.error=p_),i.complete===void 0&&(i.complete=p_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function iU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function p_(){}var zre=14400*1e3;function ht(t){return t&&t._delegate?t._delegate:t}var kt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bo="[DEFAULT]";var I_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Do;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sU(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function oU(t){return t===bo?void 0:t}function sU(t){return t.instantiationMode==="EAGER"}var sf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new I_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var aU=[],le=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(le||{}),cU={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},uU=le.INFO,lU={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},dU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=lU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zn=class{constructor(e){this.name=e,this._logLevel=uU,this._logHandler=dU,this._userLogHandler=null,aU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var hU=(t,e)=>e.some(n=>t instanceof n),LA,VA;function fU(){return LA||(LA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pU(){return VA||(VA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jA=new WeakMap,D_=new WeakMap,UA=new WeakMap,w_=new WeakMap,C_=new WeakMap;function gU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Gn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&jA.set(n,t)}).catch(()=>{}),C_.set(e,t),e}function mU(t){if(D_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});D_.set(t,e)}var b_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return D_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BA(t){b_=t(b_)}function yU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(af(this),e,...n);return UA.set(r,e.sort?e.sort():[e]),Gn(r)}:pU().includes(t)?function(...e){return t.apply(af(this),e),Gn(jA.get(this))}:function(...e){return Gn(t.apply(af(this),e))}}function vU(t){return typeof t=="function"?yU(t):(t instanceof IDBTransaction&&mU(t),hU(t,fU())?new Proxy(t,b_):t)}function Gn(t){if(t instanceof IDBRequest)return gU(t);if(w_.has(t))return w_.get(t);let e=vU(t);return e!==t&&(w_.set(t,e),C_.set(e,t)),e}var af=t=>C_.get(t);function HA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Gn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Gn(s.result),u.oldVersion,u.newVersion,Gn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var _U=["get","getKey","getAll","getAllKeys","count"],EU=["put","add","delete","clear"],T_=new Map;function $A(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T_.get(e))return T_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=EU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_U.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return T_.set(e,o),o}BA(t=>J(O({},t),{get:(e,n,r)=>$A(e,n)||t.get(e,n,r),has:(e,n)=>!!$A(e,n)||t.has(e,n)}));var A_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function IU(t){let e=t.getComponent();return e?.type==="VERSION"}var R_="@firebase/app",qA="0.13.2";var Cr=new zn("@firebase/app"),wU="@firebase/app-compat",DU="@firebase/analytics-compat",bU="@firebase/analytics",CU="@firebase/app-check-compat",TU="@firebase/app-check",SU="@firebase/auth",AU="@firebase/auth-compat",RU="@firebase/database",NU="@firebase/data-connect",MU="@firebase/database-compat",PU="@firebase/functions",xU="@firebase/functions-compat",OU="@firebase/installations",kU="@firebase/installations-compat",FU="@firebase/messaging",LU="@firebase/messaging-compat",VU="@firebase/performance",jU="@firebase/performance-compat",UU="@firebase/remote-config",BU="@firebase/remote-config-compat",$U="@firebase/storage",HU="@firebase/storage-compat",qU="@firebase/firestore",zU="@firebase/ai",GU="@firebase/firestore-compat",WU="firebase",KU="11.10.0";var N_="[DEFAULT]",QU={[R_]:"fire-core",[wU]:"fire-core-compat",[bU]:"fire-analytics",[DU]:"fire-analytics-compat",[TU]:"fire-app-check",[CU]:"fire-app-check-compat",[SU]:"fire-auth",[AU]:"fire-auth-compat",[RU]:"fire-rtdb",[NU]:"fire-data-connect",[MU]:"fire-rtdb-compat",[PU]:"fire-fn",[xU]:"fire-fn-compat",[OU]:"fire-iid",[kU]:"fire-iid-compat",[FU]:"fire-fcm",[LU]:"fire-fcm-compat",[VU]:"fire-perf",[jU]:"fire-perf-compat",[UU]:"fire-rc",[BU]:"fire-rc-compat",[$U]:"fire-gcs",[HU]:"fire-gcs-compat",[qU]:"fire-fst",[GU]:"fire-fst-compat",[zU]:"fire-vertex","fire-js":"fire-js",[WU]:"fire-js-all"};var Eu=new Map,YU=new Map,M_=new Map;function zA(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cn(t){let e=t.name;if(M_.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;M_.set(e,t);for(let n of Eu.values())zA(n,t);for(let n of YU.values())zA(n,t);return!0}function Ws(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t==null?!1:t.settings!==void 0}var ZU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new bn("app","Firebase",ZU);var P_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}};var yi=KU;function k_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:N_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw mi.create("bad-app-name",{appName:String(i)});if(n||(n=__()),!n)throw mi.create("no-options");let o=Eu.get(i);if(o){if(qn(n,o.options)&&qn(r,o.config))return o;throw mi.create("duplicate-app",{appName:i})}let s=new sf(i);for(let u of M_.values())s.addComponent(u);let a=new P_(n,r,s);return Eu.set(i,a),a}function Co(t=N_){let e=Eu.get(t);if(!e&&t===N_&&__())return k_();if(!e)throw mi.create("no-app",{appName:t});return e}function cf(){return Array.from(Eu.values())}function Fe(t,e,n){var r;let i=(r=QU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}Cn(new kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var JU="firebase-heartbeat-database",XU=1,Iu="firebase-heartbeat-store",S_=null;function QA(){return S_||(S_=HA(JU,XU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Iu)}catch(n){console.warn(n)}}}}).catch(t=>{throw mi.create("idb-open",{originalErrorMessage:t.message})})),S_}function eB(t){return v(this,null,function*(){try{let n=(yield QA()).transaction(Iu),r=yield n.objectStore(Iu).get(YA(t));return yield n.done,r}catch(e){if(e instanceof en)Cr.warn(e.message);else{let n=mi.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(n.message)}}})}function GA(t,e){return v(this,null,function*(){try{let r=(yield QA()).transaction(Iu,"readwrite");yield r.objectStore(Iu).put(e,YA(t)),yield r.done}catch(n){if(n instanceof en)Cr.warn(n.message);else{let r=mi.create("idb-set",{originalErrorMessage:n?.message});Cr.warn(r.message)}}})}function YA(t){return`${t.name}!${t.options.appId}`}var tB=1024,nB=30,x_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new O_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=WA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>nB){let s=iB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=WA(),{heartbeatsToSend:r,unsentEntries:i}=rB(this._heartbeatsCache.heartbeats),o=yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cr.warn(n),""}})}};function WA(){return new Date().toISOString().substring(0,10)}function rB(t,e=tB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),KA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var O_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return vu()?OA().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield eB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function KA(t){return yu(JSON.stringify({version:2,heartbeats:t})).length}function iB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function oB(t){Cn(new kt("platform-logger",e=>new A_(e),"PRIVATE")),Cn(new kt("heartbeat",e=>new x_(e),"PRIVATE")),Fe(R_,qA,t),Fe(R_,qA,"esm2017"),Fe("fire-js","")}oB("");var sB="firebase",aB="11.10.0";Fe(sB,aB,"app");function ZA(t){t===void 0&&(t=x(Ze));let e=t.get(Is);return n=>new re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var vi=new Ms("ANGULARFIRE2_VERSION");function wu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Qs=(t,e)=>{let n=e?[e]:cf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ks=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Ks||{}),JA=bv()&&typeof Zone<"u"?Ks.WARN:Ks.SILENT;var uf=class{zone;delegate;constructor(e,n=Fg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},_i=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=x(De);this.outsideAngular=n.runOutsideAngular(()=>new uf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new uf(typeof Zone>"u"?void 0:Zone.current,kg))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XA=!1;function cB(t,e){!XA&&(JA>Ks.SILENT||bv())&&(XA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),JA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function uB(t){let e=x(De,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function To(t){let e=x(De,{optional:!0});return e?e.run(()=>t()):t()}var lB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Je(n,()=>To(()=>t.apply(void 0,r)))),ot=(t,e,n)=>(n||=e?Ks.WARN:Ks.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=x(_i),s=x(Is),a=x(Ye)}catch{return cB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=To(()=>s.add())),i[l]=lB(i[l],r,a));let u=uB(()=>t.apply(this,i));return e?u instanceof re?u.pipe(zr(o.outsideAngular),qr(o.insideAngular),ZA(a)):u instanceof Promise?To(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Je(a,()=>To(()=>h(m))),m=>Je(a,()=>To(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:To(()=>u):u instanceof re?u.pipe(zr(o.outsideAngular),qr(o.insideAngular)):To(()=>u)});var Tr=class{constructor(e){return e}},So=class{constructor(){return cf()}};function dB(t){return t&&t.length===1?t[0]:new Tr(Co())}var F_=new U("angularfire2._apps"),hB={provide:Tr,useFactory:dB,deps:[[new $t,F_]]},fB={provide:So,deps:[[new $t,F_]]};function pB(t){return(e,n)=>{let r=n.get(oi);Fe("angularfire",vi.full,"core"),Fe("angularfire",vi.full,"app"),Fe("angular",YS.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Tr(i)}}function eR(t,...e){return Kt([hB,fB,{provide:F_,useFactory:pB(t),multi:!0,deps:[De,Ze,_i,...e]}])}var tR=ot(k_,!0);var gB=new Map,mB={activated:!1,tokenObservers:[]},yB={initialized:!1,enabled:!1};function Tn(t){return gB.get(t)||Object.assign({},mB)}function oR(){return yB}var vB="https://content-firebaseappcheck.googleapis.com/v1";var _B="exchangeDebugToken",nR={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Kie=1440*60*1e3;var j_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new Do,this.pending.promise.catch(n=>{}),yield EB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Do,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function EB(t){return new Promise(e=>{setTimeout(e,t)})}var IB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ei=new bn("appCheck","AppCheck",IB);function sR(t){if(!Tn(t).activated)throw Ei.create("use-before-activation",{appName:t.name})}function aR(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Ei.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ei.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ei.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function cR(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${vB}/projects/${n}/apps/${r}:${_B}?key=${i}`,body:{debug_token:e}}}var wB="firebase-app-check-database",DB=1,U_="firebase-app-check-store";var lf=null;function bB(){return lf||(lf=new Promise((t,e)=>{try{let n=indexedDB.open(wB,DB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ei.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(U_,{keyPath:"compositeKey"})}}}catch(n){e(Ei.create("storage-open",{originalErrorMessage:n?.message}))}}),lf)}function CB(t,e){return TB(SB(t),e)}function TB(t,e){return v(this,null,function*(){let r=(yield bB()).transaction(U_,"readwrite"),o=r.objectStore(U_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ei.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function SB(t){return`${t.options.appId}-${t.name}`}var Du=new zn("@firebase/app-check");function L_(t,e){return vu()?CB(t,e).catch(n=>{Du.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function uR(){return oR().enabled}function lR(){return v(this,null,function*(){let t=oR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var AB={error:"UNKNOWN_ERROR"};function RB(t){return ef.encodeString(JSON.stringify(t),!1)}function B_(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;sR(r);let i=Tn(r),o=i.token,s;if(o&&!bu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(bu(l)?o=l:yield L_(r,void 0))}if(!e&&o&&bu(o))return{token:o.token};let a=!1;if(uR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=aR(cR(r,yield lR()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield L_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Du.warn(l.message):n&&Du.error(l),V_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Tn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Du.warn(l.message):n&&Du.error(l),s=l}let u;return o?s?bu(o)?u={token:o.token,internalError:s}:u=V_(s):(u={token:o.token},i.token=o,yield L_(r,o)):u=V_(s),a&&xB(r,u),u})}function NB(t){return v(this,null,function*(){let e=t.app;sR(e);let{provider:n}=Tn(e);if(uR()){let r=yield lR(),{token:i}=yield aR(cR(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function MB(t,e,n,r){let{app:i}=t,o=Tn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&bu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),rR(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>rR(t))}function dR(t,e){let n=Tn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function rR(t){let{app:e}=t,n=Tn(e),r=n.tokenRefresher;r||(r=PB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function PB(t){let{app:e}=t;return new j_(()=>v(null,null,function*(){let n=Tn(e),r;if(n.token?r=yield B_(t,!0):r=yield B_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Tn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},nR.RETRIAL_MIN_WAIT,nR.RETRIAL_MAX_WAIT)}function xB(t,e){let n=Tn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bu(t){return t.expireTimeMillis-Date.now()>0}function V_(t){return{token:RB(AB),error:t}}var $_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Tn(this.app);for(let n of e)dR(this.app,n.next);return Promise.resolve()}};function OB(t,e){return new $_(t,e)}function kB(t){return{getToken:e=>B_(t,e),getLimitedUseToken:()=>NB(t),addTokenListener:e=>MB(t,"INTERNAL",e),removeTokenListener:e=>dR(t.app,e)}}var FB="@firebase/app-check",LB="0.10.1";var VB="app-check",iR="app-check-internal";function jB(){Cn(new kt(VB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return OB(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(iR).initialize()})),Cn(new kt(iR,t=>{let e=t.getProvider("app-check").getImmediate();return kB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fe(FB,LB)}jB();var UB="app-check";var Ys=class{constructor(){return Qs(UB)}};var BB=["localhost","0.0.0.0","127.0.0.1"],aoe=typeof window<"u"&&BB.includes(window.location.hostname);function SR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AR=SR,RR=new bn("auth","Firebase",SR());var mf=new zn("@firebase/auth");function $B(t,...e){mf.logLevel<=le.WARN&&mf.warn(`Auth (${yi}): ${t}`,...e)}function hf(t,...e){mf.logLevel<=le.ERROR&&mf.error(`Auth (${yi}): ${t}`,...e)}function Kn(t,...e){throw fE(t,...e)}function Ao(t,...e){return fE(t,...e)}function NR(t,e,n){let r=Object.assign(Object.assign({},AR()),{[e]:n});return new bn("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return NR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RR.create(t,...e)}function z(t,e,...n){if(!t)throw fE(e,...n)}function Sr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw hf(e),new Error(e)}function Di(t,e){t||Sr(e)}function G_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HB(){return hR()==="http:"||hR()==="https:"}function hR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HB()||NA()||"connection"in navigator)?navigator.onLine:!0}function zB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ro=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=AA()||MA()}get(){return qB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pE(t,e){Di(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var yf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var GB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var WB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KB=new Ro(3e4,6e4);function bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ci(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return MR(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=_u(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return RA()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&gi(t.emulatorConfig.host)&&(y.credentials="include"),yf.fetch()(yield PR(t,t.config.apiHost,n,p),y)}))})}function MR(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},GB),e);try{let i=new W_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw df(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw df(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw df(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw NR(t,h,l);Kn(t,h)}}catch(i){if(i instanceof en)throw i;Kn(t,"network-request-failed",{message:String(i)})}})}function xu(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Ci(t,e,n,r,i);return"mfaPendingCredential"in l&&Kn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function PR(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?pE(t.config,i):`${t.config.apiScheme}://${i}`;return WB.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function QB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var W_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ao(this.auth,"network-request-failed")),KB.get())})}};function df(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ao(t,e,r);return i.customData._tokenResponse=n,i}function fR(t){return t!==void 0&&t.enterprise!==void 0}var K_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function YB(t,e){return v(this,null,function*(){return Ci(t,"GET","/v2/recaptchaConfig",bi(t,e))})}function ZB(t,e){return v(this,null,function*(){return Ci(t,"POST","/v1/accounts:delete",e)})}function vf(t,e){return v(this,null,function*(){return Ci(t,"POST","/v1/accounts:lookup",e)})}function Tu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gE(t,e=!1){return v(this,null,function*(){let n=ht(t),r=yield n.getIdToken(e),i=mE(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Tu(H_(i.auth_time)),issuedAtTime:Tu(H_(i.iat)),expirationTime:Tu(H_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function H_(t){return Number(t)*1e3}function mE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{let i=tf(n);return i?JSON.parse(i):(hf("Failed to decode base64 JWT payload"),null)}catch(i){return hf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pR(t){let e=mE(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Au(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof en&&JB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function JB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Q_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ru=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function _f(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Au(t,vf(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?xR(o.providerUserInfo):[],a=XB(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ru(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function yE(t){return v(this,null,function*(){let e=ht(t);yield _f(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function XB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xR(t){return t.map(e=>{var{providerId:n}=e,r=Lg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function e$(t,e){return v(this,null,function*(){let n=yield MR(t,{},()=>v(null,null,function*(){let r=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield PR(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&gi(t.emulatorConfig.host)&&(u.credentials="include"),yf.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function t$(t,e){return v(this,null,function*(){return Ci(t,"POST","/v2/accounts:revokeToken",bi(t,e))})}var Su=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=pR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield e$(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Sr("not implemented")}};function Ii(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var wi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ru(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Au(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return gE(this,e)}reload(){return yE(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield _f(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(qt(this.auth.app))return Promise.reject(Rr(this.auth));let e=yield this.getIdToken();return yield Au(this,ZB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,W=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:Ce,isAnonymous:Tt,providerData:we,stsTokenManager:D}=n;z(Z&&D,e,"internal-error");let _=Su.fromJSON(this.name,D);z(typeof Z=="string",e,"internal-error"),Ii(p,e.name),Ii(m,e.name),z(typeof Ce=="boolean",e,"internal-error"),z(typeof Tt=="boolean",e,"internal-error"),Ii(y,e.name),Ii(T,e.name),Ii(R,e.name),Ii(M,e.name),Ii(F,e.name),Ii(W,e.name);let I=new t({uid:Z,auth:e,email:m,emailVerified:Ce,displayName:p,isAnonymous:Tt,photoURL:T,phoneNumber:y,tenantId:R,stsTokenManager:_,createdAt:F,lastLoginAt:W});return we&&Array.isArray(we)&&(I.providerData=we.map(w=>Object.assign({},w))),M&&(I._redirectEventId=M),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Su;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield _f(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?xR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Su;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ru(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var gR=new Map;function Ar(t){Di(t instanceof Function,"Expected a class definition");let e=gR.get(t);return e?(Di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gR.set(t,e),e)}var n$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Y_=n$;function ff(t,e,n){return`firebase:${t}:${e}:${n}`}var Ef=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ff(this.userKey,i.apiKey,o),this.fullPersistenceKey=ff("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield vf(this.auth,{idToken:e}).catch(()=>{});return n?wi._fromGetAccountInfoResponse(this.auth,n,e):null}return wi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Ar(Y_),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Ar(Y_),s=ff(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield vf(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield wi._fromGetAccountInfoResponse(e,m,h)}else p=wi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function mR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jR(e))return"Blackberry";if(UR(e))return"Webos";if(kR(e))return"Safari";if((e.includes("chrome/")||FR(e))&&!e.includes("edge/"))return"Chrome";if(VR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function OR(t=it()){return/firefox\//i.test(t)}function kR(t=it()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FR(t=it()){return/crios\//i.test(t)}function LR(t=it()){return/iemobile/i.test(t)}function VR(t=it()){return/android/i.test(t)}function jR(t=it()){return/blackberry/i.test(t)}function UR(t=it()){return/webos/i.test(t)}function vE(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function r$(t=it()){var e;return vE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i$(){return PA()&&document.documentMode===10}function BR(t=it()){return vE(t)||VR(t)||UR(t)||jR(t)||/windows phone/i.test(t)||LR(t)}function $R(t,e=[]){let n;switch(t){case"Browser":n=mR(it());break;case"Worker":n=`${mR(it())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${r}`}var Z_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function o$(n){return v(this,arguments,function*(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",bi(t,e))})}var s$=6,J_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:s$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var X_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new If(this),this.idTokenSubscription=new If(this),this.beforeStateQueue=new Z_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ar(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Ef.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield vf(this,{idToken:e}),r=yield wi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(qt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield _f(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=zB()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(qt(this.app))return Promise.reject(Rr(this));let n=e?ht(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return qt(this.app)?Promise.reject(Rr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qt(this.app)?Promise.reject(Rr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield o$(this),n=new J_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield t$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ar(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield Ef.create(this,[Ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$R(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&$B(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Mo(t){return ht(t)}var If=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FA(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Af={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a$(t){Af=t}function HR(t){return Af.loadJS(t)}function c$(){return Af.recaptchaEnterpriseScript}function u$(){return Af.gapiScript}function qR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var eE=class{constructor(){this.enterprise=new tE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},tE=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var l$="recaptcha-enterprise",zR="NO_RECAPTCHA",nE=class{constructor(e){this.type=l$,this.auth=Mo(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){YB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new K_(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;fR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(zR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&fR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=c$();u.length!==0&&(u+=a),HR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Cu(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new nE(t),s;if(i)s=zR;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function rE(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Cu(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Cu(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Cu(t,e,n);return r(t,a).catch(u=>v(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Cu(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield Cu(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function _E(t,e){let n=Ws(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(qn(o,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function d$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ar);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function EE(t,e,n){let r=Mo(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=GR(e),{host:s,port:a}=h$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(qn(l,r.config.emulator)&&qn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,gi(s)?(rf(`${o}//${s}${u}`),of("Auth",!0)):i||f$()}function GR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h$(t){let e=GR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:yR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:yR(s)}}}function yR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function f$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Nu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,n){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}};function p$(t,e){return v(this,null,function*(){return Ci(t,"POST","/v1/accounts:signUp",e)})}function g$(t,e){return v(this,null,function*(){return xu(t,"POST","/v1/accounts:signInWithPassword",bi(t,e))})}function m$(t,e){return v(this,null,function*(){return xu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))})}function y$(t,e){return v(this,null,function*(){return xu(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,e))})}var Mu=class t extends Nu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rE(e,n,"signInWithPassword",g$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return m$(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rE(e,r,"signUpPassword",p$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return y$(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function q_(t,e){return v(this,null,function*(){return xu(t,"POST","/v1/accounts:signInWithIdp",bi(t,e))})}function v$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _$(t){let e=zs(Gs(t)).link,n=e?zs(Gs(e)).deep_link_id:null,r=zs(Gs(t)).deep_link_id;return(r?zs(Gs(r)).link:null)||r||n||e||t}var wf=class t{constructor(e){var n,r,i,o,s,a;let u=zs(Gs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=v$((i=u.mode)!==null&&i!==void 0?i:null);z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=_$(e);try{return new t(n)}catch{return null}}};var WR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Mu._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=wf.parseLink(r);return z(i,"argument-error"),Mu._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Df=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iE=class extends Df{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function E$(t,e){return v(this,null,function*(){return xu(t,"POST","/v1/accounts:signUp",bi(t,e))})}var Zs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield wi._fromIdTokenResponse(e,r,i),s=vR(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function vR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var oE=class t extends en{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function KR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?oE._fromErrorAndOperation(t,o,e,r):o})}function I$(t,e,n=!1){return v(this,null,function*(){let r=yield Au(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Zs._forOperation(t,"link",r)})}function w$(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(qt(r.app))return Promise.reject(Rr(r));let i="reauthenticate";try{let o=yield Au(t,KR(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=mE(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(t.uid===a,r,"user-mismatch"),Zs._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Kn(r,"user-mismatch"),o}})}function QR(t,e,n=!1){return v(this,null,function*(){if(qt(t.app))return Promise.reject(Rr(t));let r="signIn",i=yield KR(t,r,e),o=yield Zs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function IE(t,e){return v(this,null,function*(){return QR(Mo(t),e)})}function YR(t){return v(this,null,function*(){let e=Mo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function wE(t,e,n){return v(this,null,function*(){if(qt(t.app))return Promise.reject(Rr(t));let r=Mo(t),s=yield rE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E$,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&YR(t),u}),a=yield Zs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function DE(t,e,n){return qt(t.app)?Promise.reject(Rr(t)):IE(ht(t),WR.credential(e,n)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&YR(t),r}))}function Ou(t,e,n,r){return ht(t).onIdTokenChanged(e,n,r)}function bE(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function CE(t){return ht(t).signOut()}var bf="__sak";var Cf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var D$=1e3,b$=10,C$=(()=>{class t extends Cf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);i$()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,b$):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},D$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield $r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield $r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield $r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),ZR=C$;var T$=(()=>{class t extends Cf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),TE=T$;function S$(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var A$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield S$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function JR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var sE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=JR("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Wn(){return window}function R$(t){Wn().location.href=t}function XR(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}function N$(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function M$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function P$(){return XR()?self:null}var eN="firebaseLocalStorageDb",x$=1,Tf="firebaseLocalStorage",tN="fbase_key",No=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Rf(t,e){return t.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function O$(){let t=indexedDB.deleteDatabase(eN);return new No(t).toPromise()}function aE(){let t=indexedDB.open(eN,x$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Tf,{keyPath:tN})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Tf)?e(r):(r.close(),yield O$(),e(yield aE()))}))})}function _R(t,e,n){return v(this,null,function*(){let r=Rf(t,!0).put({[tN]:e,value:n});return new No(r).toPromise()})}function k$(t,e){return v(this,null,function*(){let n=Rf(t,!1).get(e),r=yield new No(n).toPromise();return r===void 0?null:r.value})}function ER(t,e){let n=Rf(t,!0).delete(e);return new No(n).toPromise()}var F$=800,L$=3,V$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield aE(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>L$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return XR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=A$._getInstance(P$()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield N$(),!this.activeServiceWorker)return;this.sender=new sE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||M$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield aE();return yield _R(n,bf,"1"),yield ER(n,bf),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>_R(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>k$(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>ER(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=Rf(o,!1).getAll();return new No(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),F$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),nN=V$;var goe=qR("rcb"),moe=new Ro(3e4,6e4);function j$(t,e){return e?Ar(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Pu=class extends Nu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return q_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return q_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return q_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function U$(t){return QR(t.auth,new Pu(t),t.bypassAuthState)}function B$(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),w$(n,new Pu(t),t.bypassAuthState)}function $$(t){return v(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),I$(n,new Pu(t),t.bypassAuthState)})}var cE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U$;case"linkViaPopup":case"linkViaRedirect":return $$;case"reauthViaPopup":case"reauthViaRedirect":return B$;default:Kn(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var yoe=new Ro(2e3,1e4);var H$="pendingRedirect",pf=new Map,uE=class t extends cE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=pf.get(this.auth._key());if(!e){try{let r=(yield q$(this.resolver,this.auth))?yield $r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return $r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,$r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function q$(t,e){return v(this,null,function*(){let n=W$(e),r=G$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function z$(t,e){pf.set(t._key(),e)}function G$(t){return Ar(t._redirectPersistence)}function W$(t){return ff(H$,t.config.apiKey,t.name)}function K$(t,e,n=!1){return v(this,null,function*(){if(qt(t.app))return Promise.reject(Rr(t));let r=Mo(t),i=j$(r,e),s=yield new uE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Q$=600*1e3,lE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ao(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q$&&this.cachedEventUids.clear(),this.cachedEventUids.has(IR(e))}saveEventToCache(e){this.cachedEventUids.add(IR(e)),this.lastProcessedEventTime=Date.now()}};function IR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Y$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rN(t);default:return!1}}function Z$(n){return v(this,arguments,function*(t,e={}){return Ci(t,"GET","/v1/projects",e)})}var J$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X$=/^https?/;function eH(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Z$(t);for(let n of e)try{if(tH(n))return}catch{}Kn(t,"unauthorized-domain")})}function tH(t){let e=G_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!X$.test(n))return!1;if(J$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var nH=new Ro(3e4,6e4);function wR(){let t=Wn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rH(t){return new Promise((e,n)=>{var r,i,o;function s(){wR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wR(),n(Ao(t,"network-request-failed"))},timeout:nH.get()})}if(!((i=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Wn().gapi)===null||o===void 0)&&o.load)s();else{let a=qR("iframefcb");return Wn()[a]=()=>{gapi.load?s():n(Ao(t,"network-request-failed"))},HR(`${u$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw gf=null,e})}var gf=null;function iH(t){return gf=gf||rH(t),gf}var oH=new Ro(5e3,15e3),sH="__/auth/iframe",aH="emulator/auth/iframe",cH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lH(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?pE(e,aH):`https://${t.config.authDomain}/${sH}`,r={apiKey:e.apiKey,appName:t.name,v:yi},i=uH.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${_u(r).slice(1)}`}function dH(t){return v(this,null,function*(){let e=yield iH(t),n=Wn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:lH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cH,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ao(t,"network-request-failed"),a=Wn().setTimeout(()=>{o(s)},oH.get());function u(){Wn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var hH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fH=500,pH=600,gH="_blank",mH="http://localhost",Sf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function yH(t,e,n,r=fH,i=pH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},hH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=it().toLowerCase();n&&(a=FR(l)?gH:n),OR(l)&&(e=e||mH,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(r$(l)&&a!=="_self")return vH(e||"",a),new Sf(null);let p=window.open(e||"",a,h);z(p,t,"popup-blocked");try{p.focus()}catch{}return new Sf(p)}function vH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _H="__/auth/handler",EH="emulator/auth/handler",IH=encodeURIComponent("fac");function DR(t,e,n,r,i,o){return v(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yi,eventId:i};if(e instanceof Df){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",kA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof iE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${IH}=${encodeURIComponent(u)}`:"";return`${wH(t)}?${_u(a).slice(1)}${l}`})}function wH({config:t}){return t.emulator?pE(t,EH):`https://${t.authDomain}/${_H}`}var z_="webStorageSupport",dE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TE,this._completeRedirectFn=K$,this._overrideRedirectResult=z$}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Di((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield DR(e,n,r,G_(),i);return yH(e,s,JR())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield DR(e,n,r,G_(),i);return R$(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Di(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield dH(e),r=new lE(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(z_,{type:z_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[z_];s!==void 0&&n(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BR()||kR()||vE()}},iN=dE;var bR="@firebase/auth",CR="1.10.8";var hE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bH(t){Cn(new kt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$R(t)},l=new X_(r,i,o,u);return d$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cn(new kt("auth-internal",e=>{let n=Mo(e.getProvider("auth").getImmediate());return(r=>new hE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(bR,CR,DH(t)),Fe(bR,CR,"esm2017")}var CH=300,TH=E_("authIdTokenMaxAge")||CH,TR=null,SH=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TH)return;let i=n?.token;TR!==i&&(TR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function SE(t=Co()){let e=Ws(t,"auth");if(e.isInitialized())return e.getImmediate();let n=_E(t,{popupRedirectResolver:iN,persistence:[nN,ZR,TE]}),r=E_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=SH(o.toString());bE(n,s,()=>s(n.currentUser)),Ou(n,a=>s(a))}}let i=v_("auth");return i&&EE(n,`http://${i}`),n}function AH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}a$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Ao("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",AH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bH("Browser");function aN(t){return new re(function(e){var n=Ou(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var cN="auth",Po=class{constructor(e){return e}},ku=class{constructor(){return Qs(cN)}};var AE=new U("angularfire2.auth-instances");function g4(t,e){let n=wu(cN,t,e);return n&&new Po(n)}function m4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Po(r)}}var y4={provide:ku,deps:[[new $t,AE]]},v4={provide:Po,useFactory:g4,deps:[[new $t,AE],Tr]};function uN(t,...e){return Fe("angularfire",vi.full,"auth"),Kt([v4,y4,{provide:AE,useFactory:m4(t),multi:!0,deps:[De,Ze,_i,So,[new $t,Ys],...e]}])}var lN=ot(aN,!0);var dN=ot(wE,!0,2);var hN=ot(SE,!0);var fN=ot(DE,!0,2);var pN=ot(CE,!0,2);var gN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mN={};var Nr,RE;(function(){var t;function e(D,_){function I(){}I.prototype=_.prototype,D.D=_.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(w,b,S){for(var E=Array(arguments.length-2),tr=2;tr<arguments.length;tr++)E[tr-2]=arguments[tr];return _.prototype[b].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=D.g[0],I=D.g[1],b=D.g[2];var S=D.g[3],E=_+(S^I&(b^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(b^_&(I^b))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=b+(I^S&(_^I))+w[2]+606105819&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(_^b&(S^_))+w[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=_+(S^I&(b^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(b^_&(I^b))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=b+(I^S&(_^I))+w[6]+2821735955&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(_^b&(S^_))+w[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=_+(S^I&(b^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(b^_&(I^b))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=b+(I^S&(_^I))+w[10]+4294925233&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(_^b&(S^_))+w[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=_+(S^I&(b^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(b^_&(I^b))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=b+(I^S&(_^I))+w[14]+2792965006&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(_^b&(S^_))+w[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=_+(b^S&(I^b))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=b+(_^I&(S^_))+w[11]+643717713&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(b^S))+w[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=_+(b^S&(I^b))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=b+(_^I&(S^_))+w[15]+3634488961&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(b^S))+w[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=_+(b^S&(I^b))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=b+(_^I&(S^_))+w[3]+4107603335&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(b^S))+w[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=_+(b^S&(I^b))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=b+(_^I&(S^_))+w[7]+1735328473&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(b^S))+w[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=_+(I^b^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^b)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=b+(S^_^I)+w[11]+1839030562&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^_)+w[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=_+(I^b^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^b)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=b+(S^_^I)+w[7]+4139469664&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^_)+w[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=_+(I^b^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^b)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=b+(S^_^I)+w[3]+3572445317&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^_)+w[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=_+(I^b^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^b)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=b+(S^_^I)+w[15]+530742520&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^_)+w[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=_+(b^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~b))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=b+(_^(S|~I))+w[14]+2878612391&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~_))+w[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=_+(b^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~b))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=b+(_^(S|~I))+w[10]+4293915773&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~_))+w[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=_+(b^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~b))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=b+(_^(S|~I))+w[6]+2734768916&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~_))+w[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=_+(b^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~b))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=b+(_^(S|~I))+w[2]+718787259&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~_))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,_){_===void 0&&(_=D.length);for(var I=_-this.blockSize,w=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=I;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<_;)if(w[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,w),b=0;break}}else for(;S<_;)if(w[b++]=D[S++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;var I=8*this.o;for(_=D.length-8;_<D.length;++_)D[_]=I&255,I/=256;for(this.u(D),D=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)D[I++]=this.g[_]>>>w&255;return D};function o(D,_){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=_(D)}function s(D,_){this.h=_;for(var I=[],w=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;w&&S==_||(I[b]=S,w=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?o(D,function(_){return new s([_|0],0>_?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var _=[],I=1,w=0;D>=I;w++)_[w]=D/I|0,I*=4294967296;return new s(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return M(h(D.substring(1),_));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),E=parseInt(D.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-M(this).m();for(var D=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);D+=(0<=w?w:4294967296+w)*_,_*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(T(this))return"0";if(R(this))return"-"+M(this).toString(D);for(var _=l(Math.pow(D,6)),I=this,w="";;){var b=Ce(I,_).g;I=F(I,b.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,T(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function T(D){if(D.h!=0)return!1;for(var _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function R(D){return D.h==-1}t.l=function(D){return D=F(this,D),R(D)?-1:T(D)?0:1};function M(D){for(var _=D.g.length,I=[],w=0;w<_;w++)I[w]=~D.g[w];return new s(I,~D.h).add(m)}t.abs=function(){return R(this)?M(this):this},t.add=function(D){for(var _=Math.max(this.g.length,D.g.length),I=[],w=0,b=0;b<=_;b++){var S=w+(this.i(b)&65535)+(D.i(b)&65535),E=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);w=E>>>16,S&=65535,E&=65535,I[b]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function F(D,_){return D.add(M(_))}t.j=function(D){if(T(this)||T(D))return p;if(R(this))return R(D)?M(this).j(M(D)):M(M(this).j(D));if(R(D))return M(this.j(M(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var _=this.g.length+D.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<D.g.length;b++){var S=this.i(w)>>>16,E=this.i(w)&65535,tr=D.i(b)>>>16,Aa=D.i(b)&65535;I[2*w+2*b]+=E*Aa,W(I,2*w+2*b),I[2*w+2*b+1]+=S*Aa,W(I,2*w+2*b+1),I[2*w+2*b+1]+=E*tr,W(I,2*w+2*b+1),I[2*w+2*b+2]+=S*tr,W(I,2*w+2*b+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function W(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function Z(D,_){this.g=D,this.h=_}function Ce(D,_){if(T(_))throw Error("division by zero");if(T(D))return new Z(p,p);if(R(D))return _=Ce(M(D),_),new Z(M(_.g),M(_.h));if(R(_))return _=Ce(D,M(_)),new Z(M(_.g),_.h);if(30<D.g.length){if(R(D)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=_;0>=w.l(D);)I=Tt(I),w=Tt(w);var b=we(I,1),S=we(w,1);for(w=we(w,2),I=we(I,2);!T(w);){var E=S.add(w);0>=E.l(D)&&(b=b.add(I),S=E),w=we(w,1),I=we(I,1)}return _=F(D,b.j(_)),new Z(b,_)}for(b=p;0<=D.l(_);){for(I=Math.max(1,Math.floor(D.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);R(E)||0<E.l(D);)I-=w,S=l(I),E=S.j(_);T(S)&&(S=m),b=b.add(S),D=F(D,E)}return new Z(b,D)}t.A=function(D){return Ce(this,D).h},t.and=function(D){for(var _=Math.max(this.g.length,D.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&D.i(w);return new s(I,this.h&D.h)},t.or=function(D){for(var _=Math.max(this.g.length,D.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|D.i(w);return new s(I,this.h|D.h)},t.xor=function(D){for(var _=Math.max(this.g.length,D.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^D.i(w);return new s(I,this.h^D.h)};function Tt(D){for(var _=D.g.length+1,I=[],w=0;w<_;w++)I[w]=D.i(w)<<1|D.i(w-1)>>>31;return new s(I,D.h)}function we(D,_){var I=_>>5;_%=32;for(var w=D.g.length-I,b=[],S=0;S<w;S++)b[S]=0<_?D.i(S+I)>>>_|D.i(S+I+1)<<32-_:D.i(S+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RE=mN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Nr=mN.Integer=s}).apply(typeof gN<"u"?gN:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mr={};var NE,E4,Js,ME,Fu,Mf,PE,xE,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var k=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)k[Te-2]=arguments[Te];return d.prototype[C].apply(g,k)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let k=0;k<A;k++)c[C+k]=g[k]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ce(c){return Ce[" "](c),c}Ce[" "]=function(){};var Tt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function we(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Gp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class tr{constructor(){this.h=this.g=null}add(d,f){let g=Aa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Aa=new F(()=>new bx,c=>c.reset());class bx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ra,Na=!1,Gp=new tr,aD=()=>{let c=a.Promise.resolve(void 0);Ra=()=>{c.then(Cx)}};var Cx=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=Aa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Na=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var Tx=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ma(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Tt){e:{try{Ce(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Sx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ma.aa.h.call(this)}}T(Ma,ft);var Sx={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Pa="closure_listenable_"+(1e6*Math.random()|0),Ax=0;function Rx(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++Ax,this.da=this.fa=!1}function gl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ml(c){this.src=c,this.g={},this.h=0}ml.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=Kp(c,d,g,C);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new Rx(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Wp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(gl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Kp(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Qp="closure_lm_"+(1e6*Math.random()|0),Yp={};function cD(c,d,f,g,C){if(g&&g.once)return lD(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)cD(c,d[A],f,g,C);return null}return f=eg(f),c&&c[Pa]?c.K(d,f,l(g)?!!g.capture:!!g,C):uD(c,d,f,!1,g,C)}function uD(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,Te=Jp(c);if(Te||(c[Qp]=Te=new ml(c)),f=Te.add(d,f,g,k,A),f.proxy)return f;if(g=Nx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)Tx||(C=k),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(hD(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Nx(){function c(f){return d.call(c.src,c.listener,f)}let d=Mx;return c}function lD(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)lD(c,d[A],f,g,C);return null}return f=eg(f),c&&c[Pa]?c.L(d,f,l(g)?!!g.capture:!!g,C):uD(c,d,f,!0,g,C)}function dD(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)dD(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=eg(f),c&&c[Pa]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Kp(A,f,g,C),-1<f&&(gl(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Jp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Kp(d,f,g,C)),(f=-1<c?d[c]:null)&&Zp(f))}function Zp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Pa])Wp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(hD(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Jp(d))?(Wp(f,c),f.h==0&&(f.src=null,d[Qp]=null)):gl(c)}}}function hD(c){return c in Yp?Yp[c]:Yp[c]="on"+c}function Mx(c,d){if(c.da)c=!0;else{d=new Ma(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Zp(c),c=f.call(g,d)}return c}function Jp(c){return c=c[Qp],c instanceof ml?c:null}var Xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function eg(c){return typeof c=="function"?c:(c[Xp]||(c[Xp]=function(d){return c.handleEvent(d)}),c[Xp])}function pt(){Vr.call(this),this.i=new ml(this),this.M=this,this.F=null}T(pt,Vr),pt.prototype[Pa]=!0,pt.prototype.removeEventListener=function(c,d,f,g){dD(this,c,d,f,g)};function St(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var C=d;d=new ft(g,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];C=yl(k,g,!0,d)&&C}if(k=d.g=c,C=yl(k,g,!0,d)&&C,C=yl(k,g,!1,d)&&C,f)for(A=0;A<f.length;A++)k=d.g=f[A],C=yl(k,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)gl(f[g]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function yl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Te=k.listener,ct=k.ha||k.src;k.fa&&Wp(c.i,k),C=Te.call(ct,g)!==!1&&C}}return C&&!g.defaultPrevented}function fD(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function pD(c){c.g=fD(()=>{c.g=null,c.i&&(c.i=!1,pD(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Px extends Vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:pD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xa(c){Vr.call(this),this.h=c,this.g={}}T(xa,Vr);var gD=[];function mD(c){we(c.g,function(d,f){this.g.hasOwnProperty(f)&&Zp(d)},c),c.g={}}xa.prototype.N=function(){xa.aa.N.call(this),mD(this)},xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tg=a.JSON.stringify,xx=a.JSON.parse,Ox=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ng(){}ng.prototype.h=null;function yD(c){return c.h||(c.h=c.i())}function vD(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rg(){ft.call(this,"d")}T(rg,ft);function ig(){ft.call(this,"c")}T(ig,ft);var Vi={},_D=null;function vl(){return _D=_D||new pt}Vi.La="serverreachability";function ED(c){ft.call(this,Vi.La,c)}T(ED,ft);function ka(c){let d=vl();St(d,new ED(d))}Vi.STAT_EVENT="statevent";function ID(c,d){ft.call(this,Vi.STAT_EVENT,c),this.stat=d}T(ID,ft);function At(c){let d=vl();St(d,new ID(d,c))}Vi.Ma="timingevent";function wD(c,d){ft.call(this,Vi.Ma,c),this.size=d}T(wD,ft);function Fa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function kx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var k="",Te=A.split("&"),ct=0;ct<Te.length;ct++){var ye=Te[ct].split("=");if(1<ye.length){var gt=ye[0];ye=ye[1];var mt=gt.split("_");k=2<=mt.length&&mt[1]=="type"?k+(gt+"="+ye+"&"):k+(gt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function Fx(c,d,f,g,C,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+k})}function Go(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Vx(c,f)+(g?" "+g:"")})}function Lx(c,d){c.info(function(){return"TIMEOUT: "+d})}La.prototype.info=function(){};function Vx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return tg(f)}catch{return d}}var _l={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},og;function El(){}T(El,ng),El.prototype.g=function(){return new XMLHttpRequest},El.prototype.i=function(){return{}},og=new El;function jr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new xa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bD}function bD(){this.i=null,this.g="",this.h=!1}var CD={},sg={};function ag(c,d,f){c.L=1,c.v=bl(nr(d)),c.m=f,c.P=!0,TD(c,null)}function TD(c,d){c.F=Date.now(),Il(c),c.A=nr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),UD(f.i,"t",g),c.C=0,f=c.j.J,c.h=new bD,c.g=ib(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Px(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(gD[0]=C.toString()),C=gD);for(var A=0;A<C.length;A++){var k=cD(f,C[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ka(),kx(c.i,c.u,c.A,c.l,c.R,c.m)}jr.prototype.ca=function(c){c=c.target;let d=this.M;d&&rr(c)==3?d.j():this.Y(c)},jr.prototype.Y=function(c){try{if(c==this.g)e:{let mt=rr(this.g);var d=this.g.Ba();let Qo=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||WD(this.g)))){this.J||mt!=4||d==7||(d==8||0>=Qo?ka(3):ka(2)),cg(this);var f=this.g.Z();this.X=f;t:if(SD(this)){var g=WD(this.g);c="";var C=g.length,A=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Va(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,Fx(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ct=this.g;if((Te=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Te)){var ye=Te;break t}}ye=null}if(f=ye)Go(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ug(this,f);else{this.o=!1,this.s=3,At(12),ji(this),Va(this);break e}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<k.length;)if(fn=jx(this,k),fn==sg){mt==4&&(this.s=4,At(14),f=!1),Go(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==CD){this.s=4,At(15),Go(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Go(this.i,this.l,fn,null),ug(this,fn);if(SD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||k.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)Go(this.i,this.l,k,"[Invalid Chunked Response]"),ji(this),Va(this);else if(0<k.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),gg(gt),gt.M=!0,At(11))}}else Go(this.i,this.l,k,null),ug(this,k);mt==4&&ji(this),this.o&&!this.J&&(mt==4?eb(this.j,this):(this.o=!1,Il(this)))}else nO(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ji(this),Va(this)}}}catch{}finally{}};function SD(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function jx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?sg:(f=Number(d.substring(f,g)),isNaN(f)?CD:(g+=1,g+f>d.length?sg:(d=d.slice(g,g+f),c.C=g+f,d)))}jr.prototype.cancel=function(){this.J=!0,ji(this)};function Il(c){c.S=Date.now()+c.I,AD(c,c.I)}function AD(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fa(m(c.ba,c),d)}function cg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Lx(this.i,this.A),this.L!=2&&(ka(),At(17)),ji(this),this.s=2,Va(this)):AD(this,this.S-c)};function Va(c){c.j.G==0||c.J||eb(c.j,c)}function ji(c){cg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,mD(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ug(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||lg(f.h,c))){if(!c.K&&lg(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Rl(f),Sl(f);else break e;pg(f),At(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fa(m(f.Za,f),6e3));if(1>=MD(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Bi(f,11)}else if((c.K||f.g==c)&&Rl(f),!W(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ye=C[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let gt=ye[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=ye[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let Qo=ye[5];Qo!=null&&typeof Qo=="number"&&0<Qo&&(g=1.5*Qo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let fn=c.g;if(fn){let Ml=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var A=g.h;A.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(dg(A,A.h),A.h=null))}if(g.D){let mg=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;mg&&(g.ya=mg,Ne(g.I,g.D,mg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=rb(g,g.J?g.ia:null,g.W),k.K){PD(g.h,k);var Te=k,ct=g.L;ct&&(Te.I=ct),Te.B&&(cg(Te),Il(Te)),g.g=k}else JD(g);0<f.i.length&&Al(f)}else ye[0]!="stop"&&ye[0]!="close"||Bi(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Bi(f,7):fg(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}ka(4)}catch{}}var Ux=class{constructor(c,d){this.g=c,this.map=d}};function RD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ND(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function MD(c){return c.h?1:c.g?c.g.size:0}function lg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function dg(c,d){c.g?c.g.add(d):c.h=d}function PD(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}RD.prototype.cancel=function(){if(this.i=xD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function xD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function Bx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function $x(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function OD(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=$x(c),g=Bx(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var kD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Ui(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ui){this.h=c.h,wl(this,c.j),this.o=c.o,this.g=c.g,Dl(this,c.s),this.l=c.l;var d=c.i,f=new Ba;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),FD(this,f),this.m=c.m}else c&&(d=String(c).match(kD))?(this.h=!1,wl(this,d[1]||"",!0),this.o=ja(d[2]||""),this.g=ja(d[3]||"",!0),Dl(this,d[4]),this.l=ja(d[5]||"",!0),FD(this,d[6]||"",!0),this.m=ja(d[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}Ui.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ua(d,LD,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ua(d,LD,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ua(f,f.charAt(0)=="/"?Gx:zx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ua(f,Kx)),c.join("")};function nr(c){return new Ui(c)}function wl(c,d,f){c.j=f?ja(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Dl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function FD(c,d,f){d instanceof Ba?(c.i=d,Qx(c.i,c.h)):(f||(d=Ua(d,Wx)),c.i=new Ba(d,c.h))}function Ne(c,d,f){c.i.set(d,f)}function bl(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ja(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ua(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,qx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function qx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var LD=/[#\/\?@]/g,zx=/[#\?:]/g,Gx=/[#\?]/g,Wx=/[#\?@]/g,Kx=/#/g;function Ba(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ur(c){c.g||(c.g=new Map,c.h=0,c.i&&Hx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ba.prototype,t.add=function(c,d){Ur(this),this.i=null,c=Wo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function VD(c,d){Ur(c),d=Wo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function jD(c,d){return Ur(c),d=Wo(c,d),c.g.has(d)}t.forEach=function(c,d){Ur(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){Ur(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){Ur(this);let d=[];if(typeof c=="string")jD(this,c)&&(d=d.concat(this.g.get(Wo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Ur(this),this.i=null,c=Wo(this,c),jD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function UD(c,d,f){VD(c,d),0<f.length&&(c.i=null,c.g.set(Wo(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var C=A;k[g]!==""&&(C+="="+encodeURIComponent(String(k[g]))),c.push(C)}}return this.i=c.join("&")};function Wo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Qx(c,d){d&&!c.j&&(Ur(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(VD(this,g),UD(this,C,f))},c)),c.j=d}function Yx(c,d){let f=new La;if(a.Image){let g=new Image;g.onload=y(Br,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Br,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Br,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Br,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Zx(c,d){let f=new La,g=new AbortController,C=setTimeout(()=>{g.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Br(f,"TestPingServer: error",!1,d)})}function Br(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Jx(){this.g=new Ox}function Xx(c,d,f){let g=f||"";try{OD(c,function(C,A){let k=C;l(C)&&(k=tg(C)),d.push(g+A+"="+encodeURIComponent(k))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function $a(c){this.l=c.Ub||null,this.j=c.eb||!1}T($a,ng),$a.prototype.g=function(){return new Cl(this.l,this.j)},$a.prototype.i=(function(c){return function(){return c}})({});function Cl(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Cl,pt),t=Cl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,qa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;BD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function BD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ha(this):qa(this),this.readyState==3&&BD(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ha(this))},t.Qa=function(c){this.g&&(this.response=c,Ha(this))},t.ga=function(){this.g&&Ha(this)};function Ha(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $D(c){let d="";return we(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function hg(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=$D(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ne(c,d,f))}function xe(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(xe,pt);var eO=/^https?$/i,tO=["POST","PUT"];t=xe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():og.g(),this.v=this.o?yD(this.o):yD(og),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){HD(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tO,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{GD(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){HD(this,A)}};function HD(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,qD(c),Tl(c)}function qD(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Tl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tl(this,!0)),xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zD(this):this.bb())},t.bb=function(){zD(this)};function zD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||rr(c)!=4||c.Z()!=2)){if(c.u&&rr(c)==4)fD(c.Ea,0,c);else if(St(c,"readystatechange"),rr(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var C=String(c.D).match(kD)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!eO.test(C?C.toLowerCase():"")}f=g}if(f)St(c,"complete"),St(c,"success");else{c.m=6;try{var A=2<rr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",qD(c)}}finally{Tl(c)}}}}function Tl(c,d){if(c.g){GD(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||St(c,"ready");try{f.onreadystatechange=g}catch{}}}function GD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function rr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),xx(d)}};function WD(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function nO(c){let d={};c=(c.g&&2<=rr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(W(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function KD(c){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,c),this.cb=za("retryDelaySeedMs",1e4,c),this.Wa=za("forwardChannelMaxRetries",2,c),this.wa=za("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new RD(c&&c.concurrentRequestLimit),this.Da=new Jx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=KD.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){At(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=rb(this,null,this.W),Al(this)};function fg(c){if(QD(c),c.G==3){var d=c.U++,f=nr(c.I);if(Ne(f,"SID",c.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),Ga(c,f),d=new jr(c,c.j,d),d.L=2,d.v=bl(nr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=ib(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Il(d)}nb(c)}function Sl(c){c.g&&(gg(c),c.g.cancel(),c.g=null)}function QD(c){Sl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Rl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Al(c){if(!ND(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ra||aD(),Na||(Ra(),Na=!0),Gp.add(d,c),c.B=0}}function rO(c,d){return MD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fa(m(c.Ga,c,d),tb(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new jr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ZD(this,C,d),f=nr(this.I),Ne(f,"RID",c),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),Ga(this,f),A&&(this.O?d="headers="+encodeURIComponent(String($D(A)))+"&"+d:this.m&&hg(f,this.m,A)),dg(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,ag(C,f,null)):ag(C,f,d),this.G=2}}else this.G==3&&(c?YD(this,c):this.i.length==0||ND(this.h)||YD(this))};function YD(c,d){var f;d?f=d.l:f=c.U++;let g=nr(c.I);Ne(g,"SID",c.K),Ne(g,"RID",f),Ne(g,"AID",c.T),Ga(c,g),c.m&&c.o&&hg(g,c.m,c.o),f=new jr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ZD(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dg(c.h,f),ag(f,g,d)}function Ga(c,d){c.H&&we(c.H,function(f,g){Ne(d,g,f)}),c.l&&OD({},function(f,g){Ne(d,g,f)})}function ZD(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=C[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Te=!0;for(let ct=0;ct<f;ct++){let ye=C[ct].g,gt=C[ct].map;if(ye-=A,0>ye)A=Math.max(0,C[ct].g-100),Te=!1;else try{Xx(gt,k,"req"+ye+"_")}catch{g&&g(gt)}}if(Te){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function JD(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ra||aD(),Na||(Ra(),Na=!0),Gp.add(d,c),c.v=0}}function pg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fa(m(c.Fa,c),tb(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,XD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fa(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Sl(this),XD(this))};function gg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function XD(c){c.g=new jr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=nr(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),Ga(c,d),c.m&&c.o&&hg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=bl(nr(d)),f.m=null,f.P=!0,TD(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Sl(this),pg(this),At(19))};function Rl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function eb(c,d){var f=null;if(c.g==d){Rl(c),gg(c),c.g=null;var g=2}else if(lg(c.h,d))f=d.D,PD(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=vl(),St(g,new wD(g,f)),Al(c)}else JD(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&rO(c,d)||g==2&&pg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Bi(c,5);break;case 4:Bi(c,10);break;case 3:Bi(c,6);break;default:Bi(c,2)}}}function tb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Bi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Ui(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wl(g,"https"),bl(g),C?Yx(g.toString(),f):Zx(g.toString(),f)}else At(2);c.G=0,c.l&&c.l.sa(d),nb(c),QD(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function nb(c){if(c.G=0,c.ka=[],c.l){let d=xD(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function rb(c,d,f){var g=f instanceof Ui?nr(f):new Ui(f);if(g.g!="")d&&(g.g=d+"."+g.g),Dl(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Ui(null);g&&wl(A,g),d&&(A.g=d),C&&Dl(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",c.la),Ga(c,g),g}function ib(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new xe(new $a({eb:f})):new xe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ob(){}t=ob.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nl(){}Nl.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){pt.call(this),this.g=new KD(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!W(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ko(this)}T(zt,pt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){fg(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=tg(c),c=f);d.i.push(new Ux(d.Ya++,c)),d.G==3&&Al(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,fg(this.g),delete this.g,zt.aa.N.call(this)};function sb(c){rg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(sb,rg);function ab(){ig.call(this),this.status=1}T(ab,ig);function Ko(c){this.g=c}T(Ko,ob),Ko.prototype.ua=function(){St(this.g,"a")},Ko.prototype.ta=function(c){St(this.g,new sb(c))},Ko.prototype.sa=function(c){St(this.g,new ab)},Ko.prototype.ra=function(){St(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,OE=Mr.createWebChannelTransport=function(){return new Nl},xE=Mr.getStatEventTarget=function(){return vl()},PE=Mr.Event=Vi,Mf=Mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_l.NO_ERROR=0,_l.TIMEOUT=8,_l.HTTP_ERROR=6,Fu=Mr.ErrorCode=_l,DD.COMPLETE="complete",ME=Mr.EventType=DD,vD.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Js=Mr.WebChannel=vD,E4=Mr.FetchXmlHttpFactory=$a,xe.prototype.listenOnce=xe.prototype.L,xe.prototype.getLastError=xe.prototype.Ka,xe.prototype.getLastErrorCode=xe.prototype.Ba,xe.prototype.getStatus=xe.prototype.Z,xe.prototype.getResponseJson=xe.prototype.Oa,xe.prototype.getResponseText=xe.prototype.oa,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Ha,NE=Mr.XhrIo=xe}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});var yN="@firebase/firestore",vN="4.8.0";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var Ea="11.10.0";var Fo=new zn("@firebase/firestore");function Xs(){return Fo.logLevel}function j(t,...e){if(Fo.logLevel<=le.DEBUG){let n=e.map(bw);Fo.debug(`Firestore (${Ea}): ${t}`,...n)}}function Pr(t,...e){if(Fo.logLevel<=le.ERROR){let n=e.map(bw);Fo.error(`Firestore (${Ea}): ${t}`,...n)}}function Ni(t,...e){if(Fo.logLevel<=le.WARN){let n=e.map(bw);Fo.warn(`Firestore (${Ea}): ${t}`,...n)}}function bw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function H(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uM(t,r,n)}function uM(t,e,n){let r=`FIRESTORE (${Ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pr(r),new Error(r)}function Ie(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||uM(e,i,r)}function ee(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends en{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Yn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Vf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}},UE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},BE=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Vf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new st(e)}},$E=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},HE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $E(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function I4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function lM(){return new TextEncoder}var $u=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=I4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ue(t,e){return t<e?-1:t>e?1:0}function zE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ue(r,i);{let o=lM(),s=w4(o.encode(_N(t,n)),o.encode(_N(e,n)));return s!==0?s:ue(r,i)}}n+=r>65535?2:1}return ue(t.length,e.length)}function _N(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function w4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ue(t[n],e[n]);return ue(t.length,e.length)}function ua(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var EN="__name__",Uf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&H(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ue(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):zE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}},Pe=class t extends Uf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},D4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tn=class t extends Uf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return D4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EN}static keyField(){return new t([EN])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};function dM(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b4(t,e,n,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IN(t){if(!$.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wN(t){if($.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H(12329,{type:typeof t})}function Bf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=vp(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function C4(t,e){if(e<=0)throw new L(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ge(t,e){let n={typeString:t};return e&&(n.value=e),n}function tl(t,e){if(!hM(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}var DN=-62135596800,bN=1e6,We=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*bN);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<DN)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bN}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-DN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Ge("string",We._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};var ne=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new We(0,0))}static max(){return new t(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hu=-1,GE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};GE.UNKNOWN_ID=-1;function T4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Lo(i,$.empty(),e)}function S4(t){return new Lo(t.readTime,t.key,Hu)}var Lo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ne.min(),$.empty(),Hu)}static max(){return new t(ne.max(),$.empty(),Hu)}};function A4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}var R4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",WE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ia(t){return v(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==R4)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function N4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wa(t){return t.name==="IndexedDbTransactionError"}var Cw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),Tw=-1;function _p(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function M4(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var fM="";function P4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CN(e)),e=x4(t.get(n),e);return CN(e)}function x4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case fM:n+="";break;default:n+=o}}return n}function CN(t){return t+fM+""}var O4="remoteDocuments",pM="owner";var gM="mutationQueues";var mM="mutations";var yM="documentMutations",k4="remoteDocumentsV14";var vM="remoteDocumentGlobal";var _M="targets";var EM="targetDocuments";var IM="targetGlobal",wM="collectionParents";var DM="clientMetadata";var bM="bundles";var CM="namedQueries";var F4="indexConfiguration";var L4="indexState";var V4="indexEntries";var TM="documentOverlays";var j4="globals";var U4=[gM,mM,yM,O4,_M,pM,IM,EM,DM,vM,wM,bM,CM],wse=[...U4,TM],B4=[gM,mM,yM,k4,_M,pM,IM,EM,DM,vM,wM,bM,CM,TM],$4=B4,H4=[...$4,F4,L4,V4];var Dse=[...H4,j4];function TN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ho(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Le=class t{constructor(e,n){this.comparator=e,this.root=n||Zn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ra(this.root,e,this.comparator,!0)}},ra=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $f(this.data.getIterator())}getIteratorFrom(e){return new $f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},$f=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qn=class t{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(tn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Hf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ct=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ct.EMPTY_BYTE_STRING=new Ct("");var q4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(Ie(!!t,39018),typeof t=="string"){let e=0,n=q4.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}var AM="server_timestamp",RM="__type__",NM="__previous_value__",MM="__local_write_time__";function Sw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RM])===null||n===void 0?void 0:n.stringValue)===AM}function Ep(t){let e=t.mapValue.fields[NM];return Sw(e)?Ep(e):e}function zu(t){let e=xr(t.mapValue.fields[MM].timestampValue);return new We(e.seconds,e.nanos)}var KE=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},qf="(default)",zf=class t{constructor(e,n){this.projectId=e,this.database=n||qf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Aw="__type__",PM="__max__",Pf={mapValue:{fields:{__type__:{stringValue:PM}}}},Rw="__vector__",la="value";function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sw(t)?4:OM(t)?9007199254740991:xM(t)?10:11:H(28295,{value:t})}function er(t,e){if(t===e)return!0;let n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zu(t).isEqual(zu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xr(i.timestampValue),a=xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Or(i.bytesValue).isEqual(Or(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Me(i.geoPointValue.latitude)===Me(o.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Me(i.integerValue)===Me(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Me(i.doubleValue),a=Me(o.doubleValue);return s===a?qu(s)===qu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(TN(s)!==TN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!er(s[u],a[u])))return!1;return!0})(t,e);default:return H(52216,{left:t})}}function Gu(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function da(t,e){if(t===e)return 0;let n=Mi(t),r=Mi(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Me(o.integerValue||o.doubleValue),u=Me(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return SN(t.timestampValue,e.timestampValue);case 4:return SN(zu(t),zu(e));case 5:return zE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Or(o),u=Or(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ue(a[l],u[l]);if(h!==0)return h}return ue(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ue(Me(o.latitude),Me(s.latitude));return a!==0?a:ue(Me(o.longitude),Me(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return AN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[la])===null||a===void 0?void 0:a.arrayValue,T=(u=m[la])===null||u===void 0?void 0:u.arrayValue,R=ue(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:AN(y,T)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Pf.mapValue&&s===Pf.mapValue)return 0;if(o===Pf.mapValue)return 1;if(s===Pf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=zE(u[p],h[p]);if(m!==0)return m;let y=da(a[u[p]],l[h[p]]);if(y!==0)return y}return ue(u.length,h.length)})(t.mapValue,e.mapValue);default:throw H(23264,{le:n})}}function SN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);let n=xr(t),r=xr(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function AN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=da(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function ha(t){return QE(t)}function QE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=xr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Or(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=QE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${QE(n.fields[s])}`;return i+"}"})(t.mapValue):H(61005,{value:t})}function kf(t){switch(Mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ep(t);return e?16+kf(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+kf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ho(r.fields,(o,s)=>{i+=o.length+kf(s)}),i})(t.mapValue);default:throw H(13486,{value:t})}}function RN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function YE(t){return!!t&&"integerValue"in t}function Nw(t){return!!t&&"arrayValue"in t}function NN(t){return!!t&&"nullValue"in t}function MN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ff(t){return!!t&&"mapValue"in t}function xM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Aw])===null||n===void 0?void 0:n.stringValue)===Rw}function Vu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PM}var Cse={mapValue:{fields:{[Aw]:{stringValue:Rw},[la]:{arrayValue:{}}}}};var Sn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ff(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(n)}setAll(e){let n=tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Vu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ff(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ff(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ho(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Vu(this.value))}};function kM(t){let e=[];return Ho(t.fields,(n,r)=>{let i=new tn([n]);if(Ff(r)){let o=kM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qn(e)}var An=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fa=class{constructor(e,n){this.position=e,this.inclusive=n}};function PN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=da(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}var Vo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function z4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Gf=class{},ze=class t extends Gf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new JE(e,n,r):n==="array-contains"?new tI(e,r):n==="in"?new nI(e,r):n==="not-in"?new rI(e,r):n==="array-contains-any"?new iI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XE(e,r):new eI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(da(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rn=class t extends Gf{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return FM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function FM(t){return t.op==="and"}function LM(t){return G4(t)&&FM(t)}function G4(t){for(let e of t.filters)if(e instanceof Rn)return!1;return!0}function ZE(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(LM(t))return t.filters.map(e=>ZE(e)).join(",");{let e=t.filters.map(n=>ZE(n)).join(",");return`${t.op}(${e})`}}function VM(t,e){return t instanceof ze?(function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)})(t,e):t instanceof Rn?(function(r,i){return i instanceof Rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&VM(s,i.filters[a]),!0):!1})(t,e):void H(19439)}function jM(t){return t instanceof ze?(function(n){return`${n.field.canonicalString()} ${n.op} ${ha(n.value)}`})(t):t instanceof Rn?(function(n){return n.op.toString()+" {"+n.getFilters().map(jM).join(" ,")+"}"})(t):"Filter"}var JE=class extends ze{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},XE=class extends ze{constructor(e,n){super(e,"in",n),this.keys=UM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},eI=class extends ze{constructor(e,n){super(e,"not-in",n),this.keys=UM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function UM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var tI=class extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Nw(n)&&Gu(n.arrayValue,this.value)}},nI=class extends ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}},rI=class extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gu(this.value.arrayValue,n)}},iI=class extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Nw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gu(this.value.arrayValue,r))}};var oI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function ON(t,e=null,n=[],r=[],i=null,o=null,s=null){return new oI(t,e,n,r,i,o,s)}function Mw(t){let e=ee(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ZE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),_p(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ha(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ha(r)).join(",")),e.Pe=n}return e.Pe}function Pw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xN(t.startAt,e.startAt)&&xN(t.endAt,e.endAt)}function sI(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Pi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function W4(t,e,n,r,i,o,s,a){return new Pi(t,e,n,r,i,o,s,a)}function BM(t){return new Pi(t)}function kN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $M(t){return t.collectionGroup!==null}function ju(t){let e=ee(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new at(tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Vo(o,r))}),n.has(tn.keyField().canonicalString())||e.Te.push(new Vo(tn.keyField(),r))}return e.Te}function Jn(t){let e=ee(t);return e.Ie||(e.Ie=K4(e,ju(t))),e.Ie}function K4(t,e){if(t.limitType==="F")return ON(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vo(i.field,o)});let n=t.endAt?new fa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fa(t.startAt.position,t.startAt.inclusive):null;return ON(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function aI(t,e){let n=t.filters.concat([e]);return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wf(t,e,n){return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ip(t,e){return Pw(Jn(t),Jn(e))&&t.limitType===e.limitType}function HM(t){return`${Mw(Jn(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jM(i)).join(", ")}]`),_p(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ha(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ha(i)).join(",")),`Target(${r})`})(Jn(t))}; limitType=${t.limitType})`}function wp(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of ju(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=PN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,ju(r),i)||r.endAt&&!(function(s,a,u){let l=PN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,ju(r),i))})(t,e)}function Q4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qM(t){return(e,n)=>{let r=!1;for(let i of ju(t)){let o=Y4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Y4(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?da(u,l):H(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:t.dir})}}var kr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return SM(this.inner)}size(){return this.innerSize}};var Z4=new Le($.comparator);function Fr(){return Z4}var zM=new Le($.comparator);function Lu(...t){let e=zM;for(let n of t)e=e.insert(n.key,n);return e}function GM(t){let e=zM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xo(){return Uu()}function WM(){return Uu()}function Uu(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}var J4=new Le($.comparator),X4=new at($.comparator);function fe(...t){let e=X4;for(let n of t)e=e.add(n);return e}var eq=new at(ue);function tq(){return eq}function xw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function KM(t){return{integerValue:""+t}}function nq(t,e){return M4(e)?KM(e):xw(t,e)}var pa=class{constructor(){this._=void 0}};function rq(t,e,n){return t instanceof ga?(function(i,o){let s={fields:{[RM]:{stringValue:AM},[MM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sw(o)&&(o=Ep(o)),o&&(s.fields[NM]=o),{mapValue:s}})(n,e):t instanceof jo?YM(t,e):t instanceof Uo?ZM(t,e):(function(i,o){let s=QM(i,o),a=FN(s)+FN(i.Ee);return YE(s)&&YE(i.Ee)?KM(a):xw(i.serializer,a)})(t,e)}function iq(t,e,n){return t instanceof jo?YM(t,e):t instanceof Uo?ZM(t,e):n}function QM(t,e){return t instanceof ma?(function(r){return YE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ga=class extends pa{},jo=class extends pa{constructor(e){super(),this.elements=e}};function YM(t,e){let n=JM(e);for(let r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}var Uo=class extends pa{constructor(e){super(),this.elements=e}};function ZM(t,e){let n=JM(e);for(let r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}var ma=class extends pa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function FN(t){return Me(t.integerValue||t.doubleValue)}function JM(t){return Nw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oq(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof jo&&i instanceof jo||r instanceof Uo&&i instanceof Uo?ua(r.elements,i.elements,er):r instanceof ma&&i instanceof ma?er(r.Ee,i.Ee):r instanceof ga&&i instanceof ga})(t.transform,e.transform)}var cI=class{constructor(e,n){this.version=e,this.transformResults=n}},ko=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ya=class{};function XM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kf(t.key,ko.none()):new Bo(t.key,t.data,ko.none());{let n=t.data,r=Sn.empty(),i=new at(tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(t.key,r,new Qn(i.toArray()),ko.none())}}function sq(t,e,n){t instanceof Bo?(function(i,o,s){let a=i.value.clone(),u=VN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Lr?(function(i,o,s){if(!Lf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=VN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(eP(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Bu(t,e,n,r){return t instanceof Bo?(function(o,s,a,u){if(!Lf(o.precondition,s))return a;let l=o.value.clone(),h=jN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Lr?(function(o,s,a,u){if(!Lf(o.precondition,s))return a;let l=jN(o.fieldTransforms,u,s),h=s.data;return h.setAll(eP(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Lf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function aq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=QM(r.transform,i||null);o!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,o))}return n||null}function LN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ua(r,i,(o,s)=>oq(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Bo=class extends ya{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends ya{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function eP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function VN(t,e,n){let r=new Map;Ie(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,iq(s,a,n[i]))}return r}function jN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,rq(o,s,e))}return r}var Kf=class extends ya{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uI=class extends ya{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&sq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Bu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=WM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=XM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(n,r)=>LN(n,r))&&ua(this.baseMutations,e.baseMutations,(n,r)=>LN(n,r))}},dI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return J4})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var hI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var He,me;function cq(t){switch(t){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:t})}}function tP(t){if(t===void 0)return Pr("GRPC error has no .code"),N.UNKNOWN;switch(t){case He.OK:return N.OK;case He.CANCELLED:return N.CANCELLED;case He.UNKNOWN:return N.UNKNOWN;case He.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case He.INTERNAL:return N.INTERNAL;case He.UNAVAILABLE:return N.UNAVAILABLE;case He.UNAUTHENTICATED:return N.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case He.NOT_FOUND:return N.NOT_FOUND;case He.ALREADY_EXISTS:return N.ALREADY_EXISTS;case He.PERMISSION_DENIED:return N.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case He.ABORTED:return N.ABORTED;case He.OUT_OF_RANGE:return N.OUT_OF_RANGE;case He.UNIMPLEMENTED:return N.UNIMPLEMENTED;case He.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:t})}}(me=He||(He={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var UN=null;var uq=new Nr([4294967295,4294967295],0);function BN(t){let e=lM().encode(t),n=new RE;return n.update(e),new Uint8Array(n.digest())}function $N(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nr([n,r],0),new Nr([i,o],0)]}var pI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Nr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Nr.fromNumber(r)));return i.compare(uq)===1&&(i=new Nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=BN(e),[r,i]=$N(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=BN(e),[r,i]=$N(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ne.min(),i,new Le(ue),Fr(),fe())}},Wu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,fe(),fe(),fe())}};var oa=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Yf=class{constructor(e,n){this.targetId=e,this.De=n}},Zf=class{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Jf=class{constructor(){this.ve=0,this.Ce=HN(),this.Fe=Ct.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new Wu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=HN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},gI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Fr(),this.je=xf(),this.Je=xf(),this.He=new Le(ue)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(sI(o))if(r===0){let s=new $(o.path);this.Xe(n,s,An.newNoDocument(s,ne.min()))}else Ie(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}UN?.ct((function(h,p,m,y,T){var R,M,F,W,Z,Ce;let Tt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},we=p.unchangedNames;return we&&(Tt.bloomFilter={applied:T===0,hashCount:(R=we?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(W=(F=(M=we?.bits)===null||M===void 0?void 0:M.bitmap)===null||F===void 0?void 0:F.length)!==null&&W!==void 0?W:0,padding:(Ce=(Z=we?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&Ce!==void 0?Ce:0,mightContain:D=>{var _;return(_=y?.mightContain(D))!==null&&_!==void 0&&_}}),Tt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Or(r).toUint8Array()}catch(u){if(u instanceof Hf)return Ni("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new pI(s,i,o)}catch(u){return Ni(u instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&sI(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,An.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Qf(e,n,this.He,this.ze,r);return this.ze=Fr(),this.je=xf(),this.Je=xf(),this.He=new Le(ue),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Jf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new at(ue),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new at(ue),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Jf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function xf(){return new Le($.comparator)}function HN(){return new Le($.comparator)}var lq={asc:"ASCENDING",desc:"DESCENDING"},dq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hq={and:"AND",or:"OR"},mI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function yI(t,e){return t.useProto3Json||_p(e)?e:{value:e}}function Xf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fq(t,e){return Xf(t,e.toTimestamp())}function Xn(t){return Ie(!!t,49232),ne.fromTimestamp((function(n){let r=xr(n);return new We(r.seconds,r.nanos)})(t))}function Ow(t,e){return vI(t,e).canonicalString()}function vI(t,e){let n=(function(i){return new Pe(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function rP(t){let e=Pe.fromString(t);return Ie(cP(e),10190,{key:e.toString()}),e}function _I(t,e){return Ow(t.databaseId,e.path)}function kE(t,e){let n=rP(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(oP(n))}function iP(t,e){return Ow(t.databaseId,e)}function pq(t){let e=rP(t);return e.length===4?Pe.emptyPath():oP(e)}function EI(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oP(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qN(t,e,n){return{name:_I(t,e),fields:n.value.mapValue.fields}}function gq(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string",58123),Ct.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ct.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:tP(l.code);return new L(h,l.message||"")})(s);n=new Zf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kE(t,r.document.name),o=Xn(r.document.updateTime),s=r.document.createTime?Xn(r.document.createTime):ne.min(),a=new Sn({mapValue:{fields:r.document.fields}}),u=An.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new oa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kE(t,r.document),o=r.readTime?Xn(r.readTime):ne.min(),s=An.newNoDocument(i,o),a=r.removedTargetIds||[];n=new oa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kE(t,r.document),o=r.removedTargetIds||[];n=new oa([],o,i,null)}else{if(!("filter"in e))return H(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new fI(i,o),a=r.targetId;n=new Yf(a,s)}}return n}function mq(t,e){let n;if(e instanceof Bo)n={update:qN(t,e.key,e.value)};else if(e instanceof Kf)n={delete:_I(t,e.key)};else if(e instanceof Lr)n={update:qN(t,e.key,e.data),updateMask:Cq(e.fieldMask)};else{if(!(e instanceof uI))return H(16599,{Rt:e.type});n={verify:_I(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ga)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ma)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:fq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(t,e.precondition)),n}function yq(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Xn(i.updateTime):Xn(o);return s.isEqual(ne.min())&&(s=Xn(o)),new cI(s,i.transformResults||[])})(n,e))):[]}function vq(t,e){return{documents:[iP(t,e.path)]}}function _q(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iP(t,i);let o=(function(l){if(l.length!==0)return aP(Rn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:ta(m.field),direction:wq(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=yI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function Eq(t){let e=pq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ie(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=sP(p);return m instanceof Rn&&LM(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(T){return new Vo(na(T.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,_p(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new fa(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new fa(y,m)})(n.endAt)),W4(e,i,s,o,a,"F",u,l)}function Iq(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=na(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=na(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=na(n.unaryFilter.field);return ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=na(n.unaryFilter.field);return ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ze.create(na(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Rn.create(n.compositeFilter.filters.map(r=>sP(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(n.compositeFilter.op))})(t):H(30097,{filter:t})}function wq(t){return lq[t]}function Dq(t){return dq[t]}function bq(t){return hq[t]}function ta(t){return{fieldPath:t.canonicalString()}}function na(t){return tn.fromServerFormat(t.fieldPath)}function aP(t){return t instanceof ze?(function(n){if(n.op==="=="){if(MN(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NAN"}};if(NN(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MN(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NAN"}};if(NN(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(n.field),op:Dq(n.op),value:n.value}}})(t):t instanceof Rn?(function(n){let r=n.getFilters().map(i=>aP(i));return r.length===1?r[0]:{compositeFilter:{op:bq(n.op),filters:r}}})(t):H(54877,{filter:t})}function Cq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ku=class t{constructor(e,n,r,i,o=ne.min(),s=ne.min(),a=Ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var II=class{constructor(e){this.gt=e}};function Tq(t){let e=Eq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wf(e,e.limit,"L"):e}var ep=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Me(e.integerValue));else if("doubleValue"in e){let r=Me(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),qu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=xr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Or(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?OM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):xM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):H(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=la,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Me(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};ep.Ut=new ep;var wI=class{constructor(){this.Dn=new DI}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Lo.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Lo.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},DI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Pe.comparator)).toArray()}};var Tse=new Uint8Array(0);var zN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uP=41943040,hn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(uP,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);var Qu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var GN="LruGarbageCollector",Sq=1048576;function WN([t,e],[n,r]){let i=ue(t,n);return i===0?ue(e,r):i}var bI=class{constructor(e){this.Tr=e,this.buffer=new at(WN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();WN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},CI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(GN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){wa(n)?j(GN,"Ignoring IndexedDB error during garbage collection: ",n):yield Ia(n)}yield this.Rr(3e5)}))}},TI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(Cw.ue);let r=new bI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(zN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Xs()<=le.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Aq(t,e){return new TI(t,e)}var SI=class{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var AI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var RI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bu(r.mutation,i,Qn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){let i=xo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Lu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Fr(),s=Uu(),a=(function(){return Uu()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Bu(h.mutation,l,h.mutation.getFieldMask(),We.now())):s.set(l.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new AI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Uu(),i=new Le((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Qn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=WM();h.forEach(m=>{if(!o.has(m)){let y=XM(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$M(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(xo()),a=Hu,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:GM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Lu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,m){return new Pi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,An.newInvalidDocument(h)))});let a=Lu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Bu(h.mutation,l,Qn.empty(),We.now()),wp(n,l)&&(a=a.insert(u,l))}),a})}};var NI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:Tq(i.bundledQuery),readTime:Xn(i.readTime)}})(n)),P.resolve()}};var MI=class{constructor(){this.overlays=new Le($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=xo();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=xo(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Le((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=xo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=xo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hI(n,r));let o=this.kr.get(n);o===void 0&&(o=fe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var PI=class{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Yu=class{constructor(){this.qr=new at(qe.Qr),this.$r=new at(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new Pe([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new Pe([])),r=new qe(n,e),i=new qe(n,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new qe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||ue(e.Hr,n.Hr)}static Ur(e,n){return ue(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var xI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new at(qe.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new lI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Tw:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ue);return n.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new qe(new $(o),0),a=new at(ue);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new qe(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var OI=class{constructor(e){this.ni=e,this.docs=(function(){return new Le($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():An.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Fr(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||A4(S4(h),r)<=0||(i.has(h.key)||wp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){H(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kI(this)}getSize(e){return P.resolve(this.size)}},kI=class extends SI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var FI=class{constructor(e){this.persistence=e,this.ii=new kr(n=>Mw(n),Pw),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new Yu,this.targetCount=0,this._i=Qu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Qu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var tp=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Cw(0),this.ci=!1,this.ci=!0,this.li=new PI,this.referenceDelegate=e(this),this.hi=new FI(this),this.indexManager=new wI,this.remoteDocumentCache=(function(i){return new OI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new II(n),this.Ti=new NI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new LI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},LI=class extends WE{constructor(e){super(),this.currentSequenceNumber=e}},VI=class t{constructor(e){this.persistence=e,this.Ai=new Yu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw H(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},np=class t{constructor(e,n){this.persistence=e,this.gi=new kr(r=>P4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Aq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kf(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var jI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=fe(),i=fe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var UI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var BI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return xA()?8:N4(it())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new UI;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Xs()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Xs()<=le.DEBUG&&j("QueryEngine","Query:",ea(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xs()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):P.resolve())}ps(e,n){if(kN(n))return P.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Wf(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,Wf(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return kN(n)||i.isEqual(ne.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Xs()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ea(n)),this.vs(e,s,n,T4(i,Hu)).next(a=>a))})}bs(e,n){let r=new at(qM(e));return n.forEach((i,o)=>{wp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Xs()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ea(n)),this.gs.getDocumentsMatchingQuery(e,n,Lo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var kw="LocalStore",Rq=3e8,$I=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Le(ue),this.Ms=new kr(o=>Mw(o),Pw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Nq(t,e,n,r){return new $I(t,e,n,r)}function lP(t,e){return v(this,null,function*(){let n=ee(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Mq(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(R=>{let M=l.docVersions.get(T);Ie(M!==null,48541),R.version.compareTo(M)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function dP(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Pq(t,e){let n=ee(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ct.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,M,F){return R.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Rq?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=Fr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(xq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ne.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function xq(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Fr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(kw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Oq(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Tw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kq(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ku(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function HI(t,e,n){return v(this,null,function*(){let r=ee(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!wa(s))throw s;j(kw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function KN(t,e,n){let r=ee(t),i=ne.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ee(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ne.min(),n?o:fe())).next(a=>(Fq(r,Q4(e),a),{documents:a,qs:o})))}function Fq(t,e,n){let r=t.xs.get(e)||ne.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var rp=class{constructor(){this.activeTargetIds=tq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qI=class{constructor(){this.Fo=new rp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zI=class{xo(e){}shutdown(){}};var QN="ConnectivityMonitor",ip=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(QN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(QN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Of=null;function GI(){return Of===null?Of=(function(){return 268435456+Math.round(2147483648*Math.random())})():Of++,"0x"+Of.toString(16)}var FE="RestConnection",Lq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},WI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===qf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=GI(),a=this.Go(e,n.toUriEncodedString());j(FE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=gi(l);return this.jo(e,a,u,r,h).then(p=>(j(FE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ni(FE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=Lq[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var KI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var bt="WebChannelConnection",QI=class extends WI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=GI();return new Promise((a,u)=>{let l=new NE;l.setWithCredentials(!0),l.listenOnce(ME.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fu.NO_ERROR:let p=l.getResponseJson();j(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Fu.TIMEOUT:j(bt,`RPC '${e}' ${s} timed out`),u(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:let m=l.getStatus();if(j(bt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let R=(function(F){let W=F.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(W)>=0?W:N.UNKNOWN})(T.status);u(new L(R,T.message))}else u(new L(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(bt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(bt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=GI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=OE(),a=xE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(bt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,T=new KI({Ho:M=>{y?j(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(j(bt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(bt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),R=(M,F,W)=>{M.listen(F,Z=>{try{W(Z)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return R(p,Js.EventType.OPEN,()=>{y||(j(bt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),R(p,Js.EventType.CLOSE,()=>{y||(y=!0,j(bt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),R(p,Js.EventType.ERROR,M=>{y||(y=!0,Ni(bt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),T.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,Js.EventType.MESSAGE,M=>{var F;if(!y){let W=M.data[0];Ie(!!W,16349);let Z=W,Ce=Z?.error||((F=Z[0])===null||F===void 0?void 0:F.error);if(Ce){j(bt,`RPC '${e}' stream ${i} received error:`,Ce);let Tt=Ce.status,we=(function(I){let w=He[I];if(w!==void 0)return tP(w)})(Tt),D=Ce.message;we===void 0&&(we=N.INTERNAL,D="Unknown error status: "+Tt+" with message "+Ce.message),y=!0,T.__(new L(we,D)),p.close()}else j(bt,`RPC '${e}' stream ${i} received:`,W),T.a_(W)}}),R(a,PE.STAT_EVENT,M=>{M.stat===Mf.PROXY?j(bt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Mf.NOPROXY&&j(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function LE(){return typeof document<"u"?document:null}function Dp(t){return new mI(t,!0)}var op=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var YN="PersistentStream",sp=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new op(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(YN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(YN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},YI=class extends sp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=gq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Xn(s.readTime):ne.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=EI(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=sI(u)?{documents:vq(o,u)}:{query:_q(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nP(o,s.resumeToken);let l=yI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Xf(o,s.snapshotVersion.toTimestamp());let l=yI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Iq(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=EI(this.serializer),n.removeTarget=e,this.k_(n)}},ZI=class extends sp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=yq(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=EI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>mq(this.serializer,r))};this.k_(n)}};var JI=class{},XI=class extends JI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,vI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,vI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},ew=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pr(n),this._a=!1):j("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var $o="RemoteStore",tw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){qo(this)&&(j($o,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=ee(u);l.Ia.add(4),yield nl(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield bp(l)})})(this))}))}),this.Aa=new ew(r,i)}};function bp(t){return v(this,null,function*(){if(qo(t))for(let e of t.da)yield e(!0)})}function nl(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function hP(t,e){let n=ee(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),jw(n)?Vw(n):Da(n).x_()&&Lw(n,e))}function Fw(t,e){let n=ee(t),r=Da(n);n.Ta.delete(e),r.x_()&&fP(n,e),n.Ta.size===0&&(r.x_()?r.B_():qo(n)&&n.Aa.set("Unknown"))}function Lw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Da(t).H_(e)}function fP(t,e){t.Ra.$e(e),Da(t).Y_(e)}function Vw(t){t.Ra=new gI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Da(t).start(),t.Aa.aa()}function jw(t){return qo(t)&&!Da(t).M_()&&t.Ta.size>0}function qo(t){return ee(t).Ia.size===0}function pP(t){t.Ra=void 0}function Vq(t){return v(this,null,function*(){t.Aa.set("Online")})}function jq(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{Lw(t,e)})})}function Uq(t,e){return v(this,null,function*(){pP(t),jw(t)?(t.Aa.la(e),Vw(t)):t.Aa.set("Unknown")})}function Bq(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof Zf&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){j($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ap(t,r)}else if(e instanceof oa?t.Ra.Ye(e):e instanceof Yf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ne.min()))try{let r=yield dP(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),fP(o,u);let p=new Ku(h.target,u,l,h.sequenceNumber);Lw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){j($o,"Failed to raise snapshot:",r),yield ap(t,r)}})}function ap(t,e,n){return v(this,null,function*(){if(!wa(e))throw e;t.Ia.add(1),yield nl(t),t.Aa.set("Offline"),n||(n=()=>dP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){j($o,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield bp(t)}))})}function gP(t,e){return e().catch(n=>ap(t,n,e))}function Cp(t){return v(this,null,function*(){let e=ee(t),n=xi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Tw;for(;$q(e);)try{let i=yield Oq(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Hq(e,i)}catch(i){yield ap(e,i)}mP(e)&&yP(e)})}function $q(t){return qo(t)&&t.Pa.length<10}function Hq(t,e){t.Pa.push(e);let n=xi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function mP(t){return qo(t)&&!xi(t).M_()&&t.Pa.length>0}function yP(t){xi(t).start()}function qq(t){return v(this,null,function*(){xi(t).na()})}function zq(t){return v(this,null,function*(){let e=xi(t);for(let n of t.Pa)e.X_(n.mutations)})}function Gq(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=dI.from(r,e,n);yield gP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Cp(t)})}function Wq(t,e){return v(this,null,function*(){e&&xi(t).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return cq(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();xi(r).N_(),yield gP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Cp(r)}})})(t,e)),mP(t)&&yP(t)})}function ZN(t,e){return v(this,null,function*(){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),j($o,"RemoteStore received new credentials");let r=qo(n);n.Ia.add(3),yield nl(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield bp(n)})}function Kq(t,e){return v(this,null,function*(){let n=ee(t);e?(n.Ia.delete(2),yield bp(n)):e||(n.Ia.add(2),yield nl(n),n.Aa.set("Unknown"))})}function Da(t){return t.Va||(t.Va=(function(n,r,i){let o=ee(n);return o.ia(),new YI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Vq.bind(null,t),e_:jq.bind(null,t),n_:Uq.bind(null,t),J_:Bq.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),jw(t)?Vw(t):t.Aa.set("Unknown")):(yield t.Va.stop(),pP(t))}))),t.Va}function xi(t){return t.ma||(t.ma=(function(n,r,i){let o=ee(n);return o.ia(),new ZI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:qq.bind(null,t),n_:Wq.bind(null,t),ea:zq.bind(null,t),ta:Gq.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield Cp(t)):(yield t.ma.stop(),t.Pa.length>0&&(j($o,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var nw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Uw(t,e){if(Pr("AsyncQueue",`${e}: ${t}`),wa(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}var cp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Lu(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var up=class{constructor(){this.fa=new Le($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):H(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},va=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,cp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var rw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},iw=class{constructor(){this.queries=JN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ee(n),o=i.queries;i.queries=JN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function JN(){return new kr(t=>HM(t),Ip)}function Qq(t,e){return v(this,null,function*(){let n=ee(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new rw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Uw(s,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Bw(n)})}function Yq(t,e){return v(this,null,function*(){let n=ee(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Zq(t,e){let n=ee(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Bw(n)}function Jq(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function Bw(t){t.Da.forEach(e=>{e.next()})}var ow,XN;(XN=ow||(ow={})).Fa="default",XN.Cache="cache";var sw=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ow.Cache}};var lp=class{constructor(e){this.key=e}},dp=class{constructor(e){this.key=e}},aw=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=qM(e),this.eu=new cp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new up,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=wp(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?T!==R&&(r.track({type:3,doc:y}),M=!0):this.iu(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,T){let R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{At:M})}};return R(y)-R(T)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new va(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new up,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new dp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new lp(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return va.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},$w="SyncEngine",cw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},uw=class{constructor(e){this.key=e,this.lu=!1}},lw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new kr(a=>HM(a),Ip),this.Tu=new Map,this.Iu=new Set,this.du=new Le($.comparator),this.Eu=new Map,this.Au=new Yu,this.Ru={},this.Vu=new Map,this.mu=Qu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Xq(t,e,n=!0){return v(this,null,function*(){let r=DP(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield vP(r,e,n,!0),i})}function ez(t,e){return v(this,null,function*(){let n=DP(t);yield vP(n,e,!0,!1)})}function vP(t,e,n,r){return v(this,null,function*(){let i=yield kq(t.localStore,Jn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield tz(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&hP(t.remoteStore,i),a})}function tz(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,m,y)=>(function(R,M,F,W){return v(this,null,function*(){let Z=M.view.nu(F);Z.Ds&&(Z=yield KN(R.localStore,M.query,!1).then(({documents:D})=>M.view.nu(D,Z)));let Ce=W&&W.targetChanges.get(M.targetId),Tt=W&&W.targetMismatches.get(M.targetId)!=null,we=M.view.applyChanges(Z,R.isPrimaryClient,Ce,Tt);return tM(R,M.targetId,we._u),we.snapshot})})(t,p,m,y);let o=yield KN(t.localStore,e,!0),s=new aw(e,o.qs),a=s.nu(o.documents),u=Wu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);tM(t,n,l._u);let h=new cw(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function nz(t,e,n){return v(this,null,function*(){let r=ee(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Ip(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield HI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Fw(r.remoteStore,i.targetId),dw(r,i.targetId)}).catch(Ia))):(dw(r,i.targetId),yield HI(r.localStore,i.targetId,!0))})}function rz(t,e){return v(this,null,function*(){let n=ee(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fw(n.remoteStore,r.targetId))})}function iz(t,e,n){return v(this,null,function*(){let r=dz(t);try{let i=yield(function(s,a){let u=ee(s),l=We.now(),h=a.reduce((y,T)=>y.add(T.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Fr(),R=fe();return u.Os.getEntries(y,h).next(M=>{T=M,T.forEach((F,W)=>{W.isValidDocument()||(R=R.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(M=>{p=M;let F=[];for(let W of a){let Z=aq(W,p.get(W.key).overlayedDocument);Z!=null&&F.push(new Lr(W.key,Z,kM(Z.value.mapValue),ko.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(M=>{m=M;let F=M.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,M.batchId,F)})}).then(()=>({batchId:m.batchId,changes:GM(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Le(ue)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield rl(r,i.changes),yield Cp(r.remoteStore)}catch(i){let o=Uw(i,"Failed to persist write");n.reject(o)}})}function _P(t,e){return v(this,null,function*(){let n=ee(t);try{let r=yield Pq(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ie(s.lu,14607):i.removedDocuments.size>0&&(Ie(s.lu,42227),s.lu=!1))}),yield rl(n,r,e)}catch(r){yield Ia(r)}})}function eM(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&Bw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oz(t,e,n){return v(this,null,function*(){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Le($.comparator);s=s.insert(o,An.newNoDocument(o,ne.min()));let a=fe().add(o),u=new Qf(ne.min(),new Map,new Le(ue),s,a);yield _P(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Hw(r)}else yield HI(r.localStore,e,!1).then(()=>dw(r,e,n)).catch(Ia)})}function sz(t,e){return v(this,null,function*(){let n=ee(t),r=e.batch.batchId;try{let i=yield Mq(n.localStore,e);IP(n,r,null),EP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield rl(n,i)}catch(i){yield Ia(i)}})}function az(t,e,n){return v(this,null,function*(){let r=ee(t);try{let i=yield(function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ie(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);IP(r,e,n),EP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield rl(r,i)}catch(i){yield Ia(i)}})}function EP(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function IP(t,e,n){let r=ee(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function dw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||wP(t,r)})}function wP(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(Fw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Hw(t))}function tM(t,e,n){for(let r of n)r instanceof lp?(t.Au.addReference(r.key,e),cz(t,r)):r instanceof dp?(j($w,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||wP(t,r.key)):H(19791,{yu:r})}function cz(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j($w,"New document in limbo: "+n),t.Iu.add(r),Hw(t))}function Hw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(Pe.fromString(e)),r=t.mu.next();t.Eu.set(r,new uw(n)),t.du=t.du.insert(n,r),hP(t.remoteStore,new Ku(Jn(BM(n.path)),r,"TargetPurposeLimboResolution",Cw.ue))}}function rl(t,e,n){return v(this,null,function*(){let r=ee(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=jI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!wa(p))throw p;j(kw,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),T=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(m,R)}}})})(r.localStore,o))})}function uz(t,e){return v(this,null,function*(){let n=ee(t);if(!n.currentUser.isEqual(e)){j($w,"User change. New user:",e.toKey());let r=yield lP(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(N.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rl(n,r.Bs)}})}function lz(t,e){let n=ee(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function DP(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_P.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oz.bind(null,e),e.hu.J_=Zq.bind(null,e.eventManager),e.hu.pu=Jq.bind(null,e.eventManager),e}function dz(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=az.bind(null,e),e}var bP=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Dp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Nq(this.persistence,new BI,n.initialUser,this.serializer)}Du(n){return new tp(VI.Vi,this.serializer)}bu(n){return new qI}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),hw=class extends bP{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ie(this.persistence.referenceDelegate instanceof np,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new CI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new tp(r=>np.Vi(r,n),this.serializer)}};var hz=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uz.bind(null,this.syncEngine),yield Kq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new iw})()}createDatastore(n){let r=Dp(n.databaseInfo.databaseId),i=(function(s){return new QI(s)})(n.databaseInfo);return(function(s,a,u,l){return new XI(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new tw(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>eM(this.syncEngine,r,0),(function(){return ip.C()?new ip:new zI})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let m=new lw(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield(function(o){return v(this,null,function*(){let s=ee(o);j($o,"RemoteStore shutting down."),s.Ia.add(5),yield nl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var fw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Oi="FirestoreClient",pw=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=$u.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){j(Oi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(Oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Uw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function VE(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j(Oi,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield lP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ni("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ni("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function nM(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield fz(t);j(Oi,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZN(e.remoteStore,i)),t._onlineComponents=e})}function fz(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Oi,"Using user provided OfflineComponentProvider");try{yield VE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ni("Error using user provided cache. Falling back to memory cache: "+n),yield VE(t,new bP)}}else j(Oi,"Using default OfflineComponentProvider"),yield VE(t,new hw(void 0));return t._offlineComponents})}function CP(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Oi,"Using user provided OnlineComponentProvider"),yield nM(t,t._uninitializedComponentsProvider._online)):(j(Oi,"Using default OnlineComponentProvider"),yield nM(t,new hz))),t._onlineComponents})}function pz(t){return CP(t).then(e=>e.syncEngine)}function gz(t){return v(this,null,function*(){let e=yield CP(t),n=e.eventManager;return n.onListen=Xq.bind(null,e.syncEngine),n.onUnlisten=nz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ez.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rz.bind(null,e.syncEngine),n})}function mz(t,e,n={}){let r=new Yn;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new fw({next:m=>{h.Ou(),s.enqueueAndForget(()=>Yq(o,p)),m.fromCache&&u.source==="server"?l.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new sw(a,h,{includeMetadataChanges:!0,ka:!0});return Qq(o,p)})(yield gz(t),t.asyncQueue,e,n,r)})),r.promise}function TP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var rM=new Map;var SP="firestore.googleapis.com",iM=!0,hp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SP,this.ssl=iM}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:iM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sq)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_a=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new jE;switch(r.type){case"firstParty":return new HE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=rM.get(n);r&&(j("ComponentProvider","Removing Datastore"),rM.delete(n),r.terminate())})(this),Promise.resolve()}};function AP(t,e,n,r={}){var i;t=Bf(t,_a);let o=gi(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(rf(`https://${u}`),of("Firestore",!0)),s.host!==SP&&s.host!==u&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!qn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=st.MOCK_USER;else{h=SA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new st(m)}t._authCredentials=new UE(new Vf(h,p))}}var ki=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ft=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tl(n,t._jsonSchema))return new t(e,r||null,new $(Pe.fromString(n.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Ge("string",Ft._jsonSchemaVersion),referencePath:Ge("string")};var Ti=class t extends ki{constructor(e,n,r){super(e,n,BM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function RP(t,e,...n){if(t=ht(t),dM("collection","path",e),t instanceof _a){let r=Pe.fromString(e,...n);return wN(r),new Ti(t,null,r)}{if(!(t instanceof Ft||t instanceof Ti))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return wN(r),new Ti(t.firestore,null,r)}}function NP(t,e,...n){if(t=ht(t),arguments.length===1&&(e=$u.newId()),dM("doc","path",e),t instanceof _a){let r=Pe.fromString(e,...n);return IN(r),new Ft(t,null,new $(r))}{if(!(t instanceof Ft||t instanceof Ti))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return IN(r),new Ft(t.firestore,t instanceof Ti?t.converter:null,new $(r))}}var oM="AsyncQueue",fp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new op(this,"async_queue_retry"),this.oc=()=>{let r=LE();r&&j(oM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=LE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=LE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Yn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!wa(e))throw e;j(oM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Pr("INTERNAL UNHANDLED ERROR: ",sM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=nw.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&H(47125,{hc:sM(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function sM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Zu=class extends _a{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fp(e),this._firestoreClient=void 0,yield e}})}};function MP(t,e){let n=typeof t=="object"?t:Co(),r=typeof t=="string"?t:e||qf,i=Ws(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=TA("firestore");o&&AP(i,...o)}return i}function PP(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yz(t),t._firestoreClient}function yz(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new KE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TP(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pw(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Si=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ct.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Si._jsonSchemaVersion="firestore/bytes/1.0",Si._jsonSchema={type:Ge("string",Si._jsonSchemaVersion),bytes:Ge("string")};var Ju=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pp=class{constructor(e){this._methodName=e}};var Ai=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(tl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Ge("string",Ai._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};var Ri=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ri._jsonSchemaVersion="firestore/vectorValue/1.0",Ri._jsonSchema={type:Ge("string",Ri._jsonSchemaVersion),vectorValues:Ge("object")};var vz=/^__.*__$/,gw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bo(e,this.data,n,this.fieldTransforms)}};function xP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ec:t})}}var mw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return gp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xP(this.Ec)&&vz.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},yw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dp(e)}Dc(e,n,r,i=!1){return new mw({Ec:e,methodName:n,bc:r,path:tn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function OP(t){let e=t._freezeSettings(),n=Dp(t._databaseId);return new yw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _z(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);LP("Data must be an object, but it was:",s,r);let a=kP(r,s),u,l;if(o.merge)u=new Qn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Iz(e,p,n);if(!s.contains(m))throw new L(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Dz(h,m)||h.push(m)}u=new Qn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new gw(new Sn(a),u,l)}function Ez(t,e,n,r=!1){return qw(n,t.Dc(r?4:3,e))}function qw(t,e){if(FP(t=ht(t)))return LP("Unsupported field value:",e,t),kP(t,e);if(t instanceof pp)return(function(r,i){if(!xP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=qw(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=We.fromDate(r);return{timestampValue:Xf(i.serializer,o)}}if(r instanceof We){let o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xf(i.serializer,o)}}if(r instanceof Ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Si)return{bytesValue:nP(i.serializer,r._byteString)};if(r instanceof Ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ow(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ri)return(function(s,a){return{mapValue:{fields:{[Aw]:{stringValue:Rw},[la]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return xw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${vp(r)}`)})(t,e)}function kP(t,e){let n={};return SM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,(r,i)=>{let o=qw(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function FP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Ai||t instanceof Si||t instanceof Ft||t instanceof pp||t instanceof Ri)}function LP(t,e,n){if(!FP(n)||!hM(n)){let r=vp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Iz(t,e,n){if((e=ht(e))instanceof Ju)return e._internalPath;if(typeof e=="string")return VP(t,e);throw gp("Field path arguments must be of type string or ",t,!1,void 0,n)}var wz=new RegExp("[~\\*/\\[\\]]");function VP(t,e,n){if(e.search(wz)>=0)throw gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ju(...e.split("."))._internalPath}catch{throw gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(N.INVALID_ARGUMENT,a+t+u)}function Dz(t,e){return t.some(n=>n.isEqual(e))}var mp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},vw=class extends mp{data(){return super.data()}};function Tp(t,e){return typeof e=="string"?VP(t,e):e instanceof Ju?e._internalPath:e._delegate._internalPath}function bz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xu=class{},el=class extends Xu{};function jP(t,e,...n){let r=[];e instanceof Xu&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof _w).length,a=o.filter(u=>u instanceof yp).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var yp=class t extends el{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return HP(e._query,n),new ki(e.firestore,e.converter,aI(e._query,n))}_parse(e){let n=OP(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){cM(p,h);let T=[];for(let R of p)T.push(aM(u,o,R));m={arrayValue:{values:T}}}else m=aM(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||cM(p,h),m=Ez(a,s,p,h==="in"||h==="not-in");return ze.create(l,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function UP(t,e,n){let r=e,i=Tp("where",t);return yp._create(i,r,n)}var _w=class t extends Xu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)HP(s,u),s=aI(s,u)})(e._query,n),new ki(e.firestore,e.converter,aI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ew=class t extends el{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(o,s)})(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Pi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function BP(t,e="asc"){let n=e,r=Tp("orderBy",t);return Ew._create(r,n)}var Iw=class t extends el{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ki(e.firestore,e.converter,Wf(e._query,this._limit,this._limitType))}};function $P(t){return C4("limit",t),Iw._create("limit",t,"F")}function aM(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$M(e)&&n.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Pe.fromString(n));if(!$.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return RN(t,new $(r))}if(n instanceof Ft)return RN(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vp(n)}.`)}function cM(t,e){if(!Array.isArray(t)||t.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HP(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ww=class{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ho(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[la].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Me(s.doubleValue));return new Ri(o)}convertGeoPoint(e){return new Ai(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ep(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){let n=xr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Pe.fromString(e);Ie(cP(r),9688,{name:e});let i=new zf(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||Pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Cz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ia=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sa=class t extends mp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new aa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};sa._jsonSchemaVersion="firestore/documentSnapshot/1.0",sa._jsonSchema={type:Ge("string",sa._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var aa=class extends sa{data(e={}){return super.data(e)}},ca=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new aa(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new aa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new aa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Tz(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$u.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Tz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:t})}}ca._jsonSchemaVersion="firestore/querySnapshot/1.0",ca._jsonSchema={type:Ge("string",ca._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var Dw=class extends ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}};function qP(t){t=Bf(t,ki);let e=Bf(t.firestore,Zu),n=PP(e),r=new Dw(e);return bz(t._query),mz(n,t._query).then(i=>new ca(e,r,t,i))}function zP(t,e){let n=Bf(t.firestore,Zu),r=NP(t),i=Cz(t.converter,e);return Sz(n,[_z(OP(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ko.exists(!1))]).then(()=>r)}function Sz(t,e){return(function(r,i){let o=new Yn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return iz(yield pz(r),i,o)})),o.promise})(PP(t),e)}(function(e,n=!0){(function(i){Ea=i})(yi),Cn(new kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Zu(new BE(r.getProvider("auth-internal")),new qE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Fe(yN,vN,e),Fe(yN,vN,"esm2017")})();var zo=class{constructor(e){return e}},GP="firestore",zw=class{constructor(){return Qs(GP)}};var Gw=new U("angularfire2.firestore-instances");function Az(t,e){let n=wu(GP,t,e);return n&&new zo(n)}function Rz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zo(r)}}var Nz={provide:zw,deps:[[new $t,Gw]]},Mz={provide:zo,useFactory:Az,deps:[[new $t,Gw],Tr]};function WP(t,...e){return Fe("angularfire",vi.full,"fst"),Kt([Mz,Nz,{provide:Gw,useFactory:Rz(t),multi:!0,deps:[De,Ze,_i,So,[new $t,ku],[new $t,Ys],...e]}])}var KP=ot(zP,!0,2);var Sp=ot(RP,!0,2);var Ww=ot(qP,!0);var QP=ot(MP,!0);var Kw=ot($P,!0,2);var Qw=ot(BP,!0,2),Yw=ot(jP,!0,2);var YP=ot(UP,!0,2);var ZP={production:!1,firebase:{apiKey:"your-api-key",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"your-sender-id",appId:"your-app-id"}};var sx=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ie(Rc),ie(gr))};static \u0275dir=Xe({type:t})}return t})(),xz=(()=>{class t extends sx{static \u0275fac=(()=>{let n;return function(i){return(n||(n=pr(t)))(i||t)}})();static \u0275dir=Xe({type:t,features:[un]})}return t})(),ax=new U("");var Oz={provide:ax,useExisting:gn(()=>Sa),multi:!0};function kz(){let t=ln()?ln().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Fz=new U(""),Sa=(()=>{class t extends sx{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ie(Rc),ie(gr),ie(Fz,8))};static \u0275dir=Xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Zt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[di([Oz]),un]})}return t})();function cx(t){return t==null||ux(t)===0}function ux(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var ll=new U(""),lx=new U(""),Lz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Vz(t){return cx(t.value)?{required:!0}:null}function jz(t){return cx(t.value)||Lz.test(t.value)?null:{email:!0}}function Uz(t){return e=>{let n=e.value?.length??ux(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function JP(t){return null}function dx(t){return t!=null}function hx(t){return ai(t)?Ae(t):t}function fx(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function px(t,e){return e.map(n=>n(t))}function Bz(t){return!t.validate}function gx(t){return t.map(e=>Bz(e)?e:n=>e.validate(n))}function $z(t){if(!t)return null;let e=t.filter(dx);return e.length==0?null:function(n){return fx(px(n,e))}}function eD(t){return t!=null?$z(gx(t)):null}function Hz(t){if(!t)return null;let e=t.filter(dx);return e.length==0?null:function(n){let r=px(n,e).map(hx);return jg(r).pipe(ae(fx))}}function tD(t){return t!=null?Hz(gx(t)):null}function XP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function qz(t){return t._rawValidators}function zz(t){return t._rawAsyncValidators}function Zw(t){return t?Array.isArray(t)?t:[t]:[]}function Rp(t,e){return Array.isArray(t)?t.includes(e):t===e}function ex(t,e){let n=Zw(e);return Zw(t).forEach(i=>{Rp(n,i)||n.push(i)}),n}function tx(t,e){return Zw(e).filter(n=>!Rp(t,n))}var Np=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ta=class extends Np{name;get formDirective(){return null}get path(){return null}},ul=class extends Np{_parent=null;name=null;valueAccessor=null},Mp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Gz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yae=J(O({},Gz),{"[class.ng-submitted]":"isSubmitted"}),kp=(()=>{class t extends Mp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ie(ul,2))};static \u0275dir=Xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&kc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[un]})}return t})(),Fp=(()=>{class t extends Mp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ie(Ta,10))};static \u0275dir=Xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&kc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[un]})}return t})();var il="VALID",Ap="INVALID",ba="PENDING",ol="DISABLED",Fi=class{},Pp=class extends Fi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},al=class extends Fi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},cl=class extends Fi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Ca=class extends Fi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Jw=class extends Fi{source;constructor(e){super(),this.source=e}},Xw=class extends Fi{source;constructor(e){super(),this.source=e}};function mx(t){return(Lp(t)?t.validators:t)||null}function Wz(t){return Array.isArray(t)?eD(t):t||null}function yx(t,e){return(Lp(e)?e.asyncValidators:t)||null}function Kz(t){return Array.isArray(t)?tD(t):t||null}function Lp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Qz(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")}function Yz(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new V(1002,"")})}var xp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dt(this.statusReactive)}set status(e){dt(()=>this.statusReactive.set(e))}_status=Ns(()=>this.statusReactive());statusReactive=_n(void 0);get valid(){return this.status===il}get invalid(){return this.status===Ap}get pending(){return this.status==ba}get disabled(){return this.status===ol}get enabled(){return this.status!==ol}errors;get pristine(){return dt(this.pristineReactive)}set pristine(e){dt(()=>this.pristineReactive.set(e))}_pristine=Ns(()=>this.pristineReactive());pristineReactive=_n(!0);get dirty(){return!this.pristine}get touched(){return dt(this.touchedReactive)}set touched(e){dt(()=>this.touchedReactive.set(e))}_touched=Ns(()=>this.touchedReactive());touchedReactive=_n(!1);get untouched(){return!this.touched}_events=new je;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ex(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ex(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tx(e,this._rawAsyncValidators))}hasValidator(e){return Rp(this._rawValidators,e)}hasAsyncValidator(e){return Rp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new cl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new cl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new al(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new al(!0,r))}markAsPending(e={}){this.status=ba;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ca(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(O({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ol,this.errors=null,this._forEachChild(i=>{i.disable(J(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pp(this.value,r)),this._events.next(new Ca(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=il,this._forEachChild(r=>{r.enable(J(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===il||this.status===ba)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pp(this.value,n)),this._events.next(new Ca(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(O({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ol:il}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ba,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=hx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ca(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Be,this.statusChanges=new Be}_calculateStatus(){return this._allControlsDisabled()?ol:this.errors?Ap:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ba)?ba:this._anyControlsHaveStatus(Ap)?Ap:il}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new al(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new cl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Wz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Kz(this._rawAsyncValidators)}},Op=class extends xp{constructor(e,n,r){super(mx(n),yx(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Yz(this,!0,e),Object.keys(e).forEach(r=>{Qz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var nD=new U("",{providedIn:"root",factory:()=>rD}),rD="always";function Zz(t,e){return[...e.path,t]}function vx(t,e,n=rD){_x(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Xz(t,e),t3(t,e),e3(t,e),Jz(t,e)}function nx(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Jz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function _x(t,e){let n=qz(t);e.validator!==null?t.setValidators(XP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=zz(t);e.asyncValidator!==null?t.setAsyncValidators(XP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();nx(e._rawValidators,i),nx(e._rawAsyncValidators,i)}function Xz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Ex(t,e)})}function e3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Ex(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Ex(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function t3(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function n3(t,e){t==null,_x(t,e)}function r3(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function i3(t){return Object.getPrototypeOf(t.constructor)===xz}function o3(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function s3(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Sa?n=o:i3(o)?r=o:i=o}),i||r||n||null}var a3={provide:Ta,useExisting:gn(()=>dl)},sl=Promise.resolve(),dl=(()=>{class t extends Ta{callSetDisabledState;get submitted(){return dt(this.submittedReactive)}_submitted=Ns(()=>this.submittedReactive());submittedReactive=_n(!1);_directives=new Set;form;ngSubmit=new Be;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Op({},eD(n),tD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){sl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),vx(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){sl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){sl.then(()=>{let r=this._findContainer(n.path),i=new Op({});n3(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){sl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){sl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),o3(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Jw(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new Xw(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ie(ll,10),ie(lx,10),ie(nD,8))};static \u0275dir=Xe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Zt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[di([a3]),un]})}return t})();function rx(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ix(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var c3=class extends xp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(mx(n),yx(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ix(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ix(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var u3={provide:ul,useExisting:gn(()=>hl)},ox=Promise.resolve(),hl=(()=>{class t extends ul{_changeDetectorRef;callSetDisabledState;control=new c3;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Be;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=s3(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),r3(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){vx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){ox.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&jc(r);ox.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Zz(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ie(Ta,9),ie(ll,10),ie(lx,10),ie(ax,10),ie(Vc,8),ie(nD,8))};static \u0275dir=Xe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[di([u3]),un,po]})}return t})();var Vp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();function l3(t){return typeof t=="number"?t:parseInt(t,10)}var iD=(()=>{class t{_validator=JP;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):JP,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Xe({type:t,features:[po]})}return t})();var d3={provide:ll,useExisting:gn(()=>fl),multi:!0};var fl=(()=>{class t extends iD{required;inputName="required";normalizeInput=jc;createValidator=n=>Vz;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=pr(t)))(i||t)}})();static \u0275dir=Xe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Pc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[di([d3]),un]})}return t})();var h3={provide:ll,useExisting:gn(()=>pl),multi:!0},pl=(()=>{class t extends iD{email;inputName="email";normalizeInput=jc;createValidator=n=>jz;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=pr(t)))(i||t)}})();static \u0275dir=Xe({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},standalone:!1,features:[di([h3]),un]})}return t})(),f3={provide:ll,useExisting:gn(()=>oD),multi:!0},oD=(()=>{class t extends iD{minlength;inputName="minlength";normalizeInput=n=>l3(n);createValidator=n=>Uz(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=pr(t)))(i||t)}})();static \u0275dir=Xe({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Pc("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[di([f3]),un]})}return t})();var p3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=si({type:t});static \u0275inj=ur({})}return t})();var jp=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:nD,useValue:n.callSetDisabledState??rD}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=si({type:t});static \u0275inj=ur({imports:[p3]})}return t})();var Li=class t{constructor(e){this.auth=e;this.user$=lN(this.auth)}user$;register(e,n){return v(this,null,function*(){try{yield dN(this.auth,e,n)}catch(r){throw r}})}login(e,n){return v(this,null,function*(){try{yield fN(this.auth,e,n)}catch(r){throw r}})}logout(){return v(this,null,function*(){try{yield pN(this.auth)}catch(e){throw e}})}getCurrentUser(){return this.auth.currentUser}static \u0275fac=function(n){return new(n||t)(G(Po))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};function g3(t,e){if(t&1&&(q(0,"div",13),he(1),Y()),t&2){let n=mo();ge(),wt(" ",n.error," ")}}var Up=class t{constructor(e,n){this.authService=e;this.router=n}email="";password="";loading=!1;error="";onLogin(){return v(this,null,function*(){if(!(!this.email||!this.password)){this.loading=!0,this.error="";try{yield this.authService.login(this.email,this.password),this.router.navigate(["/game"])}catch(e){this.error=e.message||"Login failed. Please try again."}finally{this.loading=!1}}})}static \u0275fac=function(n){return new(n||t)(ie(Li),ie(Hn))};static \u0275cmp=In({type:t,selectors:[["app-login"]],decls:22,vars:5,consts:[["loginForm","ngForm"],[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","email","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Enter your password",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"auth-links"],["routerLink","/register"],[1,"error-message"]],template:function(n,r){if(n&1){let i=go();q(0,"div",1)(1,"div",2)(2,"h2"),he(3,"Login"),Y(),q(4,"form",3,0),Zt("ngSubmit",function(){return Mt(i),Pt(r.onLogin())}),q(6,"div",4)(7,"label",5),he(8,"Email"),Y(),q(9,"input",6),_r("ngModelChange",function(s){return Mt(i),li(r.email,s)||(r.email=s),Pt(s)}),Y()(),q(10,"div",4)(11,"label",7),he(12,"Password"),Y(),q(13,"input",8),_r("ngModelChange",function(s){return Mt(i),li(r.password,s)||(r.password=s),Pt(s)}),Y()(),q(14,"button",9),he(15),Y(),Vn(16,g3,2,1,"div",10),Y(),q(17,"div",11)(18,"p"),he(19,"Don't have an account? "),q(20,"a",12),he(21,"Register here"),Y()()()()()}if(n&2){let i=Oc(5);ge(9),vr("ngModel",r.email),ge(4),vr("ngModel",r.password),ge(),lt("disabled",!i.valid||r.loading),ge(),wt(" ",r.loading?"Logging in...":"Login"," "),ge(),lt("ngIf",r.error)}},dependencies:[jn,yo,jp,Vp,Sa,kp,Fp,fl,pl,hl,dl],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:70vh}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:2.5rem;box-shadow:0 20px 40px #0000001a;width:100%;max-width:400px;border:1px solid rgba(255,255,255,.2)}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:2rem;font-size:2rem;font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e1e5e9;border-radius:10px;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}button[_ngcontent-%COMP%]{width:100%;padding:.875rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:1rem}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #667eea4d}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.75rem;border-radius:8px;margin-top:1rem;text-align:center;border:1px solid #fcc}.auth-links[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.auth-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.auth-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500}.auth-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function m3(t,e){if(t&1&&(q(0,"div",15),he(1),Y()),t&2){let n=mo();ge(),wt(" ",n.error," ")}}function y3(t,e){t&1&&(q(0,"div",15),he(1," Passwords do not match "),Y())}var Bp=class t{constructor(e,n){this.authService=e;this.router=n}email="";password="";confirmPassword="";loading=!1;error="";onRegister(){return v(this,null,function*(){if(!(!this.email||!this.password||this.password!==this.confirmPassword)){this.loading=!0,this.error="";try{yield this.authService.register(this.email,this.password),this.router.navigate(["/game"])}catch(e){this.error=e.message||"Registration failed. Please try again."}finally{this.loading=!1}}})}static \u0275fac=function(n){return new(n||t)(ie(Li),ie(Hn))};static \u0275cmp=In({type:t,selectors:[["app-register"]],decls:27,vars:7,consts:[["registerForm","ngForm"],[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","email","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","minlength","6","placeholder","Enter your password (min 6 characters)",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","required","","placeholder","Confirm your password",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"auth-links"],["routerLink","/login"],[1,"error-message"]],template:function(n,r){if(n&1){let i=go();q(0,"div",1)(1,"div",2)(2,"h2"),he(3,"Register"),Y(),q(4,"form",3,0),Zt("ngSubmit",function(){return Mt(i),Pt(r.onRegister())}),q(6,"div",4)(7,"label",5),he(8,"Email"),Y(),q(9,"input",6),_r("ngModelChange",function(s){return Mt(i),li(r.email,s)||(r.email=s),Pt(s)}),Y()(),q(10,"div",4)(11,"label",7),he(12,"Password"),Y(),q(13,"input",8),_r("ngModelChange",function(s){return Mt(i),li(r.password,s)||(r.password=s),Pt(s)}),Y()(),q(14,"div",4)(15,"label",9),he(16,"Confirm Password"),Y(),q(17,"input",10),_r("ngModelChange",function(s){return Mt(i),li(r.confirmPassword,s)||(r.confirmPassword=s),Pt(s)}),Y()(),q(18,"button",11),he(19),Y(),Vn(20,m3,2,1,"div",12)(21,y3,2,0,"div",12),Y(),q(22,"div",13)(23,"p"),he(24,"Already have an account? "),q(25,"a",14),he(26,"Login here"),Y()()()()()}if(n&2){let i=Oc(5);ge(9),vr("ngModel",r.email),ge(4),vr("ngModel",r.password),ge(4),vr("ngModel",r.confirmPassword),ge(),lt("disabled",!i.valid||r.loading||r.password!==r.confirmPassword),ge(),wt(" ",r.loading?"Creating account...":"Register"," "),ge(),lt("ngIf",r.error),ge(),lt("ngIf",r.password!==r.confirmPassword&&r.confirmPassword)}},dependencies:[jn,yo,jp,Vp,Sa,kp,Fp,fl,oD,pl,hl,dl],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:70vh}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:2.5rem;box-shadow:0 20px 40px #0000001a;width:100%;max-width:400px;border:1px solid rgba(255,255,255,.2)}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:2rem;font-size:2rem;font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e1e5e9;border-radius:10px;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}button[_ngcontent-%COMP%]{width:100%;padding:.875rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:1rem}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #667eea4d}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.75rem;border-radius:8px;margin-top:1rem;text-align:center;border:1px solid #fcc}.auth-links[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.auth-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.auth-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500}.auth-links[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var $p=class t{gameState=new Ke({ballX:50,ballY:10,isMoving:!0,isFalling:!1,velocityX:2,velocityY:0,score:0,gameOver:!1});GRAVITY=.5;BALL_SPEED=2;TARGET_CENTER_X=50;TARGET_CENTER_Y=90;gameState$=this.gameState.asObservable();startGame(){this.gameState.next({ballX:50,ballY:10,isMoving:!0,isFalling:!1,velocityX:this.BALL_SPEED,velocityY:0,score:0,gameOver:!1})}dropBall(){let e=this.gameState.value;this.gameState.next(J(O({},e),{isMoving:!1,isFalling:!0,velocityX:0}))}updateGame(){let e=this.gameState.value;if(e.gameOver)return;let n=O({},e);e.isMoving&&(n.ballX+=e.velocityX,(n.ballX<=5||n.ballX>=95)&&(n.velocityX=-n.velocityX)),e.isFalling&&(n.velocityY+=this.GRAVITY,n.ballY+=n.velocityY,n.ballY>=85&&(n.gameOver=!0,n.score=this.calculateScore(n.ballX))),this.gameState.next(n)}calculateScore(e){let n=Math.abs(e-this.TARGET_CENTER_X);return n<=5?100:n<=10?75:n<=15?50:n<=20?25:0}getCurrentState(){return this.gameState.value}resetGame(){this.startGame()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Hp=class t{constructor(e){this.firestore=e}saveScore(e,n){return v(this,null,function*(){try{let r={score:e,date:new Date,userId:n};yield KP(Sp(this.firestore,"gameResults"),r)}catch(r){throw console.error("Error saving score:",r),r}})}getUserScores(e){let n=Sp(this.firestore,"gameResults"),r=Yw(n,YP("userId","==",e),Qw("date","desc"),Kw(10));return Ae(Ww(r)).pipe(ae(i=>i.docs.map(o=>J(O({},o.data()),{date:o.data().date.toDate()}))))}getTopScores(e=10){let n=Sp(this.firestore,"gameResults"),r=Yw(n,Qw("score","desc"),Kw(e));return Ae(Ww(r)).pipe(ae(i=>i.docs.map(o=>J(O({},o.data()),{date:o.data().date.toDate()}))))}static \u0275fac=function(n){return new(n||t)(G(zo))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var E3=["gameCanvas"];function I3(t,e){t&1&&(q(0,"p"),he(1,"Great job! Your score has been saved."),Y())}function w3(t,e){t&1&&(q(0,"p"),he(1,"Try again to get a better score!"),Y())}function D3(t,e){if(t&1&&(q(0,"div",16)(1,"h2"),he(2,"Game Over!"),Y(),q(3,"p"),he(4),Y(),Vn(5,I3,2,0,"p",17)(6,w3,2,0,"p",17),Y()),t&2){let n=mo();ge(4),wt("Final Score: ",n.currentScore),ge(),lt("ngIf",n.currentScore>0),ge(),lt("ngIf",n.currentScore===0)}}function b3(t,e){if(t&1&&(q(0,"div",18)(1,"span"),he(2),Y(),q(3,"span"),he(4),fv(5,"date"),Y()()),t&2){let n=e.$implicit;ge(2),wt("",n.score," points"),ge(2),Rs(pv(5,2,n.date,"short"))}}function C3(t,e){t&1&&(q(0,"div",19),he(1," No scores yet. Play a game to see your results! "),Y())}var qp=class t{constructor(e,n,r,i){this.authService=e;this.gameService=n;this.scoreService=r;this.router=i}gameCanvas;ctx;gameLoop;gameStateSubscription;userScoresSubscription;userEmail="";currentScore=0;highScore=0;gameOver=!1;canDrop=!0;userScores=[];ngOnInit(){this.authService.user$.subscribe(e=>{if(!e){this.router.navigate(["/login"]);return}this.userEmail=e.email||"",this.loadUserScores()}),this.gameStateSubscription=this.gameService.gameState$.subscribe(e=>{this.currentScore=e.score,this.gameOver=e.gameOver,this.canDrop=!e.isFalling&&!e.gameOver,e.gameOver&&e.score>0&&this.saveScore()})}ngAfterViewInit(){this.initializeCanvas(),this.startGameLoop()}ngOnDestroy(){this.gameLoop&&clearInterval(this.gameLoop),this.gameStateSubscription&&this.gameStateSubscription.unsubscribe(),this.userScoresSubscription&&this.userScoresSubscription.unsubscribe()}initializeCanvas(){let e=this.gameCanvas.nativeElement;this.ctx=e.getContext("2d"),this.ctx&&(this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high")}startGameLoop(){this.gameLoop=setInterval(()=>{this.gameService.updateGame(),this.drawGame()},16)}drawGame(){if(!this.ctx)return;let e=this.gameCanvas.nativeElement,n=this.ctx;n.clearRect(0,0,e.width,e.height);let r=this.gameService.getCurrentState();n.fillStyle="#f0f0f0",n.fillRect(0,0,e.width,e.height);let i=e.width*.5,o=e.height*.9;n.fillStyle="#ff6b6b",n.beginPath(),n.arc(i,o,60,0,2*Math.PI),n.fill(),n.fillStyle="#ff8e8e",n.beginPath(),n.arc(i,o,40,0,2*Math.PI),n.fill(),n.fillStyle="#ff5252",n.beginPath(),n.arc(i,o,20,0,2*Math.PI),n.fill();let s=r.ballX/100*e.width,a=r.ballY/100*e.height;n.fillStyle="#4ecdc4",n.beginPath(),n.arc(s,a,15,0,2*Math.PI),n.fill(),n.fillStyle="rgba(0, 0, 0, 0.1)",n.beginPath(),n.arc(s+2,a+2,15,0,2*Math.PI),n.fill()}dropBall(){this.gameService.dropBall()}resetGame(){this.gameService.resetGame()}saveScore(){return v(this,null,function*(){let e=this.authService.getCurrentUser();if(e&&this.currentScore>0)try{yield this.scoreService.saveScore(this.currentScore,e.uid),this.loadUserScores()}catch(n){console.error("Error saving score:",n)}})}loadUserScores(){let e=this.authService.getCurrentUser();e&&(this.userScoresSubscription=this.scoreService.getUserScores(e.uid).subscribe(n=>{this.userScores=n,this.highScore=n.length>0?Math.max(...n.map(r=>r.score)):0}))}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(n){return new(n||t)(ie(Li),ie($p),ie(Hp),ie(Hn))};static \u0275cmp=In({type:t,selectors:[["app-game"]],viewQuery:function(n,r){if(n&1&&lv(E3,5),n&2){let i;dv(i=hv())&&(r.gameCanvas=i.first)}},decls:27,vars:9,consts:[["gameCanvas",""],[1,"game-container"],[1,"game-header"],[1,"user-info"],[1,"logout-btn",3,"click"],[1,"score-info"],[1,"game-area"],["width","800","height","600"],[1,"game-controls"],[1,"drop-btn",3,"click","disabled"],[1,"reset-btn",3,"click","disabled"],["class","game-over",4,"ngIf"],[1,"leaderboard"],[1,"scores-list"],["class","score-item",4,"ngFor","ngForOf"],["class","no-scores",4,"ngIf"],[1,"game-over"],[4,"ngIf"],[1,"score-item"],[1,"no-scores"]],template:function(n,r){if(n&1){let i=go();q(0,"div",1)(1,"div",2)(2,"div",3)(3,"span"),he(4),Y(),q(5,"button",4),Zt("click",function(){return Mt(i),Pt(r.logout())}),he(6,"Logout"),Y()(),q(7,"div",5)(8,"span"),he(9),Y(),q(10,"span"),he(11),Y()()(),q(12,"div",6),ui(13,"canvas",7,0),q(15,"div",8)(16,"button",9),Zt("click",function(){return Mt(i),Pt(r.dropBall())}),he(17),Y(),q(18,"button",10),Zt("click",function(){return Mt(i),Pt(r.resetGame())}),he(19," New Game "),Y()()(),Vn(20,D3,7,3,"div",11),q(21,"div",12)(22,"h3"),he(23,"Your Recent Scores"),Y(),q(24,"div",13),Vn(25,b3,6,5,"div",14)(26,C3,2,0,"div",15),Y()()()}n&2&&(ge(4),wt("Welcome, ",r.userEmail),ge(5),wt("Current Score: ",r.currentScore),ge(2),wt("High Score: ",r.highScore),ge(5),lt("disabled",!r.canDrop||r.gameOver),ge(),wt(" ",r.canDrop?"Drop Ball":"Ball Dropped"," "),ge(),lt("disabled",!r.gameOver),ge(2),lt("ngIf",r.gameOver),ge(5),lt("ngForOf",r.userScores),ge(),lt("ngIf",r.userScores.length===0))},dependencies:[jn,bh,yo,Mv],styles:[".game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;align-items:center}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:800px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1.5rem 2rem;border-radius:15px;box-shadow:0 10px 30px #0000001a;border:1px solid rgba(255,255,255,.2)}.game-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.game-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-weight:500}.game-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff;border:none;padding:.5rem 1rem;border-radius:8px;cursor:pointer;font-size:.875rem;transition:all .3s ease}.game-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#ff5252;transform:translateY(-1px)}.game-header[_ngcontent-%COMP%]   .score-info[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.game-header[_ngcontent-%COMP%]   .score-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-weight:600;font-size:1.1rem}.game-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.game-area[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 15px 35px #0003;background:#fff}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]{display:flex;gap:1rem}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.875rem 1.5rem;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:120px}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button.drop-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4ecdc4,#44a08d);color:#fff}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button.drop-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #4ecdc44d}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button.reset-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9a9e,#fecfef);color:#fff}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button.reset-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #ff9a9e4d}.game-area[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.game-over[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:2rem;border-radius:15px;text-align:center;box-shadow:0 15px 35px #0000001a;border:1px solid rgba(255,255,255,.2);max-width:400px}.game-over[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.75rem}.game-over[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:.5rem;font-size:1.1rem}.leaderboard[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:2rem;border-radius:15px;box-shadow:0 15px 35px #0000001a;border:1px solid rgba(255,255,255,.2);width:100%;max-width:400px}.leaderboard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1.5rem;text-align:center;font-size:1.5rem}.leaderboard[_ngcontent-%COMP%]   .scores-list[_ngcontent-%COMP%]   .score-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;border-bottom:1px solid #eee}.leaderboard[_ngcontent-%COMP%]   .scores-list[_ngcontent-%COMP%]   .score-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.leaderboard[_ngcontent-%COMP%]   .scores-list[_ngcontent-%COMP%]   .score-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:600;color:#333}.leaderboard[_ngcontent-%COMP%]   .scores-list[_ngcontent-%COMP%]   .score-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#666;font-size:.875rem}.leaderboard[_ngcontent-%COMP%]   .scores-list[_ngcontent-%COMP%]   .no-scores[_ngcontent-%COMP%]{text-align:center;color:#999;font-style:italic;padding:1rem}@media (max-width: 768px){.game-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.game-header[_ngcontent-%COMP%]   .score-info[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.game-controls[_ngcontent-%COMP%]{flex-direction:column;width:100%}.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}canvas[_ngcontent-%COMP%]{width:100%;max-width:400px;height:auto}}"]})};var wx=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Up},{path:"register",component:Bp},{path:"game",component:qp},{path:"**",redirectTo:"/login"}];var Dx={providers:[qm(),yv({eventCoalescing:!0}),h_(wx),eR(()=>tR(ZP.firebase)),uN(()=>hN()),WP(()=>QP())]};var zp=class t{title="Drop Target Game";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=In({type:t,selectors:[["app-root"]],decls:6,vars:1,consts:[[1,"app-container"],[1,"app-header"],[1,"app-main"]],template:function(n,r){n&1&&(q(0,"div",0)(1,"header",1)(2,"h1"),he(3),Y()(),q(4,"main",2),ui(5,"router-outlet"),Y()()),n&2&&(ge(3),Rs(r.title))},dependencies:[hu,jn],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.app-header[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1rem 2rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.2)}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:2rem;font-weight:300;text-shadow:0 2px 4px rgba(0,0,0,.3)}.app-main[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}"]})};$v(zp,Dx).catch(t=>console.error(t));
